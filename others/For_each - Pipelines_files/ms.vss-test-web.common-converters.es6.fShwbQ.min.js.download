"use strict";define("Test/common-converters",["require","exports","Test/common-util/Common","Test/common-util/Common.Utils","VSSUI/Utilities/Date"],(function(e,t,n,i,a){var r,o;r=t[o="Resources"]={},t[o].CurrentRelease="Current release",t[o].CurrentBuild="Current build",function(e){function o(e,t){return e===t.failingSince.build.id?r.CurrentBuild:t.failingSince.build.number}function s(e,t){return e===t.failingSince.release.id?r.CurrentRelease:t.failingSince.release.name}function u(e){let t="";return e&&e.data.subData&&(t=e.data.subData.environment.name),t}function d(e,t,n){return e=e||0,t=t||0,n?e-t:t-e}t[e]={},t[e].getResultViewModelFromTestResult=function(e,t,r){let d=0,l="",c=t,m=!1;if(e.failingSince&&c)switch(c.viewContext){case n.ViewContext.Build:d=e.failingSince.build?e.failingSince.build.id:0,l=o(c.data.mainData.id,e),m=c.data.mainData.id===e.failingSince.build.id;break;case n.ViewContext.Release:d=e.failingSince.release?e.failingSince.release.id:0,l=s(c.data.mainData.id,e),m=c.data.mainData.id===e.failingSince.release.id}return{test:e.testCaseTitle,testTitle:e.automatedTestName,storage:e.automatedTestStorage||"",failingSince:e.failingSince?(0,a.ago)(e.failingSince.date):"",failingContextName:l,isNewFailure:!!e.failingSince&&c.data.mainData.id===e.failingSince.build.id,runId:parseInt(e.testRun.id),resultId:e.id,testcaseObject:e.testCase,testCaseRefId:e.testCaseReferenceId,failingContextId:d,isTestCaseRow:!0,expanded:!1,outcome:n.TestOutcomeEnum[e.outcome],duration:e.durationInMs?i.TCMContractsConverter.ConvertMilliSecondsToReadableFormatForResultSummary(e.durationInMs):i.TCMContractsConverter.ConvertMilliSecondsToReadableFormatForResultSummary(0),durationInMs:e.durationInMs?e.durationInMs:0,dateStarted:e.startedDate?e.startedDate.toLocaleString():"",dateCompleted:e.completedDate?e.completedDate.toLocaleString():"",owner:e.owner?e.owner.displayName:"",parentGroupId:r,subresults:e.subResults,groupId:e.testRun.id.toString()+"."+e.id.toString(),nodeType:null!=e.resultGroupType&&0!==e.resultGroupType?2:1,environmentName:e.releaseReference?u(c):"",isSubResultRow:!1,isCurrentArtifact:m}},t[e].getRunViewModelFromTestRun=function(e,t){return{test:e.name,isTestCaseRow:!1,duration:"-",testTitle:e.name,runId:e.id,expanded:!1,parentGroupId:"-1",groupId:"",nodeType:2}},t[e].getFailingSinceBuildString=o,t[e].getFailingSinceReleaseString=s,t[e].getEnvironmentName=u,t[e].sortDuration=d,t[e].sortingIdentifierAscending=function(e,t){return d(e.durationInMs,t.durationInMs,!0)},t[e].sortingIdentifierDescending=function(e,t){return d(e.durationInMs,t.durationInMs,!1)},t[e].sortingComparatorAscending=function(e,t){return d(e.durationInMs,t.durationInMs,!0)},t[e].sortingComparatorDescending=function(e,t){return d(e.durationInMs,t.durationInMs,!1)},t[e].sortingTestTreeDataComparerDescending=function(e,t){return d(e.durationInMs?e.durationInMs:0,t.durationInMs?t.durationInMs:0,!1)},t[e].sortingTestTreeDataComparerAscending=function(e,t){return d(e.durationInMs?e.durationInMs:0,t.durationInMs?t.durationInMs:0,!0)}}("TestResultConverter")}),["Resources","TestResultConverter"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-test-web.common-converters"}}));