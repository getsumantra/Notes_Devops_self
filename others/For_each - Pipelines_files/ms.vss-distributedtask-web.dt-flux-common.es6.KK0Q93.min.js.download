"use strict";define("DistributedTask/Flux",["require","exports","VSS/Reflux/Action","VSS/Reflux/Store"],(function(e,t,s,n){var a;!function(e){a=t[e]={};class s{constructor(){if(!s._allowPrivateInstantiation)throw new Error("Error: Instantiating an object of Singleton class is not allowed. Please use the instance method")}static getInstance(e){return this._instance||(s._allowPrivateInstantiation=!0,this._instance=new e,s._allowPrivateInstantiation=!1),this._instance}static dispose(){this._instance=null}}t[e].Singleton=s,s._allowPrivateInstantiation=!1,s._instance=null;class n{static create(e,t){return this.createObject(e,t)}static createObject(e,t){if(t)return new e(t);{let s=Object.create(e.prototype);try{const e=s.constructor(t);return e||s}catch(e){return new s.constructor(t)}}}}t[e].Factory=n;class r{static getKey(){throw new Error("This method needs to be implemented in derived classes")}}t[e].KeyMonikerProvider=r;t[e].Initializable=class extends r{};class i extends s{constructor(){super(),this._instanceMap={}}dispose(){Object.keys(this._instanceMap).forEach((e=>{this._deleteInstance(e)})),this._instanceMap={}}getAllObjects(e){let t=e.getKey().toLowerCase(),s=[];for(let e in this._instanceMap)this._instanceMap.hasOwnProperty(e)&&0===e.indexOf(t)&&s.push(this._instanceMap[e]);return s}getObject(e,t,s){if(e.prototype.constructor.length>(s?1:0)){let s=this._getInstanceKey(e,t),n=this._instanceMap[s];if(n)return n;throw new Error("Object requested is not created yet. Ensure that the object is created before it is queried. "+e)}return this.createObject(e,t,s||null)}removeObject(e,t){let s=this._getInstanceKey(e,t);this._deleteInstance(s)}createObject(e,t,s){let a=this._getInstanceKey(e,t),r=this._instanceMap[a];return r||(r=n.createObject(e,s),this.onObjectCreated(r,t),this._instanceMap[a]=r),r}_getInstanceKey(e,t){let s=e.getKey();return t&&(s=s+"."+t),s.toLowerCase()}_deleteInstance(e){let t=this._instanceMap[e];if(t){let s=t.__dispose;s&&"function"==typeof s&&t.__dispose(),delete this._instanceMap[e]}}}t[e].BaseManager=i;t[e].Manager=class extends i{onObjectCreated(e,t){e.initialize(t)}}}("Factory"),function(e){t[e]={};class n extends a.Initializable{}t[e].ActionCreatorBase=n;class r extends a.Initializable{}t[e].ActionsHubBase=r;class i extends s.Action{}t[e].Action=i}("Actions"),function(e){t[e]={};class s extends n.Store{static getKey(){throw new Error("This method needs to be implemented in derived classes")}initialize(e){this._instanceId=e||""}getInstanceId(){return this._instanceId}getState(){return{}}__dispose(){this.disposeInternal(),this._instanceId=null}}t[e].StoreBase=s;t[e].ViewStoreBase=class extends s{};class a extends s{}t[e].ChangeTrackerStoreBase=a;t[e].DataStoreBase=class extends a{}}("Store"),function(e){t[e]={};class s extends a.Manager{static GetStore(e,t,n){return super.getInstance(s).getObject(e,t,n)}static CreateStore(e,t,n){return super.getInstance(s).createObject(e,t,n)}static DeleteStore(e,t){super.getInstance(s).removeObject(e,t)}static dispose(){return super.getInstance(s).dispose()}}t[e].StoreManager=s}("StoreManager"),function(e){t[e]={};class s extends a.Manager{static GetActionsHub(e,t){return super.getInstance(s).getObject(e,t)}static GetAllActionsHub(e){return super.getInstance(s).getAllObjects(e)}static dispose(){return super.getInstance(s).dispose()}}t[e].ActionsHubManager=s}("ActionsHubManager"),function(e){t[e]={};class s extends a.Manager{static GetActionCreator(e,t){return super.getInstance(s).getObject(e,t)}static CreateActionCreator(e,t,n){return super.getInstance(s).createObject(e,t,n)}static DeleteActionCreator(e,t){super.getInstance(s).removeObject(e,t)}static dispose(){return super.getInstance(s).dispose()}}t[e].ActionCreatorManager=s}("ActionCreatorManager")}),["Factory","Actions","Store","StoreManager","ActionsHubManager","ActionCreatorManager"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-distributedtask-web.dt-flux-common"}}));