"use strict";!function(e,t){"function"==typeof define&&define.amd?define("simple-query-string",t):"object"==typeof module&&module.exports?module.exports=t():e.simpleQueryString=t()}(this,(function(){function e(e){return void 0===e?null:e?decodeURIComponent(e):e}function t(e){switch(typeof e){case"string":return encodeURIComponent(e);case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";case"object":return null==e?"":JSON&&JSON.stringify?encodeURIComponent(JSON.stringify(e)):"";default:return""}}return Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),{version:"1.3.2",parse:function(t,s,a){var i;s=s||"&",a=a||"=";var n=Object.create(null);if("string"!=typeof t)return n;if((i=t.indexOf("?"))<0&&t.indexOf(a)<0)return n;i>=0&&(t=t.substr(i+1)),(i=(t=t.replace(/^[\s\uFEFF\xA0\?#&]+|[\s\uFEFF\xA0&]+$/g,"")).lastIndexOf("#"))>0&&(t=t.substr(0,i));var o=t.split(s);for(i=0;i<o.length;++i){var r,l,c=o[i].replace(/\+/g," "),d=c.indexOf(a);if(0!==d&&0!==c.length){d<0?(r=e(c),l=null):(r=e(c.substr(0,d)),l=e(c.substr(d+1)));var p=n[r];void 0===p?n[r]=l:Array.isArray(p)?p.push(l):n[r]=[p,l]}}return n},stringify:function(e,s,a){if(s=s||"&",a=a||"=","object"!=typeof e&&"function"!=typeof e||null===e)return"";var i=function(e){var t,s=Object.prototype.hasOwnProperty,a=[];for(t in e)s.call(e,t)&&a.push(t);return a}(e);if(!i||!i.length)return"";for(var n,o,r,l=[],c=0;c<i.length;c++)if(void 0!==(r=e[o=t(i[c])])&&"function"!=typeof r)if(Array.isArray(r))for(n=0;n<r.length;++n)l.push(o+a+(r[n]?t(r[n]):""));else null!==r&&(r=t(r)),l.push(null==r?o:o+a+r);return l.join(s)}}})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("history",["exports"],t):t(e.History={})}(this,(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function s(e){return"/"===e.charAt(0)}function a(e,t){for(var s=t,a=s+1,i=e.length;a<i;s+=1,a+=1)e[s]=e[a];e.pop()}function i(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function n(e){return"/"===e.charAt(0)?e:"/"+e}function o(e){return"/"===e.charAt(0)?e.substr(1):e}function r(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function l(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function c(e){var t=e||"/",s="",a="",i=t.indexOf("#");-1!==i&&(a=t.substr(i),t=t.substr(0,i));var n=t.indexOf("?");return-1!==n&&(s=t.substr(n),t=t.substr(0,n)),{pathname:t,search:"?"===s?"":s,hash:"#"===a?"":a}}function d(e){var t=e.pathname,s=e.search,a=e.hash,i=t||"/";return s&&"?"!==s&&(i+="?"===s.charAt(0)?s:"?"+s),a&&"#"!==a&&(i+="#"===a.charAt(0)?a:"#"+a),i}function p(e,i,n,o){var r;"string"==typeof e?(r=c(e)).state=i:(void 0===(r=t({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==i&&void 0===r.state&&(r.state=i));try{r.pathname=decodeURI(r.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(r.key=n),o?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=function(e,t){void 0===t&&(t="");var i,n=e&&e.split("/")||[],o=t&&t.split("/")||[],r=e&&s(e),l=t&&s(t),c=r||l;if(e&&s(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";if(o.length){var d=o[o.length-1];i="."===d||".."===d||""===d}else i=!1;for(var p=0,m=o.length;0<=m;m--){var u=o[m];"."===u?a(o,m):".."===u?(a(o,m),p++):p&&(a(o,m),p--)}if(!c)for(;p--;)o.unshift("..");!c||""===o[0]||o[0]&&s(o[0])||o.unshift("");var h=o.join("/");return i&&"/"!==h.substr(-1)&&(h+="/"),h}(r.pathname,o.pathname)):r.pathname=o.pathname:r.pathname||(r.pathname="/"),r}function m(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,s,a,i){if(null!=e){var n="function"==typeof e?e(t,s):e;"string"==typeof n?"function"==typeof a?a(n,i):i(!0):i(!1!==n)}else i(!0)},appendListener:function(e){var s=!0;function a(){s&&e.apply(void 0,arguments)}return t.push(a),function(){s=!1,t=t.filter((function(e){return e!==a}))}},notifyListeners:function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];t.forEach((function(e){return e.apply(void 0,s)}))}}}var u=!("undefined"==typeof window||!window.document||!window.document.createElement);function h(e,t){t(window.confirm(e))}function g(e){if(!e)throw new Error("Invariant failed")}var f="popstate",S="hashchange";function v(){try{return window.history.state||{}}catch(e){return{}}}var y="hashchange",b={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+o(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:o,decodePath:n},slash:{encodePath:n,decodePath:n}};function _(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function C(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function T(e){window.location.replace(_(window.location.href)+"#"+e)}function I(e,t,s){return Math.min(Math.max(e,t),s)}e.createBrowserHistory=function(e){void 0===e&&(e={}),u||g(!1);var s=window.history,a=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,c=o.forceRefresh,y=void 0!==c&&c,b=o.getUserConfirmation,_=void 0===b?h:b,C=o.keyLength,T=void 0===C?6:C,I=e.basename?l(n(e.basename)):"";function x(e){var t=e||{},s=t.key,a=t.state,i=window.location,n=i.pathname+i.search+i.hash;return I&&(n=r(n,I)),p(n,a,s)}function k(){return Math.random().toString(36).substr(2,T)}var w=m();function E(e){t(H,e),H.length=s.length,w.notifyListeners(H.location,H.action)}function P(e){!function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}(e)&&A(x(e.state))}function D(){A(x(v()))}var L=!1;function A(e){L?(L=!1,E()):w.confirmTransitionTo(e,"POP",_,(function(t){t?E({action:"POP",location:e}):function(e){var t=H.location,s=N.indexOf(t.key);-1===s&&(s=0);var a=N.indexOf(e.key);-1===a&&(a=0);var i=s-a;i&&(L=!0,U(i))}(e)}))}var F=x(v()),N=[F.key];function O(e){return I+d(e)}function U(e){s.go(e)}var W=0;function R(e){1===(W+=e)&&1===e?(window.addEventListener(f,P),i&&window.addEventListener(S,D)):0===W&&(window.removeEventListener(f,P),i&&window.removeEventListener(S,D))}var M=!1,H={length:s.length,action:"POP",location:F,createHref:O,push:function(e,t){var i=p(e,t,k(),H.location);w.confirmTransitionTo(i,"PUSH",_,(function(e){if(e){var t=O(i),n=i.key,o=i.state;if(a)if(s.pushState({key:n,state:o},null,t),y)window.location.href=t;else{var r=N.indexOf(H.location.key),l=N.slice(0,r+1);l.push(i.key),N=l,E({action:"PUSH",location:i})}else window.location.href=t}}))},replace:function(e,t){var i="REPLACE",n=p(e,t,k(),H.location);w.confirmTransitionTo(n,i,_,(function(e){if(e){var t=O(n),o=n.key,r=n.state;if(a)if(s.replaceState({key:o,state:r},null,t),y)window.location.replace(t);else{var l=N.indexOf(H.location.key);-1!==l&&(N[l]=n.key),E({action:i,location:n})}else window.location.replace(t)}}))},go:U,goBack:function(){U(-1)},goForward:function(){U(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return M||(R(1),M=!0),function(){return M&&(M=!1,R(-1)),t()}},listen:function(e){var t=w.appendListener(e);return R(1),function(){R(-1),t()}}};return H},e.createHashHistory=function(e){void 0===e&&(e={}),u||g(!1);var s=window.history,a=(window.navigator.userAgent.indexOf("Firefox"),e),i=a.getUserConfirmation,o=void 0===i?h:i,c=a.hashType,f=void 0===c?"slash":c,S=e.basename?l(n(e.basename)):"",v=b[f],I=v.encodePath,x=v.decodePath;function k(){var e=x(C());return S&&(e=r(e,S)),p(e)}var w=m();function E(e){t(H,e),H.length=s.length,w.notifyListeners(H.location,H.action)}var P=!1,D=null;function L(){var e=C(),t=I(e);if(e!==t)T(t);else{var s=k(),a=H.location;if(!P&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(a,s))return;if(D===d(s))return;D=null,function(e){P?(P=!1,E()):w.confirmTransitionTo(e,"POP",o,(function(t){t?E({action:"POP",location:e}):function(e){var t=H.location,s=O.lastIndexOf(d(t));-1===s&&(s=0);var a=O.lastIndexOf(d(e));-1===a&&(a=0);var i=s-a;i&&(P=!0,U(i))}(e)}))}(s)}}var A=C(),F=I(A);A!==F&&T(F);var N=k(),O=[d(N)];function U(e){s.go(e)}var W=0;function R(e){1===(W+=e)&&1===e?window.addEventListener(y,L):0===W&&window.removeEventListener(y,L)}var M=!1,H={length:s.length,action:"POP",location:N,createHref:function(e){var t=document.querySelector("base"),s="";return t&&t.getAttribute("href")&&(s=_(window.location.href)),s+"#"+I(S+d(e))},push:function(e,t){var s=p(e,void 0,void 0,H.location);w.confirmTransitionTo(s,"PUSH",o,(function(e){if(e){var t=d(s),a=I(S+t);if(C()!==a){D=t,function(e){window.location.hash=e}(a);var i=O.lastIndexOf(d(H.location)),n=O.slice(0,i+1);n.push(t),O=n,E({action:"PUSH",location:s})}else E()}}))},replace:function(e,t){var s="REPLACE",a=p(e,void 0,void 0,H.location);w.confirmTransitionTo(a,s,o,(function(e){if(e){var t=d(a),i=I(S+t);C()!==i&&(D=t,T(i));var n=O.indexOf(d(H.location));-1!==n&&(O[n]=t),E({action:s,location:a})}}))},go:U,goBack:function(){U(-1)},goForward:function(){U(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return M||(R(1),M=!0),function(){return M&&(M=!1,R(-1)),t()}},listen:function(e){var t=w.appendListener(e);return R(1),function(){R(-1),t()}}};return H},e.createMemoryHistory=function(e){void 0===e&&(e={});var s=e,a=s.getUserConfirmation,i=s.initialEntries,n=void 0===i?["/"]:i,o=s.initialIndex,r=void 0===o?0:o,l=s.keyLength,c=void 0===l?6:l,u=m();function h(e){t(b,e),b.length=b.entries.length,u.notifyListeners(b.location,b.action)}function g(){return Math.random().toString(36).substr(2,c)}var f=I(r,0,n.length-1),S=n.map((function(e){return p(e,void 0,"string"==typeof e?g():e.key||g())})),v=d;function y(e){var t=I(b.index+e,0,b.entries.length-1),s=b.entries[t];u.confirmTransitionTo(s,"POP",a,(function(e){e?h({action:"POP",location:s,index:t}):h()}))}var b={length:S.length,action:"POP",location:S[f],index:f,entries:S,createHref:v,push:function(e,t){var s=p(e,t,g(),b.location);u.confirmTransitionTo(s,"PUSH",a,(function(e){if(e){var t=b.index+1,a=b.entries.slice(0);a.length>t?a.splice(t,a.length-t,s):a.push(s),h({action:"PUSH",location:s,index:t,entries:a})}}))},replace:function(e,t){var s="REPLACE",i=p(e,t,g(),b.location);u.confirmTransitionTo(i,s,a,(function(e){e&&(b.entries[b.index]=i,h({action:s,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=b.index+e;return 0<=t&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return b},e.createLocation=p,e.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&function e(t,s){if(t===s)return!0;if(null==t||null==s)return!1;if(Array.isArray(t))return Array.isArray(s)&&t.length===s.length&&t.every((function(t,a){return e(t,s[a])}));if("object"!=typeof t&&"object"!=typeof s)return!1;var a=i(t),n=i(s);return a!==t||n!==s?e(a,n):Object.keys(Object.assign({},t,s)).every((function(a){return e(t[a],s[a])}))}(e.state,t.state)},e.parsePath=c,e.createPath=d,Object.defineProperty(e,"__esModule",{value:!0})})),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("js-yaml",[],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jsyaml=e()}((function(){return function e(t,s,a){function i(o,r){if(!s[o]){if(!t[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=s[o]={exports:{}};t[o][0].call(d.exports,(function(e){return i(t[o][1][e]||e)}),d,d.exports,e,t,s,a)}return s[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(e,t,s){var a=e("./js-yaml/loader"),i=e("./js-yaml/dumper");function n(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}t.exports.Type=e("./js-yaml/type"),t.exports.Schema=e("./js-yaml/schema"),t.exports.FAILSAFE_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.JSON_SCHEMA=e("./js-yaml/schema/json"),t.exports.CORE_SCHEMA=e("./js-yaml/schema/core"),t.exports.DEFAULT_SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_FULL_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.load=a.load,t.exports.loadAll=a.loadAll,t.exports.safeLoad=a.safeLoad,t.exports.safeLoadAll=a.safeLoadAll,t.exports.dump=i.dump,t.exports.safeDump=i.safeDump,t.exports.YAMLException=e("./js-yaml/exception"),t.exports.MINIMAL_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.scan=n("scan"),t.exports.parse=n("parse"),t.exports.compose=n("compose"),t.exports.addConstructor=n("addConstructor")},{"./js-yaml/dumper":3,"./js-yaml/exception":4,"./js-yaml/loader":5,"./js-yaml/schema":7,"./js-yaml/schema/core":8,"./js-yaml/schema/default_full":9,"./js-yaml/schema/default_safe":10,"./js-yaml/schema/failsafe":11,"./js-yaml/schema/json":12,"./js-yaml/type":13}],2:[function(e,t,s){function a(e){return null==e}t.exports.isNothing=a,t.exports.isObject=function(e){return"object"==typeof e&&null!==e},t.exports.toArray=function(e){return Array.isArray(e)?e:a(e)?[]:[e]},t.exports.repeat=function(e,t){var s,a="";for(s=0;s<t;s+=1)a+=e;return a},t.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},t.exports.extend=function(e,t){var s,a,i,n;if(t)for(s=0,a=(n=Object.keys(t)).length;s<a;s+=1)e[i=n[s]]=t[i];return e}},{}],3:[function(e,t,s){var a=e("./common"),i=e("./exception"),n=e("./schema/default_full"),o=e("./schema/default_safe"),r=Object.prototype.toString,l=Object.prototype.hasOwnProperty,c={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},d=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function p(e){var t,s,n;if(t=e.toString(16).toUpperCase(),e<=255)s="x",n=2;else if(e<=65535)s="u",n=4;else{if(!(e<=4294967295))throw new i("code point within a string may not be greater than 0xFFFFFFFF");s="U",n=8}return"\\"+s+a.repeat("0",n-t.length)+t}function m(e){this.schema=e.schema||n,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=a.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var s,a,i,n,o,r,c;if(null===t)return{};for(s={},i=0,n=(a=Object.keys(t)).length;i<n;i+=1)o=a[i],r=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(c=e.compiledTypeMap.fallback[o])&&l.call(c.styleAliases,r)&&(r=c.styleAliases[r]),s[o]=r;return s}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function u(e,t){for(var s,i=a.repeat(" ",t),n=0,o=-1,r="",l=e.length;n<l;)n=-1===(o=e.indexOf("\n",n))?(s=e.slice(n),l):(s=e.slice(n,o+1),o+1),s.length&&"\n"!==s&&(r+=i),r+=s;return r}function h(e,t){return"\n"+a.repeat(" ",e.indent*t)}function g(e){return 32===e||9===e}function f(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function S(e){return f(e)&&65279!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&58!==e&&35!==e}function v(e){return/^\n* /.test(e)}function y(e,t,s,a){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==d.indexOf(t))return"'"+t+"'";var n=e.indent*Math.max(1,s),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-n),r=a||-1<e.flowLevel&&s>=e.flowLevel;switch(function(e,t,s,a,i){var n,o,r=!1,l=!1,c=-1!==a,d=-1,p=function(e){return f(e)&&65279!==e&&!g(e)&&45!==e&&63!==e&&58!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&35!==e&&38!==e&&42!==e&&33!==e&&124!==e&&62!==e&&39!==e&&34!==e&&37!==e&&64!==e&&96!==e}(e.charCodeAt(0))&&!g(e.charCodeAt(e.length-1));if(t)for(n=0;n<e.length;n++){if(!f(o=e.charCodeAt(n)))return 5;p=p&&S(o)}else{for(n=0;n<e.length;n++){if(10===(o=e.charCodeAt(n)))r=!0,c&&(l=l||a<n-d-1&&" "!==e[d+1],d=n);else if(!f(o))return 5;p=p&&S(o)}l=l||c&&a<n-d-1&&" "!==e[d+1]}return r||l?9<s&&v(e)?5:l?4:3:p&&!i(e)?1:2}(t,r,e.indent,o,(function(t){return function(e,t){var s,a;for(s=0,a=e.implicitTypes.length;s<a;s+=1)if(e.implicitTypes[s].resolve(t))return!0;return!1}(e,t)}))){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+b(t,e.indent)+_(u(t,n));case 4:return">"+b(t,e.indent)+_(u(function(e,t){for(var s,a,i=/(\n+)([^\n]*)/g,n=function(){var s=e.indexOf("\n");return s=-1!==s?s:e.length,i.lastIndex=s,C(e.slice(0,s),t)}(),o="\n"===e[0]||" "===e[0];a=i.exec(e);){var r=a[1],l=a[2];s=" "===l[0],n+=r+(o||s||""===l?"":"\n")+C(l,t),o=s}return n}(t,o),n));case 5:return'"'+function(e){for(var t,s,a,i="",n=0;n<e.length;n++)55296<=(t=e.charCodeAt(n))&&t<=56319&&56320<=(s=e.charCodeAt(n+1))&&s<=57343?(i+=p(1024*(t-55296)+s-56320+65536),n++):i+=!(a=c[t])&&f(t)?e[n]:a||p(t);return i}(t)+'"';default:throw new i("impossible error: invalid scalar style")}}()}function b(e,t){var s=v(e)?String(t):"",a="\n"===e[e.length-1];return s+(!a||"\n"!==e[e.length-2]&&"\n"!==e?a?"":"-":"+")+"\n"}function _(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function C(e,t){if(""===e||" "===e[0])return e;for(var s,a,i=/ [^ ]/g,n=0,o=0,r=0,l="";s=i.exec(e);)t<(r=s.index)-n&&(a=n<o?o:r,l+="\n"+e.slice(n,a),n=a+1),o=r;return l+="\n",e.length-n>t&&n<o?l+=e.slice(n,o)+"\n"+e.slice(o+1):l+=e.slice(n),l.slice(1)}function T(e,t,s){var a,n,o,c,d,p;for(o=0,c=(n=s?e.explicitTypes:e.implicitTypes).length;o<c;o+=1)if(((d=n[o]).instanceOf||d.predicate)&&(!d.instanceOf||"object"==typeof t&&t instanceof d.instanceOf)&&(!d.predicate||d.predicate(t))){if(e.tag=s?d.tag:"?",d.represent){if(p=e.styleMap[d.tag]||d.defaultStyle,"[object Function]"===r.call(d.represent))a=d.represent(t,p);else{if(!l.call(d.represent,p))throw new i("!<"+d.tag+'> tag resolver accepts not "'+p+'" style');a=d.represent[p](t,p)}e.dump=a}return!0}return!1}function I(e,t,s,a,n,o){e.tag=null,e.dump=s,T(e,s,!1)||T(e,s,!0);var l=r.call(e.dump);a&&(a=e.flowLevel<0||e.flowLevel>t);var c,d,p="[object Object]"===l||"[object Array]"===l;if(p&&(d=-1!==(c=e.duplicates.indexOf(s))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&0<t)&&(n=!1),d&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(p&&d&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),"[object Object]"===l)a&&0!==Object.keys(e.dump).length?(function(e,t,s,a){var n,o,r,l,c,d,p="",m=e.tag,u=Object.keys(s);if(!0===e.sortKeys)u.sort();else if("function"==typeof e.sortKeys)u.sort(e.sortKeys);else if(e.sortKeys)throw new i("sortKeys must be a boolean or a function");for(n=0,o=u.length;n<o;n+=1)d="",a&&0===n||(d+=h(e,t)),l=s[r=u[n]],I(e,t+1,r,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&1024<e.dump.length)&&(e.dump&&10===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=h(e,t)),I(e,t+1,l,!0,c)&&(e.dump&&10===e.dump.charCodeAt(0)?d+=":":d+=": ",p+=d+=e.dump));e.tag=m,e.dump=p||"{}"}(e,t,e.dump,n),d&&(e.dump="&ref_"+c+e.dump)):(function(e,t,s){var a,i,n,o,r,l="",c=e.tag,d=Object.keys(s);for(a=0,i=d.length;a<i;a+=1)r=e.condenseFlow?'"':"",0!==a&&(r+=", "),o=s[n=d[a]],I(e,t,n,!1,!1)&&(1024<e.dump.length&&(r+="? "),r+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),I(e,t,o,!1,!1)&&(l+=r+=e.dump));e.tag=c,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if("[object Array]"===l){var m=e.noArrayIndent&&0<t?t-1:t;a&&0!==e.dump.length?(function(e,t,s,a){var i,n,o="",r=e.tag;for(i=0,n=s.length;i<n;i+=1)I(e,t+1,s[i],!0,!0)&&(a&&0===i||(o+=h(e,t)),e.dump&&10===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=r,e.dump=o||"[]"}(e,m,e.dump,n),d&&(e.dump="&ref_"+c+e.dump)):(function(e,t,s){var a,i,n="",o=e.tag;for(a=0,i=s.length;a<i;a+=1)I(e,t,s[a],!1,!1)&&(0!==a&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=o,e.dump="["+n+"]"}(e,m,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump))}else{if("[object String]"!==l){if(e.skipInvalid)return!1;throw new i("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&y(e,e.dump,t,o)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function x(e,t){var s=new m(t=t||{});return s.noRefs||function(e,t){var s,a,i=[],n=[];for(function e(t,s,a){var i,n,o;if(null!==t&&"object"==typeof t)if(-1!==(n=s.indexOf(t)))-1===a.indexOf(n)&&a.push(n);else if(s.push(t),Array.isArray(t))for(n=0,o=t.length;n<o;n+=1)e(t[n],s,a);else for(n=0,o=(i=Object.keys(t)).length;n<o;n+=1)e(t[i[n]],s,a)}(e,i,n),s=0,a=n.length;s<a;s+=1)t.duplicates.push(i[n[s]]);t.usedDuplicates=new Array(a)}(e,s),I(s,0,e,!0,!0)?s.dump+"\n":""}t.exports.dump=x,t.exports.safeDump=function(e,t){return x(e,a.extend({schema:o},t))}},{"./common":2,"./exception":4,"./schema/default_full":9,"./schema/default_safe":10}],4:[function(e,t,s){function a(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}((a.prototype=Object.create(Error.prototype)).constructor=a).prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},t.exports=a},{}],5:[function(e,t,s){var a=e("./common"),i=e("./exception"),n=e("./mark"),o=e("./schema/default_safe"),r=e("./schema/default_full"),l=Object.prototype.hasOwnProperty,c=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d=/[\x85\u2028\u2029]/,p=/[,\[\]\{\}]/,m=/^(?:!|!!|![a-z\-]+!)$/i,u=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function h(e){return Object.prototype.toString.call(e)}function g(e){return 10===e||13===e}function f(e){return 9===e||32===e}function S(e){return 9===e||32===e||10===e||13===e}function v(e){return 44===e||91===e||93===e||123===e||125===e}function y(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"Â…":95===e?"Â ":76===e?"\u2028":80===e?"\u2029":""}for(var b=new Array(256),_=new Array(256),C=0;C<256;C++)b[C]=y(C)?1:0,_[C]=y(C);function T(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||r,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function I(e,t){return new i(t,new n(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function x(e,t){throw I(e,t)}function k(e,t){e.onWarning&&e.onWarning.call(null,I(e,t))}var w={YAML:function(e,t,s){var a,i,n;null!==e.version&&x(e,"duplication of %YAML directive"),1!==s.length&&x(e,"YAML directive accepts exactly one argument"),null===(a=/^([0-9]+)\.([0-9]+)$/.exec(s[0]))&&x(e,"ill-formed argument of the YAML directive"),i=parseInt(a[1],10),n=parseInt(a[2],10),1!==i&&x(e,"unacceptable YAML version of the document"),e.version=s[0],e.checkLineBreaks=n<2,1!==n&&2!==n&&k(e,"unsupported YAML version of the document")},TAG:function(e,t,s){var a,i;2!==s.length&&x(e,"TAG directive accepts exactly two arguments"),a=s[0],i=s[1],m.test(a)||x(e,"ill-formed tag handle (first argument) of the TAG directive"),l.call(e.tagMap,a)&&x(e,'there is a previously declared suffix for "'+a+'" tag handle'),u.test(i)||x(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[a]=i}};function E(e,t,s,a){var i,n,o,r;if(t<s){if(r=e.input.slice(t,s),a)for(i=0,n=r.length;i<n;i+=1)9===(o=r.charCodeAt(i))||32<=o&&o<=1114111||x(e,"expected valid JSON character");else c.test(r)&&x(e,"the stream contains non-printable characters");e.result+=r}}function P(e,t,s,i){var n,o,r,c;for(a.isObject(s)||x(e,"cannot merge mappings; the provided source object is unacceptable"),r=0,c=(n=Object.keys(s)).length;r<c;r+=1)o=n[r],l.call(t,o)||(t[o]=s[o],i[o]=!0)}function D(e,t,s,a,i,n,o,r){var c,d;if(Array.isArray(i))for(c=0,d=(i=Array.prototype.slice.call(i)).length;c<d;c+=1)Array.isArray(i[c])&&x(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===h(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===h(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===a)if(Array.isArray(n))for(c=0,d=n.length;c<d;c+=1)P(e,t,n[c],s);else P(e,t,n,s);else e.json||l.call(s,i)||!l.call(t,i)||(e.line=o||e.line,e.position=r||e.position,x(e,"duplicated mapping key")),t[i]=n,delete s[i];return t}function L(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):x(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function A(e,t,s){for(var a=0,i=e.input.charCodeAt(e.position);0!==i;){for(;f(i);)i=e.input.charCodeAt(++e.position);if(t&&35===i)for(;10!==(i=e.input.charCodeAt(++e.position))&&13!==i&&0!==i;);if(!g(i))break;for(L(e),i=e.input.charCodeAt(e.position),a++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==s&&0!==a&&e.lineIndent<s&&k(e,"deficient indentation"),a}function F(e){var t,s=e.position;return!(45!==(t=e.input.charCodeAt(s))&&46!==t||t!==e.input.charCodeAt(s+1)||t!==e.input.charCodeAt(s+2)||(s+=3,0!==(t=e.input.charCodeAt(s))&&!S(t)))}function N(e,t){1===t?e.result+=" ":1<t&&(e.result+=a.repeat("\n",t-1))}function O(e,t){var s,a,i=e.tag,n=e.anchor,o=[],r=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),a=e.input.charCodeAt(e.position);0!==a&&45===a&&S(e.input.charCodeAt(e.position+1));)if(r=!0,e.position++,A(e,!0,-1)&&e.lineIndent<=t)o.push(null),a=e.input.charCodeAt(e.position);else if(s=e.line,R(e,t,3,!1,!0),o.push(e.result),A(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===s||e.lineIndent>t)&&0!==a)x(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!r&&(e.tag=i,e.anchor=n,e.kind="sequence",e.result=o,!0)}function U(e){var t,s,a,i,n=!1,o=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&x(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(n=!0,i=e.input.charCodeAt(++e.position)):33===i?(o=!0,s="!!",i=e.input.charCodeAt(++e.position)):s="!",t=e.position,n){for(;0!==(i=e.input.charCodeAt(++e.position))&&62!==i;);e.position<e.length?(a=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):x(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!S(i);)33===i&&(o?x(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(t-1,e.position+1),m.test(s)||x(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),p.test(a)&&x(e,"tag suffix cannot contain flow indicator characters")}return a&&!u.test(a)&&x(e,"tag name cannot contain such characters: "+a),n?e.tag=a:l.call(e.tagMap,s)?e.tag=e.tagMap[s]+a:"!"===s?e.tag="!"+a:"!!"===s?e.tag="tag:yaml.org,2002:"+a:x(e,'undeclared tag handle "'+s+'"'),!0}function W(e){var t,s;if(38!==(s=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&x(e,"duplication of an anchor property"),s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!S(s)&&!v(s);)s=e.input.charCodeAt(++e.position);return e.position===t&&x(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function R(e,t,s,i,n){var o,r,c,d,p,m,u,h,y=1,C=!1,T=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=r=c=4===s||3===s,i&&A(e,!0,-1)&&(C=!0,e.lineIndent>t?y=1:e.lineIndent===t?y=0:e.lineIndent<t&&(y=-1)),1===y)for(;U(e)||W(e);)A(e,!0,-1)?(C=!0,c=o,e.lineIndent>t?y=1:e.lineIndent===t?y=0:e.lineIndent<t&&(y=-1)):c=!1;if(c&&(c=C||n),1!==y&&4!==s||(u=1===s||2===s?t:t+1,h=e.position-e.lineStart,1===y?c&&(O(e,h)||function(e,t,s){var a,i,n,o,r,l=e.tag,c=e.anchor,d={},p={},m=null,u=null,h=null,g=!1,v=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),r=e.input.charCodeAt(e.position);0!==r;){if(a=e.input.charCodeAt(e.position+1),n=e.line,o=e.position,63!==r&&58!==r||!S(a)){if(!R(e,s,2,!1,!0))break;if(e.line===n){for(r=e.input.charCodeAt(e.position);f(r);)r=e.input.charCodeAt(++e.position);if(58===r)S(r=e.input.charCodeAt(++e.position))||x(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(D(e,d,p,m,u,null),m=u=h=null),i=g=!(v=!0),m=e.tag,u=e.result;else{if(!v)return e.tag=l,e.anchor=c,!0;x(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=l,e.anchor=c,!0;x(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===r?(g&&(D(e,d,p,m,u,null),m=u=h=null),i=g=v=!0):g?i=!(g=!1):x(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,r=a;if((e.line===n||e.lineIndent>t)&&(R(e,t,4,!0,i)&&(g?u=e.result:h=e.result),g||(D(e,d,p,m,u,h,n,o),m=u=h=null),A(e,!0,-1),r=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==r)x(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return g&&D(e,d,p,m,u,null),v&&(e.tag=l,e.anchor=c,e.kind="mapping",e.result=d),v}(e,h,u))||function(e,t){var s,a,i,n,o,r,l,c,d,p,m=!0,u=e.tag,h=e.anchor,g={};if(91===(p=e.input.charCodeAt(e.position)))r=!(i=93),a=[];else{if(123!==p)return!1;i=125,r=!0,a={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),p=e.input.charCodeAt(++e.position);0!==p;){if(A(e,!0,t),(p=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=u,e.anchor=h,e.kind=r?"mapping":"sequence",e.result=a,!0;m||x(e,"missed comma between flow collection entries"),d=null,n=o=!1,63===p&&S(e.input.charCodeAt(e.position+1))&&(n=o=!0,e.position++,A(e,!0,t)),s=e.line,R(e,t,1,!1,!0),c=e.tag,l=e.result,A(e,!0,t),p=e.input.charCodeAt(e.position),!o&&e.line!==s||58!==p||(n=!0,p=e.input.charCodeAt(++e.position),A(e,!0,t),R(e,t,1,!1,!0),d=e.result),r?D(e,a,g,c,l,d):n?a.push(D(e,null,g,c,l,d)):a.push(l),A(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(m=!0,p=e.input.charCodeAt(++e.position)):m=!1}x(e,"unexpected end of the stream within a flow collection")}(e,u)?T=!0:(r&&function(e,t){var s,i,n,o,r,l=1,c=!1,d=!1,p=t,m=0,u=!1;if(124===(o=e.input.charCodeAt(e.position)))i=!1;else{if(62!==o)return!1;i=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)1===l?l=43===o?3:2:x(e,"repeat of a chomping mode identifier");else{if(!(0<=(n=48<=(r=o)&&r<=57?r-48:-1)))break;0==n?x(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):d?x(e,"repeat of an indentation width identifier"):(p=t+n-1,d=!0)}if(f(o)){for(;f(o=e.input.charCodeAt(++e.position)););if(35===o)for(;!g(o=e.input.charCodeAt(++e.position))&&0!==o;);}for(;0!==o;){for(L(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!d||e.lineIndent<p)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!d&&e.lineIndent>p&&(p=e.lineIndent),g(o))m++;else{if(e.lineIndent<p){3===l?e.result+=a.repeat("\n",c?1+m:m):1===l&&c&&(e.result+="\n");break}for(i?f(o)?(u=!0,e.result+=a.repeat("\n",c?1+m:m)):u?(u=!1,e.result+=a.repeat("\n",m+1)):0===m?c&&(e.result+=" "):e.result+=a.repeat("\n",m):e.result+=a.repeat("\n",c?1+m:m),d=c=!0,m=0,s=e.position;!g(o)&&0!==o;)o=e.input.charCodeAt(++e.position);E(e,s,e.position,!1)}}return!0}(e,u)||function(e,t){var s,a,i;if(39!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,a=i=e.position;0!==(s=e.input.charCodeAt(e.position));)if(39===s){if(E(e,a,e.position,!0),39!==(s=e.input.charCodeAt(++e.position)))return!0;a=e.position,e.position++,i=e.position}else g(s)?(E(e,a,i,!0),N(e,A(e,!1,t)),a=i=e.position):e.position===e.lineStart&&F(e)?x(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);x(e,"unexpected end of the stream within a single quoted scalar")}(e,u)||function(e,t){var s,a,i,n,o,r,l,c,d,p;if(34!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,s=a=e.position;0!==(r=e.input.charCodeAt(e.position));){if(34===r)return E(e,s,e.position,!0),e.position++,!0;if(92===r){if(E(e,s,e.position,!0),g(r=e.input.charCodeAt(++e.position)))A(e,!1,t);else if(r<256&&b[r])e.result+=_[r],e.position++;else if(0<(o=120===(p=r)?2:117===p?4:85===p?8:0)){for(i=o,n=0;0<i;i--)d=void 0,0<=(o=48<=(c=r=e.input.charCodeAt(++e.position))&&c<=57?c-48:97<=(d=32|c)&&d<=102?d-97+10:-1)?n=(n<<4)+o:x(e,"expected hexadecimal character");e.result+=(l=n)<=65535?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10),56320+(l-65536&1023)),e.position++}else x(e,"unknown escape sequence");s=a=e.position}else g(r)?(E(e,s,a,!0),N(e,A(e,!1,t)),s=a=e.position):e.position===e.lineStart&&F(e)?x(e,"unexpected end of the document within a double quoted scalar"):(e.position++,a=e.position)}x(e,"unexpected end of the stream within a double quoted scalar")}(e,u)?T=!0:function(e){var t,s,a;if(42!==(a=e.input.charCodeAt(e.position)))return!1;for(a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!S(a)&&!v(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&x(e,"name of an alias node must contain at least one character"),s=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(s)||x(e,'unidentified alias "'+s+'"'),e.result=e.anchorMap[s],A(e,!0,-1),!0}(e)?(T=!0,null===e.tag&&null===e.anchor||x(e,"alias node should not have any properties")):function(e,t,s){var a,i,n,o,r,l,c,d,p=e.kind,m=e.result;if(S(d=e.input.charCodeAt(e.position))||v(d)||35===d||38===d||42===d||33===d||124===d||62===d||39===d||34===d||37===d||64===d||96===d)return!1;if((63===d||45===d)&&(S(a=e.input.charCodeAt(e.position+1))||s&&v(a)))return!1;for(e.kind="scalar",e.result="",i=n=e.position,o=!1;0!==d;){if(58===d){if(S(a=e.input.charCodeAt(e.position+1))||s&&v(a))break}else if(35===d){if(S(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&F(e)||s&&v(d))break;if(g(d)){if(r=e.line,l=e.lineStart,c=e.lineIndent,A(e,!1,-1),e.lineIndent>=t){o=!0,d=e.input.charCodeAt(e.position);continue}e.position=n,e.line=r,e.lineStart=l,e.lineIndent=c;break}}o&&(E(e,i,n,!1),N(e,e.line-r),i=n=e.position,o=!1),f(d)||(n=e.position+1),d=e.input.charCodeAt(++e.position)}return E(e,i,n,!1),!!e.result||(e.kind=p,e.result=m,!1)}(e,u,1===s)&&(T=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===y&&(T=c&&O(e,h))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(d=0,p=e.implicitTypes.length;d<p;d+=1)if((m=e.implicitTypes[d]).resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else l.call(e.typeMap[e.kind||"fallback"],e.tag)?(m=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&m.kind!==e.kind&&x(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result)?(e.result=m.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):x(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):x(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||T}function M(e){var t,s,a,i,n=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(i=e.input.charCodeAt(e.position))&&(A(e,!0,-1),i=e.input.charCodeAt(e.position),!(0<e.lineIndent||37!==i));){for(o=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!S(i);)i=e.input.charCodeAt(++e.position);for(a=[],(s=e.input.slice(t,e.position)).length<1&&x(e,"directive name must not be less than one character in length");0!==i;){for(;f(i);)i=e.input.charCodeAt(++e.position);if(35===i){for(;0!==(i=e.input.charCodeAt(++e.position))&&!g(i););break}if(g(i))break;for(t=e.position;0!==i&&!S(i);)i=e.input.charCodeAt(++e.position);a.push(e.input.slice(t,e.position))}0!==i&&L(e),l.call(w,s)?w[s](e,s,a):k(e,'unknown document directive "'+s+'"')}A(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,A(e,!0,-1)):o&&x(e,"directives end mark is expected"),R(e,e.lineIndent-1,4,!1,!0),A(e,!0,-1),e.checkLineBreaks&&d.test(e.input.slice(n,e.position))&&k(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&F(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,A(e,!0,-1)):e.position<e.length-1&&x(e,"end of the stream or a document separator is expected")}function H(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var s=new T(e,t);for(s.input+="\0";32===s.input.charCodeAt(s.position);)s.lineIndent+=1,s.position+=1;for(;s.position<s.length-1;)M(s);return s.documents}function j(e,t,s){var a,i,n=H(e,s);if("function"!=typeof t)return n;for(a=0,i=n.length;a<i;a+=1)t(n[a])}function K(e,t){var s=H(e,t);if(0!==s.length){if(1===s.length)return s[0];throw new i("expected a single document in the stream, but found more")}}t.exports.loadAll=j,t.exports.load=K,t.exports.safeLoadAll=function(e,t,s){if("function"!=typeof t)return j(e,a.extend({schema:o},s));j(e,t,a.extend({schema:o},s))},t.exports.safeLoad=function(e,t){return K(e,a.extend({schema:o},t))}},{"./common":2,"./exception":4,"./mark":6,"./schema/default_full":9,"./schema/default_safe":10}],6:[function(e,t,s){var a=e("./common");function i(e,t,s,a,i){this.name=e,this.buffer=t,this.position=s,this.line=a,this.column=i}i.prototype.getSnippet=function(e,t){var s,i,n,o,r;if(!this.buffer)return null;for(e=e||4,t=t||75,s="",i=this.position;0<i&&-1==="\0\r\nÂ…\u2028\u2029".indexOf(this.buffer.charAt(i-1));)if(i-=1,this.position-i>t/2-1){s=" ... ",i+=5;break}for(n="",o=this.position;o<this.buffer.length&&-1==="\0\r\nÂ…\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>t/2-1){n=" ... ",o-=5;break}return r=this.buffer.slice(i,o),a.repeat(" ",e)+s+r+n+"\n"+a.repeat(" ",e+this.position-i+s.length)+"^"},i.prototype.toString=function(e){var t,s="";return this.name&&(s+='in "'+this.name+'" '),s+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(s+=":\n"+t),s},t.exports=i},{"./common":2}],7:[function(e,t,s){var a=e("./common"),i=e("./exception"),n=e("./type");function o(e,t,s){var a=[];return e.include.forEach((function(e){s=o(e,t,s)})),e[t].forEach((function(e){s.forEach((function(t,s){t.tag===e.tag&&t.kind===e.kind&&a.push(s)})),s.push(e)})),s.filter((function(e,t){return-1===a.indexOf(t)}))}function r(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=o(this,"implicit",[]),this.compiledExplicit=o(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,s={scalar:{},sequence:{},mapping:{},fallback:{}};function a(e){s[e.kind][e.tag]=s.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(a);return s}(this.compiledImplicit,this.compiledExplicit)}r.DEFAULT=null,r.create=function(){var e,t;switch(arguments.length){case 1:e=r.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new i("Wrong number of arguments for Schema.create function")}if(e=a.toArray(e),t=a.toArray(t),!e.every((function(e){return e instanceof r})))throw new i("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof n})))throw new i("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new r({include:e,explicit:t})},t.exports=r},{"./common":2,"./exception":4,"./type":13}],8:[function(e,t,s){var a=e("../schema");t.exports=new a({include:[e("./json")]})},{"../schema":7,"./json":12}],9:[function(e,t,s){var a=e("../schema");t.exports=a.DEFAULT=new a({include:[e("./default_safe")],explicit:[e("../type/js/undefined"),e("../type/js/regexp"),e("../type/js/function")]})},{"../schema":7,"../type/js/function":18,"../type/js/regexp":19,"../type/js/undefined":20,"./default_safe":10}],10:[function(e,t,s){var a=e("../schema");t.exports=new a({include:[e("./core")],implicit:[e("../type/timestamp"),e("../type/merge")],explicit:[e("../type/binary"),e("../type/omap"),e("../type/pairs"),e("../type/set")]})},{"../schema":7,"../type/binary":14,"../type/merge":22,"../type/omap":24,"../type/pairs":25,"../type/set":27,"../type/timestamp":29,"./core":8}],11:[function(e,t,s){var a=e("../schema");t.exports=new a({explicit:[e("../type/str"),e("../type/seq"),e("../type/map")]})},{"../schema":7,"../type/map":21,"../type/seq":26,"../type/str":28}],12:[function(e,t,s){var a=e("../schema");t.exports=new a({include:[e("./failsafe")],implicit:[e("../type/null"),e("../type/bool"),e("../type/int"),e("../type/float")]})},{"../schema":7,"../type/bool":15,"../type/float":16,"../type/int":17,"../type/null":23,"./failsafe":11}],13:[function(e,t,s){var a=e("./exception"),i=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],n=["scalar","sequence","mapping"];t.exports=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===i.indexOf(t))throw new a('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(s){e[s].forEach((function(e){t[String(e)]=s}))})),t}(t.styleAliases||null),-1===n.indexOf(this.kind))throw new a('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},{"./exception":4}],14:[function(e,t,s){var a;try{a=e("buffer").Buffer}catch(e){}var i=e("../type"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";t.exports=new i("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,s,a=0,i=e.length,o=n;for(s=0;s<i;s++)if(!(64<(t=o.indexOf(e.charAt(s))))){if(t<0)return!1;a+=6}return a%8==0},construct:function(e){var t,s,i=e.replace(/[\r\n=]/g,""),o=i.length,r=n,l=0,c=[];for(t=0;t<o;t++)t%4==0&&t&&(c.push(l>>16&255),c.push(l>>8&255),c.push(255&l)),l=l<<6|r.indexOf(i.charAt(t));return 0==(s=o%4*6)?(c.push(l>>16&255),c.push(l>>8&255),c.push(255&l)):18==s?(c.push(l>>10&255),c.push(l>>2&255)):12==s&&c.push(l>>4&255),a?a.from?a.from(c):new a(c):c},predicate:function(e){return a&&a.isBuffer(e)},represent:function(e){var t,s,a="",i=0,o=e.length,r=n;for(t=0;t<o;t++)t%3==0&&t&&(a+=r[i>>18&63],a+=r[i>>12&63],a+=r[i>>6&63],a+=r[63&i]),i=(i<<8)+e[t];return 0==(s=o%3)?(a+=r[i>>18&63],a+=r[i>>12&63],a+=r[i>>6&63],a+=r[63&i]):2==s?(a+=r[i>>10&63],a+=r[i>>4&63],a+=r[i<<2&63],a+=r[64]):1==s&&(a+=r[i>>2&63],a+=r[i<<4&63],a+=r[64],a+=r[64]),a}})},{"../type":13}],15:[function(e,t,s){var a=e("../type");t.exports=new a("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},{"../type":13}],16:[function(e,t,s){var a=e("../common"),i=e("../type"),n=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),o=/^[-+]?[0-9]+e/;t.exports=new i("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!n.test(e)||"_"===e[e.length-1])},construct:function(e){var t,s,a,i;return s="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,i=[],0<="+-".indexOf(t[0])&&(t=t.slice(1)),".inf"===t?1==s?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:0<=t.indexOf(":")?(t.split(":").forEach((function(e){i.unshift(parseFloat(e,10))})),t=0,a=1,i.forEach((function(e){t+=e*a,a*=60})),s*t):s*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||a.isNegativeZero(e))},represent:function(e,t){var s;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(a.isNegativeZero(e))return"-0.0";return s=e.toString(10),o.test(s)?s.replace("e",".e"):s},defaultStyle:"lowercase"})},{"../common":2,"../type":13}],17:[function(e,t,s){var a=e("../common"),i=e("../type");t.exports=new i("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,s,a,i,n=e.length,o=0,r=!1;if(!n)return!1;if("-"!==(t=e[o])&&"+"!==t||(t=e[++o]),"0"===t){if(o+1===n)return!0;if("b"===(t=e[++o])){for(o++;o<n;o++)if("_"!==(t=e[o])){if("0"!==t&&"1"!==t)return!1;r=!0}return r&&"_"!==t}if("x"===t){for(o++;o<n;o++)if("_"!==(t=e[o])){if(!(48<=(a=e.charCodeAt(o))&&a<=57||65<=a&&a<=70||97<=a&&a<=102))return!1;r=!0}return r&&"_"!==t}for(;o<n;o++)if("_"!==(t=e[o])){if(!(48<=(s=e.charCodeAt(o))&&s<=55))return!1;r=!0}return r&&"_"!==t}if("_"===t)return!1;for(;o<n;o++)if("_"!==(t=e[o])){if(":"===t)break;if(!(48<=(i=e.charCodeAt(o))&&i<=57))return!1;r=!0}return!(!r||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(o)))},construct:function(e){var t,s,a=e,i=1,n=[];return-1!==a.indexOf("_")&&(a=a.replace(/_/g,"")),"-"!==(t=a[0])&&"+"!==t||("-"===t&&(i=-1),t=(a=a.slice(1))[0]),"0"===a?0:"0"===t?"b"===a[1]?i*parseInt(a.slice(2),2):"x"===a[1]?i*parseInt(a,16):i*parseInt(a,8):-1!==a.indexOf(":")?(a.split(":").forEach((function(e){n.unshift(parseInt(e,10))})),a=0,s=1,n.forEach((function(e){a+=e*s,s*=60})),i*a):i*parseInt(a,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!a.isNegativeZero(e)},represent:{binary:function(e){return 0<=e?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return 0<=e?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return 0<=e?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":2,"../type":13}],18:[function(e,t,s){var a;try{a=e("esprima")}catch(e){"undefined"!=typeof window&&(a=window.esprima)}var i=e("../../type");t.exports=new i("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",s=a.parse(t,{range:!0});return"Program"===s.type&&1===s.body.length&&"ExpressionStatement"===s.body[0].type&&("ArrowFunctionExpression"===s.body[0].expression.type||"FunctionExpression"===s.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,s="("+e+")",i=a.parse(s,{range:!0}),n=[];if("Program"!==i.type||1!==i.body.length||"ExpressionStatement"!==i.body[0].type||"ArrowFunctionExpression"!==i.body[0].expression.type&&"FunctionExpression"!==i.body[0].expression.type)throw new Error("Failed to resolve function");return i.body[0].expression.params.forEach((function(e){n.push(e.name)})),t=i.body[0].expression.body.range,"BlockStatement"===i.body[0].expression.body.type?new Function(n,s.slice(t[0]+1,t[1]-1)):new Function(n,"return "+s.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},{"../../type":13}],19:[function(e,t,s){var a=e("../../type");t.exports=new a("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,s=/\/([gim]*)$/.exec(e),a="";if("/"===t[0]){if(s&&(a=s[1]),3<a.length)return!1;if("/"!==t[t.length-a.length-1])return!1}return!0},construct:function(e){var t=e,s=/\/([gim]*)$/.exec(e),a="";return"/"===t[0]&&(s&&(a=s[1]),t=t.slice(1,t.length-a.length-1)),new RegExp(t,a)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},{"../../type":13}],20:[function(e,t,s){var a=e("../../type");t.exports=new a("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},{"../../type":13}],21:[function(e,t,s){var a=e("../type");t.exports=new a("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},{"../type":13}],22:[function(e,t,s){var a=e("../type");t.exports=new a("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},{"../type":13}],23:[function(e,t,s){var a=e("../type");t.exports=new a("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":13}],24:[function(e,t,s){var a=e("../type"),i=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=new a("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,s,a,o,r,l=[],c=e;for(t=0,s=c.length;t<s;t+=1){if(a=c[t],r=!1,"[object Object]"!==n.call(a))return!1;for(o in a)if(i.call(a,o)){if(r)return!1;r=!0}if(!r)return!1;if(-1!==l.indexOf(o))return!1;l.push(o)}return!0},construct:function(e){return null!==e?e:[]}})},{"../type":13}],25:[function(e,t,s){var a=e("../type"),i=Object.prototype.toString;t.exports=new a("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,s,a,n,o,r=e;for(o=new Array(r.length),t=0,s=r.length;t<s;t+=1){if(a=r[t],"[object Object]"!==i.call(a))return!1;if(1!==(n=Object.keys(a)).length)return!1;o[t]=[n[0],a[n[0]]]}return!0},construct:function(e){if(null===e)return[];var t,s,a,i,n,o=e;for(n=new Array(o.length),t=0,s=o.length;t<s;t+=1)a=o[t],i=Object.keys(a),n[t]=[i[0],a[i[0]]];return n}})},{"../type":13}],26:[function(e,t,s){var a=e("../type");t.exports=new a("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},{"../type":13}],27:[function(e,t,s){var a=e("../type"),i=Object.prototype.hasOwnProperty;t.exports=new a("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,s=e;for(t in s)if(i.call(s,t)&&null!==s[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},{"../type":13}],28:[function(e,t,s){var a=e("../type");t.exports=new a("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},{"../type":13}],29:[function(e,t,s){var a=e("../type"),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),n=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");t.exports=new a("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==i.exec(e)||null!==n.exec(e))},construct:function(e){var t,s,a,o,r,l,c,d,p=0,m=null;if(null===(t=i.exec(e))&&(t=n.exec(e)),null===t)throw new Error("Date resolve error");if(s=+t[1],a=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(s,a,o));if(r=+t[4],l=+t[5],c=+t[6],t[7]){for(p=t[7].slice(0,3);p.length<3;)p+="0";p=+p}return t[9]&&(m=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(m=-m)),d=new Date(Date.UTC(s,a,o,r,l,c,p)),m&&d.setTime(d.getTime()-m),d},instanceOf:Date,represent:function(e){return e.toISOString()}})},{"../type":13}],"/":[function(e,t,s){var a=e("./lib/js-yaml.js");t.exports=a},{"./lib/js-yaml.js":1}]},{},[])("/")})),define("Environments/Providers/External/Kubernetes",["require","exports","history","simple-query-string","VSS/Core/Observable","VSS/Core/Util/String","VSSUI/Status","VSSUI/TooltipEx","VSSUI/Util","react","VSSUI/Button","VSSUI/Card","VSSUI/Header","VSSUI/Link","VSSUI/Table","VSSUI/Utilities/Provider","VSSUI/ConditionalChildren","VSSUI/Dropdown","VSSUI/FilterBar","VSSUI/TextFilterBarItem","VSSUI/Pill","VSSUI/PillGroup","VSSUI/Ago","VSSUI/Page","VSSUI/Utilities/Date","VSSUI/List","js-yaml","VSSUI/MessageCard","VSSUI/Spinner","VSSUI/Tabs","VSSUI/MasterDetails","VSSUI/MasterDetailsContext","VSSUI/ZeroData","VSS/Core/Util/Accessibility","VSSUI/HeaderCommandBar","VSSUI/Surface","VSSUI/Utilities/DropdownSelection","VSSUI/Utilities/Filter"],(function(e,t,s,a,i,n,o,r,l,c,d,p,m,u,h,g,f,S,v,y,b,_,C,T,I,x,k,w,E,P,D,L,A,F,N,O,U,W){var R,M,H,j,K,z,B,V,G,Z,q,Y,$,J,Q,X,ee,te,se,ae,ie,ne,oe,re,le,ce,de,pe,me,ue,he,ge,fe,Se,ve,ye,be,_e,Ce,Te,Ie,xe,ke,we,Ee,Pe,De,Le,Ae,Fe,Ne,Oe,Ue,We,Re;R=t[Re="Resources"]={},t[Re].AgeText="Created",t[Re].NameText="Name",t[Re].StatusText="Status",t[Re].ConditionsText="Conditions",t[Re].ImageText="Image",t[Re].PodsDetailsText="Pod",t[Re].StrategyText="Strategy",t[Re].ReplicasCountText="Pods #",t[Re].DeploymentsDetailsText="Deployments",t[Re].ClusterIPText="Cluster IP",t[Re].ExternalIPText="External IP",t[Re].TypeText="Type",t[Re].ReplicaSetText="ReplicaSet",t[Re].PackageText="Package",t[Re].PipelineText="Pipeline",t[Re].PodsText="Pods",t[Re].PodText="Pod",t[Re].PortText="Port",t[Re].NamespaceLabelText="Namespace:",t[Re].NamespaceWithValueText="Namespace: {0}",t[Re].PivotServiceText="Services",t[Re].PivotWorkloadsText="Workloads",t[Re].PodIP="IP",t[Re].Created="Created",t[Re].Deployment="Deployment: {0}",t[Re].ReplicaSet="ReplicaSet: {0}",t[Re].ServiceCreatedWithPipelineText="Created {0} by {1}",t[Re].RunInformationForWorkload="{0} on {1}",t[Re].OverviewText="Overview",t[Re].LabelsText="Labels",t[Re].SelectorText="Selector",t[Re].SessionAffinityText="Session affinity",t[Re].AssociatedPodsText="Associated pods",t[Re].DaemonSetText="DaemonSet",t[Re].StatefulSetText="StatefulSet",t[Re].DeploymentText="Deployment",t[Re].LearnMoreText="Learn more",t[Re].NoPodsForSvcText="This service currently does not map to any pods",t[Re].SucceededText="Succeeded",t[Re].InProgressText="InProgress",t[Re].FindByNameText="Filter by {0} name",t[Re].KindText="Kind",t[Re].NoItemsText="No Items found",t[Re].PodDetailsHeader="Pod details",t[Re].JobText="Job",t[Re].AnnotationsText="Annotations",t[Re].RestartPolicyText="Restart policy",t[Re].QoSClassText="QoS class",t[Re].NodeText="Node",t[Re].PodsListHeaderText="Pods",t[Re].LogsText="Logs",t[Re].YamlText="YAML",t[Re].NoPodsFoundText="No pods are detected in this Kubernetes workload",t[Re].LoadingText="Loading...",t[Re].OtherWorkloadsText="Other workloads",t[Re].CreatedAgo="Created {0}",t[Re].ServiceDetails="Service details",t[Re].WorkloadText="Workload",t[Re].WorkloadDetails="{0} details",t[Re].PodStatusPending="Pending",t[Re].MoreImagesText="{0} and {1} more",t[Re].LearnMoreKubeResourceText="Learn more about Kubernetes resource",t[Re].DeployKubeResourceText="Use this resource to deploy workloads and services",t[Re].StartUsingKubeResourceText="Start using resource!",t[Re].KubernetesAuthValidationTitleText="Validate to connect",t[Re].KubernetesAuthValidationHelpText="The service account mapped to this resource doesn't have the necessary permissions to read workloads and services.",t[Re].KubernetesResourceDeletedAltText="Unable to connect to the cluster and namespace",t[Re].KubernetesResourceDeletedHelpText="Unable to connect to the cluster and namespace chosen for this resource. ",t[Re].StartingUsingServiceText="You can also deploy services and track them in here",t[Re].DeployServices="Deploy services!",t[Re].DeployWorkloads="Deploy workloads!",t[Re].WorkloadsZeroDataText="You can also deploy all kinds of workloads like deployment, replicaset, daemonset etc., and track them in here",t[Re].NoPodsForSvcLinkText="Learn more about mapping a service",t[Re].NoPodsText="No pods",t[Re].ServiceText="service",t[Re].NoResultsFoundText="No results found",t[Re].DigestText="Digest",t[Re].TarIdText="Tar ID",t[Re].ImageTypeText="Image type",t[Re].MediaTypeText="Media type",t[Re].RegistryText="Registry",t[Re].ImageSizeText="Image size",t[Re].ImageDetailsHeaderText="Image details",t[Re].AllPodsRunningText="All pods are running",t[Re].PodsNotReadyText="{0} pods are not ready",t[Re].PodNotReadyText="1 pod is not ready",t[Re].LayersText="Layers",t[Re].CommandText="Command",t[Re].SizeText="Size",t[Re].SummaryHeaderSubTextFormat="{0} (cluster)",t[Re].TagsText="Tags",t[Re].LoadingPodsSpinnerLabel="Loading associated pods...",t[Re].LoadingServicesSpinnerLabel="Loading services...",t[Re].CopyExternalIp="Copy External IP to clipboard",t[Re].CopiedExternalIp="Copied!",t[Re].ImageDetailsUnavailableText="Image details available only for images built in Azure Pipelines",t[Re].PodDetailsSubheader="Pods in {0}",t[Re].ClusterLinkHelpText="Navigation to cluster details is only available for the Azure provider",t[Re].ImageDetailsExportText="Export image details",t[Re].ImageDetailsExportTooltip="Download details associated with this image to a local file.",function(e){M=t[e]={},function(e){e.zeroData="zeroData",e.zeroResults="zeroResults",e.zeroWorkloads="zeroWorkloads",e.resourceDeleted="resourceDeleted",e.resourceAccessDenied="resourceAccessDenied"}(t[e].KubeImage||(t[e].KubeImage={})),function(e){e.Pending="Pending",e.Running="Running",e.Succeeded="Succeeded",e.Failed="Failed",e.Unknown="Unknown",e.Completed="Completed",e.CrashLoopBackOff="CrashLoopBackOff"}(t[e].PodPhase||(t[e].PodPhase={})),function(e){e.Deleted="Deleted",e.AccessDenied="AccessDenied",e.None="None",e.NotInitialized="NotInitialized"}(t[e].ResourceErrorType||(t[e].ResourceErrorType={}))}("ContractsContracts"),function(e){var s;H=t[e]={},function(e){e[e.Pods=1]="Pods",e[e.Deployments=2]="Deployments",e[e.Services=4]="Services",e[e.ReplicaSets=8]="ReplicaSets",e[e.DaemonSets=16]="DaemonSets",e[e.StatefulSets=32]="StatefulSets"}(s=t[e].KubeResourceType||(t[e].KubeResourceType={}));t[e].KubeServiceBase=class{getPods(e){return this.fetch(s.Pods,e)}getDeployments(){return this.fetch(s.Deployments)}getServices(){return this.fetch(s.Services)}getReplicaSets(){return this.fetch(s.ReplicaSets)}getDaemonSets(){return this.fetch(s.DaemonSets)}getStatefulSets(){return this.fetch(s.StatefulSets)}}}("ContractsKubeServiceBase"),function(e){j=t[e]={};class s{static setReaderComponent(e){e&&(s._readerComponentFunc=e)}static getReaderComponent(e){return s._readerComponentFunc?s._readerComponentFunc(e):null}}t[e].getContentReaderComponent=function(e){return s.getReaderComponent(e)},t[e].setContentReaderComponent=function(e){s.setReaderComponent(e)}}("WebUICommonKubeConsumer"),function(e){K=t[e]={},function(e){e.DeploymentsFetchedEvent="DEPLOYMENTS_FETCHED_EVENT",e.ReplicaSetsFetchedEvent="REPLICA_SETS_FETCHED_EVENT",e.DaemonSetsFetchedEvent="DAEMON_SETS_FETCHED_EVENT",e.StatefulSetsFetchedEvent="STATEFUL_SETS_FETCHED_EVENT",e.WorkloadPodsFetchedEvent="WORKLOAD_PODS_FETCHED_EVENT",e.WorkloadsFoundEvent="NON_ZERO_WORKLOADS_FOUND_EVENT",e.ZeroDeploymentsFoundEvent="ZERO_DEPLOYMENTS_FOUND_EVENT"}(t[e].WorkloadsEvents||(t[e].WorkloadsEvents={})),function(e){e.ServicesFetchedEvent="SERVICES_FETCHED_EVENT",e.ServicePodsFetchedEvent="SERVICE_PODS_FETCHED_EVENT",e.ServicesFoundEvent="NON_ZERO_SERVICES_FOUND_EVENT"}(t[e].ServicesEvents||(t[e].ServicesEvents={})),function(e){e.PodsFetchedEvent="ALL_PODS_FETCHED_EVENT",e.LabelledPodsFetchedEvent="LABELLED_PODS_FETCHED_EVENT"}(t[e].PodsEvents||(t[e].PodsEvents={})),function(e){e.HasImageDetailsEvent="HAS_IMAGE_DETAILS_EVENT",e.SetImageDetailsEvent="SET_IMAGE_DETAILS_EVENT"}(t[e].ImageDetailsEvents||(t[e].ImageDetailsEvents={})),function(e){e.WorkloadsLink="https://go.microsoft.com/fwlink/?linkid=2083857",e.LinkToPodsUsingLabelsLink="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/",e.ServicesLink="https://go.microsoft.com/fwlink/?linkid=2083858",e.ResourceDeletedLink="https://go.microsoft.com/fwlink/?linkid=2083857",e.ResourceAccessDeniedLink="https://go.microsoft.com/fwlink/?linkid=2083857"}(t[e].HyperLinks||(t[e].HyperLinks={})),function(e){e.Services="KubeSummary.ServicesList",e.PodsList="KubeSummary.PodsList",e.ImageDetails="KubeSummary.ImageDetails",e.PodsDetails="KubeSummary.PodsDetails",e.ServiceDetails="KubeSummary.ServiceDetails",e.PodOverview="KubeSummary.PodOverview",e.PodLogs="KubeSummary.PodLogs",e.PodYaml="KubeSummary.PodYaml",e.WorkloadDetails="KubeSummary.WorkloadDetails",e.Workloads="KubeSummary.Workloads"}(t[e].Scenarios||(t[e].Scenarios={}))}("WebUIConstants"),function(e){z=t[e]={};class s{constructor(){if(!s._allowPrivateInstantiation)throw new Error("Error: Instantiating an object of Singleton class is not allowed. Please use the instance method")}static getInstance(e){return this._instance||(s._allowPrivateInstantiation=!0,this._instance=new e,s._allowPrivateInstantiation=!1),this._instance}static dispose(){this._instance=null}}t[e].Singleton=s,s._allowPrivateInstantiation=!1,s._instance=null;class a{static create(e,t){return this.createObject(e,t)}static createObject(e,t){if(t)return new e(t);{let s=Object.create(e.prototype);try{const e=s.constructor(t);return e||s}catch(e){return new s.constructor(t)}}}}t[e].Factory=a;class i{static getKey(){throw new Error("This method needs to be implemented in derived classes")}}t[e].KeyMonikerProvider=i;t[e].Initializable=class extends i{};class n extends s{constructor(){super(),this._instanceMap={}}dispose(){Object.keys(this._instanceMap).forEach((e=>{this._deleteInstance(e)})),this._instanceMap={}}getAllObjects(e){let t=e.getKey().toLowerCase(),s=[];for(let e in this._instanceMap)this._instanceMap.hasOwnProperty(e)&&0===e.indexOf(t)&&s.push(this._instanceMap[e]);return s}getObject(e,t){if(e.prototype.constructor.length>0){let s=this._getInstanceKey(e,t),a=this._instanceMap[s];if(a)return a;throw new Error("Object requested is not created yet. Ensure that the object is created before it is queried. "+e)}return this.createObject(e,t,null)}removeObject(e,t){let s=this._getInstanceKey(e,t);this._deleteInstance(s)}createObject(e,t,s){let i=this._getInstanceKey(e,t),n=this._instanceMap[i];return n||(n=a.createObject(e,null),this.onObjectCreated(n,t),this._instanceMap[i]=n),n}_getInstanceKey(e,t){let s=e.getKey();return t&&(s=s+"."+t),s.toLowerCase()}_deleteInstance(e){let t=this._instanceMap[e];if(t){let s=t.__dispose;s&&"function"==typeof s&&t.__dispose(),delete this._instanceMap[e]}}}t[e].BaseManager=n;t[e].Manager=class extends n{onObjectCreated(e,t){e.initialize(t)}}}("WebUIFluxCommonFactory"),function(e){B=t[e]={};class s extends z.Initializable{}t[e].ActionCreatorBase=s;class a extends z.Initializable{}t[e].ActionsHubBase=a;class i{constructor(){this.listeners=[]}invoke(e){if(i.executing)throw new Error("Cannot invoke an action from inside another action.");i.executing=!0;try{this.listeners.forEach((t=>{t(e)}))}finally{i.executing=!1}}addListener(e){this.listeners.push(e)}removeListener(e){const t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}}t[e].Action=i,i.executing=!1}("WebUIFluxCommonActions"),function(e){V=t[e]={};class s extends z.Manager{static GetActionCreator(e,t){return super.getInstance(s).getObject(e,t)}static CreateActionCreator(e,t,a){return super.getInstance(s).createObject(e,t,a)}static DeleteActionCreator(e,t){super.getInstance(s).removeObject(e,t)}static dispose(){return super.getInstance(s).dispose()}}t[e].ActionsCreatorManager=s}("WebUIFluxCommonActionsCreatorManager"),function(e){G=t[e]={};class s extends z.Manager{static GetActionsHub(e,t){return super.getInstance(s).getObject(e,t)}static GetAllActionsHub(e){return super.getInstance(s).getAllObjects(e)}static dispose(){return super.getInstance(s).dispose()}}t[e].ActionsHubManager=s}("WebUIFluxCommonActionsHubManager"),function(e){Z=t[e]={};t[e].StoreBase=class{constructor(e){this.changedEvent=e||"DefaultChangeEvent",this.handlers={}}static getKey(){throw new Error("This method needs to be implemented in derived classes")}initialize(e){this._instanceId=e||""}getInstanceId(){return this._instanceId}getState(){return{}}addChangedListener(e){this.addListener(this.changedEvent,e)}removeChangedListener(e){this.removeListener(this.changedEvent,e)}addListener(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)}removeListener(e,t){if(this.handlers[e])for(let s=this.handlers[e].length-1;s>=0;s--)this.handlers[e][s]===t&&this.handlers[e].splice(s,1)}emitChanged(){this.emit(this.changedEvent,this)}emit(e,t){if(this.handlers[e])for(const s of this.handlers[e])s(t)}_dispose(){this.disposeInternal(),this._instanceId=null}}}("WebUIFluxCommonStore"),function(e){q=t[e]={};class s extends z.Manager{static GetStore(e,t){return super.getInstance(s).getObject(e,t)}static CreateStore(e,t,a){return super.getInstance(s).createObject(e,t,a)}static DeleteStore(e,t){super.getInstance(s).removeObject(e,t)}static dispose(){return super.getInstance(s).dispose()}}t[e].StoreManager=s}("WebUIFluxCommonStoreManager"),function(e){Y=t[e]={};class s extends B.ActionsHubBase{static getKey(){return"image-details-actions"}initialize(){this._setHasImageDetails=new B.Action,this._setImageDetails=new B.Action}get setHasImageDetails(){return this._setHasImageDetails}get setImageDetails(){return this._setImageDetails}}t[e].ImageDetailsActions=s}("WebUIImageDetailsImageDetailsActions"),function(e){$=t[e]={};class s extends Z.StoreBase{constructor(){super(...arguments),this._setHasImageDetailsData=e=>{e&&(this._hasImageDetails=e,this.emit(K.ImageDetailsEvents.HasImageDetailsEvent,this))},this._setImageDetailsData=e=>{e&&e.imageName&&(this._imageDetails[e.imageName]=e,this.emit(K.ImageDetailsEvents.SetImageDetailsEvent,this))},this._hasImageDetails={},this._imageDetails={}}static getKey(){return"image-details-store"}initialize(e){super.initialize(e),this._actions=G.ActionsHubManager.GetActionsHub(Y.ImageDetailsActions),this._actions.setHasImageDetails.addListener(this._setHasImageDetailsData),this._actions.setImageDetails.addListener(this._setImageDetailsData)}disposeInternal(){this._actions.setHasImageDetails.removeListener(this._setHasImageDetailsData),this._actions.setImageDetails.removeListener(this._setImageDetailsData)}hasImageDetails(e){return this._hasImageDetails[e]}getImageDetails(e){return this._imageDetails[e]}}t[e].ImageDetailsStore=s}("WebUIImageDetailsImageDetailsStore"),function(e){J=t[e]={};class s{markTimeToInteractive(e,t){console.log(`Scenario ready for interaction ${e}, properties:${JSON.stringify(t||{})}`)}onClickTelemetry(e,t){console.log(`Item clicked  ${e}, properties:${JSON.stringify(t||{})}`)}scenarioStart(e,t){console.log(`Scenario started ${e}, properties:${JSON.stringify(t||{})}`)}scenarioEnd(e,t){console.log(`Scenario completed ${e}, properties:${JSON.stringify(t||{})}`)}}class a{static setImageLocation(e){a._imageLocation=e}static getImageLocation(e){return a._imageLocation?a._imageLocation(e):""}static setTelemetryService(e){e&&(a._telemetryService=e)}static getTelemetryService(){return a._telemetryService||(a._telemetryService=new s),a._telemetryService}static setImageService(e){a._imageService=e}static getImageService(){return a._imageService}static setKubeService(e){a._kubeService=e}static getKubeService(){return a._kubeService}}function i(){return a.getTelemetryService()}t[e].KubeFactory=a,a.markTTI=(e,t)=>{i().markTimeToInteractive(e,t)},t[e].getTelemetryService=i}("WebUIKubeFactory"),function(e){Q=t[e]={};class s extends B.ActionCreatorBase{static getKey(){return"image-details-actionscreator"}initialize(e){this._actions=G.ActionsHubManager.GetActionsHub(Y.ImageDetailsActions),this._imageDetailsStore=q.StoreManager.GetStore($.ImageDetailsStore)}setHasImageDetails(e,t){e&&e.hasImageDetails(t).then((e=>{e&&e.hasOwnProperty("hasImageDetails")&&this._actions.setHasImageDetails.invoke(e.hasImageDetails)}))}getImageDetails(e,t){let s=this._imageDetailsStore.getImageDetails(e);if(s)t(s);else{const s=J.KubeFactory.getImageService();s&&s.getImageDetails(e).then((e=>{e&&(this._actions.setImageDetails.invoke(e),t(e))}))}}}t[e].ImageDetailsActionsCreator=s}("WebUIImageDetailsImageDetailsActionsCreator"),function(e){X=t[e]={};class s extends B.ActionsHubBase{static getKey(){return"pods-actions"}initialize(){this._podsFetched=new B.Action,this._podsFetchedByLabel=new B.Action}get podsFetched(){return this._podsFetched}get podsFetchedByLabel(){return this._podsFetchedByLabel}}t[e].PodsActions=s}("WebUIPodsPodsActions"),function(e){ee=t[e]={};class s extends B.ActionCreatorBase{static getKey(){return"pods-actionscreator"}initialize(e){this._actions=G.ActionsHubManager.GetActionsHub(X.PodsActions)}getPods(e,t,s=!1){if(s&&!t){const e={apiVersion:"",items:[],kind:"",metadata:{}};setTimeout((()=>this._actions.podsFetchedByLabel.invoke({podsList:e,labelSelector:"",isLoading:!1})))}else e&&e.getPods(t||void 0).then((e=>{this._extendPodMetadataInList(e),t?this._actions.podsFetchedByLabel.invoke({podsList:e,labelSelector:t,isLoading:!1}):this._actions.podsFetched.invoke({podsList:e,isLoading:!1})}))}_extendPodMetadataInList(e){const t=(e&&e.items||[]).length;for(let s=0;s<t;s++){const t=e.items[s];e.items[s]=Object.assign({apiVersion:t.apiVersion||e.apiVersion,kind:t.kind||"Pod"},t)}}}t[e].PodsActionsCreator=s}("WebUIPodsPodsActionsCreator"),function(e){te=t[e]={};class s extends Z.StoreBase{constructor(){super(...arguments),this._setPodsList=e=>{this._state.podsList=e.podsList,this._state.isLoading=e.isLoading,this.emit(K.PodsEvents.PodsFetchedEvent,this)},this._setPodsListByLabel=e=>{this._state.podListByLabel[e.labelSelector]=e.podsList,this._state.isLoading=e.isLoading,this.emit(K.PodsEvents.LabelledPodsFetchedEvent,this)}}static getKey(){return"pods-store"}initialize(e){super.initialize(e),this._state={podsList:void 0,podListByLabel:{},isLoading:!0},this._actions=G.ActionsHubManager.GetActionsHub(X.PodsActions),this._actions.podsFetched.addListener(this._setPodsList),this._actions.podsFetchedByLabel.addListener(this._setPodsListByLabel)}disposeInternal(){this._actions.podsFetched.removeListener(this._setPodsList),this._actions.podsFetchedByLabel.removeListener(this._setPodsListByLabel)}getState(){return this._state}}t[e].PodsStore=s}("WebUIPodsPodsStore"),function(e){se=t[e]={};class s extends B.ActionsHubBase{static getKey(){return"kubernetes-selection-actions"}initialize(){this._selectItem=new B.Action}get selectItem(){return this._selectItem}}t[e].SelectionActions=s}("WebUISelectionSelectionActions"),function(e){ae=t[e]={};class i extends B.ActionCreatorBase{static getKey(){return"selection-actionscreator"}initialize(e){this._actions=G.ActionsHubManager.GetActionsHub(se.SelectionActions)}selectItem(e){const t=(0,s.createBrowserHistory)();let i=Object.assign({},a.parse(t.location.search));i.type=e.selectedItemType,i.uid=e.itemUID,e.selectedItemType&&delete i.view,e.properties&&Object.keys(e.properties).forEach((t=>{const s=e.properties[t];null!=s&&"object"!=typeof s&&"function"!=typeof s&&""!==s?i[t]=s:delete i[t]})),Object.keys(i).forEach((e=>{const t=i[e];null!=t&&""!==t||delete i[e]})),t.push({pathname:t.location.pathname,search:a.stringify(i)}),this._actions.selectItem.invoke(e)}}t[e].SelectionActionsCreator=i}("WebUISelectionSelectionActionCreator"),function(e){ie=t[e]={};class s extends Z.StoreBase{constructor(){super(...arguments),this._select=e=>{this._state.selectedItem=e.item,this._state.showSelectedItem=e.showSelectedItem,this._state.selectedItemType=e.selectedItemType,this._state.itemUID=e.itemUID,this._state.properties=e.properties,this.emitChanged()}}static getKey(){return"kubernetes-selection-store"}initialize(e){super.initialize(e),this._state={selectedItem:void 0,showSelectedItem:!1,selectedItemType:"",itemUID:""},this._actions=G.ActionsHubManager.GetActionsHub(se.SelectionActions),this._actions.selectItem.addListener(this._select)}disposeInternal(){this._actions.selectItem.removeListener(this._select)}getState(){return this._state}}t[e].SelectionStore=s}("WebUISelectionSelectionStore"),function(e){ne=t[e]={};class s extends B.ActionsHubBase{static getKey(){return"services-actions"}initialize(){this._servicesFetched=new B.Action}get servicesFetched(){return this._servicesFetched}}t[e].ServicesActions=s}("WebUIServicesServicesActions"),function(e){oe=t[e]={};class s extends B.ActionCreatorBase{static getKey(){return"services-actionscreator"}initialize(e){this._actions=G.ActionsHubManager.GetActionsHub(ne.ServicesActions)}getServices(e){e.getServices().then((e=>{this._actions.servicesFetched.invoke(e)}))}}t[e].ServicesActionsCreator=s}("WebUIServicesServicesActionsCreator"),function(e){re=t[e]={};class s extends Z.StoreBase{constructor(){super(...arguments),this._servicesFetched=e=>{this._state.serviceList=e,this._state.isLoading=!1,this.emit(K.ServicesEvents.ServicesFetchedEvent,this),this._state.serviceList&&this._state.serviceList.items&&this._state.serviceList.items.length>0&&this.emit(K.ServicesEvents.ServicesFoundEvent,this)},this._setAssociatedPodsList=e=>{this._state.podsList=e.podsList&&e.podsList.items,this._state.arePodsLoading=e.isLoading,this.emit(K.ServicesEvents.ServicePodsFetchedEvent,this)}}static getKey(){return"services-store"}initialize(e){super.initialize(e),this._state={serviceList:void 0,podsList:[],isLoading:!0,arePodsLoading:!0},this._servicesActions=G.ActionsHubManager.GetActionsHub(ne.ServicesActions),this._podsActions=G.ActionsHubManager.GetActionsHub(X.PodsActions),this._servicesActions.servicesFetched.addListener(this._servicesFetched),this._podsActions.podsFetchedByLabel.addListener(this._setAssociatedPodsList)}disposeInternal(){this._servicesActions.servicesFetched.removeListener(this._servicesFetched),this._podsActions.podsFetchedByLabel.removeListener(this._setAssociatedPodsList)}getState(){return this._state}getServicesSize(){return this._state.serviceList&&this._state.serviceList.items?this._state.serviceList.items.length:0}}t[e].ServicesStore=s}("WebUIServicesServicesStore"),function(e){le=t[e]={};const s="azure-pipelines/pipeline",a="azure-pipelines/execution",r="azure-pipelines/run",l=new RegExp(/\:\/\/(.+?)\@/),c=new RegExp(/\@sha256\:(.+)/);class d{static isOwnerMatched(e,t){return e.ownerReferences&&e.ownerReferences.length>0&&e.ownerReferences.some((e=>e.uid.toLowerCase()===t))}static getUILabelModelArray(e){let t=new i.ObservableArray;return e&&Object.keys(e).forEach((s=>{t.push({content:(0,n.format)("{0}={1}",s,e[s])})})),t}static getPillTags(e){let t=[];return e&&Object.keys(e).forEach((s=>{const a=(e[s]||"").trim().replace(/^("|')+/,"").replace(/("|')+$/,"");t.push((0,n.format)("{0}={1}",s,a))})),t}static getPipelineText(e){let t="",i="";return(e?Object.keys(e):[]).find((n=>{const o=n.toLowerCase();return t||o!==s?i||o!==a&&o!==r||(i=e[n]):t=e[n],!!t&&!!i})),t&&i?(0,n.localeFormat)("{0} / {1}",t,i):""}static getPipelineDetails(e){if(!e)return{};const t=e[r]||e[a],i=e["azure-pipelines/runuri"]||e["azure-pipelines/executionuri"];return{jobName:e["azure-pipelines/jobName"],pipelineName:e[s],runName:t,runUrl:i}}static getPodsStatusProps(e,t){let s,a="",i="";if(null!=t&&t>0){const r=null==e||e<=0?0:e,l=t-r;s=r<t?o.Statuses.Failed:o.Statuses.Success,a=(0,n.localeFormat)("{0}/{1}",r,t),i=r===t?R.AllPodsRunningText:1===l?R.PodNotReadyText:(0,n.localeFormat)(R.PodsNotReadyText,l)}return{statusProps:s,pods:a,podsTooltip:i}}static generateEqualsConditionLabelSelector(e){let t="";if(e){const s=Object.keys(e);s.forEach(((a,i)=>{t=t.concat((0,n.format)("{0}={1}",a,e[a])),i<s.length-1&&(t=t.concat(","))}))}return t}static generatePodStatusProps(e){let t=o.Statuses.Failed,s=e.message||e.phase;e.phase!==M.PodPhase.Running&&e.phase!==M.PodPhase.Succeeded||(t=o.Statuses.Success);const a=(e.containerStatuses||[]).find((e=>!e.ready&&!e.state.running));if(a){const e=a.state;t=o.Statuses.Failed,s=e.waiting&&(e.waiting.message||e.waiting.reason)||e.terminated&&(e.terminated.message||e.terminated.reason)}else{const a=e=>!("string"!=typeof e.status||"true"===e.status.toLowerCase()||!e.message&&!e.reason),i=(e.conditions||[]).find((e=>a(e)));i&&(t=o.Statuses.Failed,s=i.message||i.reason)}return{statusProps:t,tooltip:s}}static filterByName(e,t){return!t||e.includes(t)}static getImageText(e){let t=[],s="",a="";return e&&e.containers&&e.containers.length>0&&(e.containers.forEach((e=>{t.indexOf(e.image)<0&&t.push(d.appendDefaultTagToImageName(e.image))})),t.length>1?(s=(0,n.localeFormat)(R.MoreImagesText,t[0],t.length-1),a=t.join(", ")):s=t[0]),{imageText:s,imageTooltipText:a}}static getFirstImageName(e){return e&&e.containers&&e.containers.length>0?d.appendDefaultTagToImageName(e.containers[0].image):""}static getFirstContainerName(e){return e&&e.containers&&e.containers.length>0?e.containers[0].name:""}static getImageIdsForPods(e){let t=[];for(const s of e){const e=s.status;if(e.containerStatuses&&e.containerStatuses.length>0)for(const s of e.containerStatuses){let e=d.getImageResourceUrl(s.imageID);e&&(0==t.length||t.indexOf(e)<0)&&t.push(e)}}return t}static getImageIdForWorkload(e,t,s){const a=t=>{for(const s of t){const t=s.status;if(t.containerStatuses&&t.containerStatuses.length>0){const s=t.containerStatuses.find((t=>t.name.toLowerCase()===e.toLowerCase()));if(s&&s.imageID)return d.getImageResourceUrl(s.imageID)}}return""};if(s&&t.length>0){return a(t.filter((e=>e.metadata&&d.isOwnerMatched(e.metadata,s.toLowerCase()))))}return a(t)}static getImageResourceUrlParameter(e,t){const s=e.match(t);return s&&s.length>=1?s[1]:""}static getDigestFromImageResourceUrl(e){return e?d.getImageResourceUrlParameter(e,c):""}static getImageResourceUrl(e){let t=e.indexOf("://"),s=t>=0?e.substr(t+3):e;const a=d.getDigestFromImageResourceUrl(e);let i=s.match(/^(?:([^\/]+)\/)?(?:([^\/]+)\/)?([^@:\/]+)(?:[@:](.+))?$/);if(!i)return"";let o=i[1],r=i[2],l=i[3];return r||!o||/[:.]/.test(o)||(r=o,o="docker.io"),r||o||(o="docker.io",r="library"),o=o?o+"/":"",r=r?r+"/":"",(0,n.format)("https://{0}{1}{2}{3}{4}",o,r,l,"@sha256:",a)}static extractDisplayImageName(e){return d.getImageResourceUrlParameter(e,l)}static appendDefaultTagToImageName(e){return/:/.test(e)||(e=(0,n.format)("{0}:latest",e)),e}static getItemTypeKeyFromKind(e){switch(e){case"ReplicaSet":return"replica-set";case"DaemonSet":return"daemon-set";case"StatefulSet":return"stateful-set";case"Service":return"service-item";case"Pod":return"orphan-pod";default:return""}}static getKindFromItemTypeKey(e){switch(e){case"daemon-set":return"DaemonSet";case"replica-set":return"ReplicaSet";case"stateful-set":return"StatefulSet";case"orphan-pod":return"Pod";case"service-item":return"Service";default:return""}}static copyToClipboard(e){if(window.clipboardData)return void window.clipboardData.setData("text",e);const t=t=>{const s=t.clipboardData;s&&s.setData("text/plain",e),t.preventDefault()};document.addEventListener("copy",t),document.execCommand("copy"),document.removeEventListener("copy",t)}}t[e].Utils=d}("WebUIUtils"),function(e){function s(e){if(e.spec&&e.spec.ports&&e.spec.ports.length>0){return e.spec.ports.map((e=>function(e){const t=e.nodePort?":"+e.nodePort:"";return(0,n.localeFormat)("{0}{1}/{2}",e.port,t,e.protocol)}(e))).join(", ")}return""}function a(e){return e.status&&e.status.loadBalancer&&e.status.loadBalancer.ingress&&e.status.loadBalancer.ingress.length>0&&e.status.loadBalancer.ingress[0].ip||""}ce=t[e]={},t[e].getServiceItems=function(e){let t=[];return e.forEach((e=>{t.push({package:e.metadata.name,type:e.spec.type,clusterIP:e.spec.clusterIP||"-",externalIP:a(e),port:s(e)||"",creationTimestamp:e.metadata.creationTimestamp||new Date,uid:e.metadata.uid.toLowerCase(),pipeline:le.Utils.getPipelineText(e.metadata.annotations),service:e,kind:e.kind||"Service"})})),t}}("WebUIServicesServiceUtils"),function(e){de=t[e]={};class s extends B.ActionsHubBase{static getKey(){return"workloads-actions"}initialize(){this._deploymentsFetched=new B.Action,this._replicaSetsFetched=new B.Action,this._daemonSetsFetched=new B.Action,this._statefulSetsFetched=new B.Action,this._podsFetched=new B.Action}get deploymentsFetched(){return this._deploymentsFetched}get replicaSetsFetched(){return this._replicaSetsFetched}get daemonSetsFetched(){return this._daemonSetsFetched}get statefulSetsFetched(){return this._statefulSetsFetched}get podsFetched(){return this._podsFetched}}t[e].WorkloadsActions=s}("WebUIWorkloadsWorkloadsActions"),function(e){pe=t[e]={};class s extends B.ActionCreatorBase{static getKey(){return"workloads-actionscreator"}initialize(e){this._actions=G.ActionsHubManager.GetActionsHub(de.WorkloadsActions)}getDeployments(e){e.getDeployments().then((e=>{this._actions.deploymentsFetched.invoke(e)}))}getReplicaSets(e){e.getReplicaSets().then((e=>{this._actions.replicaSetsFetched.invoke(e)}))}getDaemonSets(e){e.getDaemonSets().then((e=>{this._actions.daemonSetsFetched.invoke(e)}))}getStatefulSets(e){e.getStatefulSets().then((e=>{this._actions.statefulSetsFetched.invoke(e)}))}getPods(e){e.getPods().then((e=>{this._actions.podsFetched.invoke(e)}))}}t[e].WorkloadsActionsCreator=s}("WebUIWorkloadsWorkloadsActionsCreator"),function(e){me=t[e]={};class s extends Z.StoreBase{constructor(){super(...arguments),this._setDeploymentsList=e=>{this._state.deploymentList=e;const t=e&&e.items||[];for(const e of t)if(e&&e.metadata.namespace){this._state.deploymentNamespace=e.metadata.namespace;break}this.emit(K.WorkloadsEvents.DeploymentsFetchedEvent,this),this._state.deploymentList&&this._state.deploymentList.items&&this._state.deploymentList.items.length>0?this.emit(K.WorkloadsEvents.WorkloadsFoundEvent,this):this.emit(K.WorkloadsEvents.ZeroDeploymentsFoundEvent,this)},this._setReplicaSetsList=e=>{this._state.replicaSetList=e,this.emit(K.WorkloadsEvents.ReplicaSetsFetchedEvent,this),this._state.replicaSetList&&this._state.replicaSetList.items&&this._state.replicaSetList.items.length>0&&this.emit(K.WorkloadsEvents.WorkloadsFoundEvent,this)},this._setDaemonSetsList=e=>{this._state.daemonSetList=e,this.emit(K.WorkloadsEvents.DaemonSetsFetchedEvent,this),this._state.daemonSetList&&this._state.daemonSetList.items&&this._state.daemonSetList.items.length>0&&this.emit(K.WorkloadsEvents.WorkloadsFoundEvent,this)},this._setStatefulsetsList=e=>{this._state.statefulSetList=e,this.emit(K.WorkloadsEvents.StatefulSetsFetchedEvent,this),this._state.statefulSetList&&this._state.statefulSetList.items&&this._state.statefulSetList.items.length>0&&this.emit(K.WorkloadsEvents.WorkloadsFoundEvent,this)},this._setOrphanPodsList=e=>{let t=[];e.podsList&&e.podsList.items&&e.podsList.items.forEach((e=>{e.metadata.ownerReferences||t.push(e)})),this._state.orphanPodsList=t,this.emit(K.WorkloadsEvents.WorkloadPodsFetchedEvent,this),this._state.orphanPodsList&&this._state.orphanPodsList.length>0&&this.emit(K.WorkloadsEvents.WorkloadsFoundEvent,this)}}static getKey(){return"workloads-store"}initialize(e){super.initialize(e),this._state={deploymentNamespace:"",deploymentList:void 0,replicaSetList:void 0,daemonSetList:void 0,statefulSetList:void 0,orphanPodsList:[]},this._workloadActions=G.ActionsHubManager.GetActionsHub(de.WorkloadsActions),this._podsActions=G.ActionsHubManager.GetActionsHub(X.PodsActions),this._workloadActions.deploymentsFetched.addListener(this._setDeploymentsList),this._workloadActions.replicaSetsFetched.addListener(this._setReplicaSetsList),this._workloadActions.daemonSetsFetched.addListener(this._setDaemonSetsList),this._workloadActions.statefulSetsFetched.addListener(this._setStatefulsetsList),this._podsActions.podsFetched.addListener(this._setOrphanPodsList)}disposeInternal(){this._workloadActions.deploymentsFetched.removeListener(this._setDeploymentsList),this._workloadActions.replicaSetsFetched.removeListener(this._setReplicaSetsList),this._workloadActions.daemonSetsFetched.removeListener(this._setDaemonSetsList),this._workloadActions.statefulSetsFetched.removeListener(this._setStatefulsetsList),this._podsActions.podsFetched.removeListener(this._setOrphanPodsList)}getState(){return this._state}getWorkloadSize(){return(this._state.deploymentList?(this._state.deploymentList.items||[]).length:0)+(this._state.replicaSetList?(this._state.replicaSetList.items||[]).length:0)+(this._state.daemonSetList?(this._state.daemonSetList.items||[]).length:0)+(this._state.statefulSetList?(this._state.statefulSetList.items||[]).length:0)+(this._state.orphanPodsList?(this._state.orphanPodsList||[]).length:0)}}t[e].WorkloadsStore=s}("WebUIWorkloadsWorkloadsStore"),function(e){ue=t[e]={};class s extends c.Component{render(){return c.createElement("div",{className:(0,l.css)("kube-status-container",this.props.className)},this.props.toolTipText?c.createElement(r.Tooltip,{text:this.props.toolTipText,overflowOnly:!1,showOnFocus:!0},this._getStatus()):this._getStatus())}_getStatus(){return c.createElement("span",{className:"res-status"},this.props.statusProps&&c.createElement(o.Status,Object.assign({},this.props.statusProps,{size:this.props.statusSize||"16"})),c.createElement("div",{className:"description-padding"},this.props.statusDescription&&c.createElement("span",{className:"kube-status-desc"},this.props.statusDescription),this.props.customDescription))}}t[e].ResourceStatus=s}("WebUICommonResourceStatus"),function(e){he=t[e]={};class s extends c.Component{constructor(){super(...arguments),this._onItemActivated=(e,t)=>{this.props.onItemActivated&&this.props.onItemActivated(e,t,this.props.items[t.index])},this._onItemSelected=(e,t)=>{this.props.onItemSelected&&this.props.onItemSelected(e,t,this.props.items[t.index])}}render(){return c.createElement(p.CustomCard,{className:(0,l.css)("flex-grow","bolt-card-no-vertical-padding",this.props.className||"")},this.props.headingText&&c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,"string"==typeof this.props.headingText?c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},this.props.headingText):c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0,children:this.props.headingText})),this.props.headingDescription&&c.createElement(m.HeaderDescription,{className:"text-ellipsis"},this.props.headingDescription))),c.createElement(p.CardContent,{contentPadding:!1},this.props.items&&this.props.items.length>0&&this._getComponent()))}_getComponent(){const e={className:"kube-list",role:"table",showHeader:!this.props.hideHeaders,showLines:!this.props.hideLines,singleClickActivation:!!this.props.onItemActivated,itemProvider:new g.ArrayItemProvider(this.props.items),ariaLabel:this.props.headingText,columns:this.props.columns,onActivate:this._onItemActivated,onSelect:this._onItemSelected};return c.createElement(h.Table,Object.assign({},e))}}function a(e,t,s,a,i,n){const{columnStyle:o}=s;return c.createElement(h.SimpleTableCell,{className:(0,l.css)(2===o&&"bolt-table-cell-primary",1===o&&"bolt-table-cell-secondary",3===o&&"bolt-table-cell-tertiary"),contentClassName:n||"",columnIndex:t,tableColumn:s,key:t},i&&c.createElement(ue.ResourceStatus,Object.assign({},i)),a)}t[e].KubeCardWithTable=s,t[e].defaultColumnRenderer=function(e,t,s,a=!1){return a?c.createElement("span",{className:(0,l.css)("wrap-text",t||"")},e):c.createElement(r.Tooltip,{text:s||e,overflowOnly:!s},c.createElement("span",{className:(0,l.css)("text-ellipsis",t||"")},e))},t[e].renderTableCell=a,t[e].renderTwoLineColumn=function(e,t,s,a,i,n,o,d){return c.createElement(h.TwoLineTableCell,{className:i,columnIndex:e,tableColumn:t,line1:c.createElement("div",{className:(0,l.css)("kube-list-col-data",n),key:"col-primary-"+e},c.createElement(r.Tooltip,{text:s,overflowOnly:!0},c.createElement("span",{className:"text-ellipsis"},s))),line2:c.createElement("div",{className:(0,l.css)("list-secondary-text",o),key:"col-secondary-"+e},c.createElement(r.Tooltip,{text:a,overflowOnly:!0},c.createElement("span",{className:"text-ellipsis"},a))),iconProps:d?{render:e=>c.createElement(ue.ResourceStatus,Object.assign({},d))}:{},key:"col-"+e})},t[e].renderPodNameWithStatusTableCell=function(e,t,s,i,d,p,m){return i?c.createElement(h.SimpleTableCell,{key:(0,n.format)("row-{0}-col-{1}",e,t),columnIndex:t,tableColumn:s},c.createElement(c.Fragment,null,d&&c.createElement(r.Tooltip,{text:p},c.createElement("div",{className:"flex-row"},c.createElement(o.Status,Object.assign({},d,{ariaLabel:p,className:"icon-large-margin",size:"16"})))),c.createElement(r.Tooltip,{overflowOnly:!0,text:i},c.createElement("div",{className:(0,l.css)("text-ellipsis",m)},i)))):a(0,t,s,null)},t[e].renderPodsStatusTableCell=function(e,t,s,i,n,d,p,m){const h=c.createElement(c.Fragment,null,n&&c.createElement(o.Status,Object.assign({},n,{size:"16"})),c.createElement("div",{className:"k8s-pods-status-count body-m"},i)),g="fontSizeM font-size-m flex-center flex-row text-ellipsis";return a(0,t,s,i?c.createElement(r.Tooltip,{text:d||i||"",overflowOnly:!d},p?c.createElement(u.Link,{className:(0,l.css)(g,"bolt-table-link",m||""),ariaLabel:d,rel:"noopener noreferrer",excludeTabStop:!0,onClick:e=>{p(),e.preventDefault()}},h):c.createElement("span",{className:g},h)):null,void 0,i&&p?"bolt-table-cell-content-with-link":"")},t[e].onPodsColumnClicked=function(e,t,s,a){const i=e.find((e=>le.Utils.generatePodStatusProps(e.status).statusProps===o.Statuses.Failed))||e[0],n="Pod"===s?void 0:{parentUid:t.metadata.uid};a.selectItem({item:i,itemUID:i&&i.metadata.uid||t.metadata.uid,selectedItemType:"Pod"===s?"orphan-pod":"pod-details",showSelectedItem:!0,properties:n})},t[e].renderExternalIpWithCopy=function(e,t,s){return c.createElement("div",{className:"external-ip-cell flex-row flex-center"},c.createElement("div",{className:"external-ip-cell-text"},e||"-"),e&&c.createElement(d.Button,{onClick:t=>{t.preventDefault(),le.Utils.copyToClipboard(e),s&&s(0)},onMouseLeave:()=>s&&s(-1),onBlur:()=>s&&s(-1),tooltipProps:{text:t||R.CopyExternalIp},ariaLabel:t||R.CopyExternalIp,iconProps:{iconName:"Copy"},className:"external-ip-copy-icon kube-text-copy",subtle:!0}))},t[e].renderExternalIpCell=function(e,t,s,i,n){const o=i.externalIP;return a(0,t,s,c.createElement("div",{className:"external-ip-cell flex-row flex-center"},c.createElement("div",{className:"external-ip-cell-text"},o||"-"),o&&c.createElement(d.Button,{onClick:t=>{t.preventDefault(),le.Utils.copyToClipboard(o),n&&n(e)},onMouseLeave:()=>n&&n(-1),onBlur:()=>n&&n(-1),tooltipProps:{text:i.externalIPTooltip||R.CopyExternalIp},ariaLabel:i.externalIPTooltip||R.CopyExternalIp,excludeTabStop:!0,iconProps:{iconName:"Copy"},className:"external-ip-copy-icon kube-text-copy bolt-table-cell-content-reveal",subtle:!0})))}}("WebUICommonKubeCardWithTable"),function(e){var s;ge=t[e]={},function(e){e[e.none=0]="none",e[e.single=1]="single",e[e.multiple=2]="multiple"}(s||(s={})),t[e].NameKey="nameKey",t[e].TypeKey="typeKey";class a extends c.Component{render(){return c.createElement(f.ConditionalChildren,{renderChildren:this.props.filterToggled},c.createElement(v.FilterBar,{filter:this.props.filter,className:this.props.className||""},c.createElement(y.KeywordFilterBarItem,{filterItemKey:t[e].NameKey,className:"keyword-search",placeholder:(0,n.localeFormat)(R.FindByNameText,this.props.keywordPlaceHolder)}),c.createElement(S.DropdownFilterBarItem,{placeholder:this.props.pickListPlaceHolder,showPlaceholderAsLabel:!0,filterItemKey:t[e].TypeKey,selection:this.props.selection,noItemsText:R.NoItemsText,items:this.props.listItems})),this.props.addBottomPadding&&c.createElement("div",{className:"page-content-top"}))}}t[e].KubeFilterBar=a}("WebUICommonKubeFilterBar"),function(e){fe=t[e]={};class s extends c.Component{render(){const e=this.props.showOnlyValues?this.props.items:le.Utils.getPillTags(this.props.items);return c.createElement(_.PillGroup,{className:(0,l.css)(this.props.className,"k8s-tags","flex-row"),overflow:this.props.pillGroupOverflow?this.props.pillGroupOverflow:2},e&&e.map(((e,t)=>c.createElement(b.Pill,{excludeTabStop:!0,key:t,className:"k8s-tag-pill",size:0,contentClassName:this.props.tagContentClassName},e))))}}t[e].Tags=s}("WebUICommonTags"),function(e){Se=t[e]={},t[e].getRunDetailsText=function(e,t,s){let a={};if(t)a=t;else{if(!e)return"";a=le.Utils.getPipelineDetails(e)}if(!s&&!a.jobName)return null;const i=a.jobName&&a.jobName.replace(/^"|"$/g,""),o=s?i?(0,n.localeFormat)(R.ServiceCreatedWithPipelineText,s,i):(0,n.localeFormat)(R.CreatedAgo,s):i,r=a.runName?a.runUrl?c.createElement(u.Link,{className:"run-name-link bolt-table-link",rel:"noopener noreferrer",href:a.runUrl}," ","#"+a.runName," "):"#"+a.runName:void 0;let l=r;if(a.pipelineName){const e=(0,n.localeFormat)(R.RunInformationForWorkload,"{0}",a.pipelineName.replace(/^"|"$/g,"")),t=e.indexOf("{0}");l=c.createElement(c.Fragment,null,e.substring(0,t-1),r,e.substring(t+3))}return c.createElement(c.Fragment,null,o,l?c.createElement(c.Fragment,null,c.createElement("span",{className:"runs-bullet"},"â€¢"),l):void 0)}}("WebUIRunDetails"),function(e){ve=t[e]={};class s extends c.Component{constructor(e){super(e),this._getCardContent=()=>{const e=this._getImageDetailsRowsData(this.props.imageDetails),t="flex-row details-card-row-size";return c.createElement("div",{className:"flex-column details-card-content body-m"},e.map(((e,a)=>c.createElement("div",{className:0===a?(0,l.css)(t,"first-row"):t,key:a},c.createElement("div",{className:"text-ellipsis secondary-text details-card-info-field-size"},e.key),s._renderValueCell(e)))))},(0,J.getTelemetryService)().scenarioStart(K.Scenarios.ImageDetails)}render(){return c.createElement(T.Page,{className:"image-details-content flex flex-grow"},this._getMainHeading(),c.createElement("div",{className:"pod-details-right-content page-content page-content-top"},this._getImageDetails(),this._getImageLayers()))}componentDidMount(){(0,J.getTelemetryService)().scenarioEnd(K.Scenarios.ImageDetails)}_getMainHeading(){const e=this.props.imageDetails;this._displayImageName=le.Utils.extractDisplayImageName(e.imageName),this._labels=this._getImageLabels(e.layerInfo);const t=this._constructPipelineRunUrl(this._labels,e.runId),s={jobName:e.jobName,pipelineName:e.pipelineName,runName:e.pipelineVersion,runUrl:t},a=e.createTime?new Date(e.createTime):new Date,i=I.ago(a,0),n=(0,Se.getRunDetailsText)(void 0,s,i);return c.createElement(m.CustomHeader,{className:"image-details-header"},c.createElement(m.HeaderIcon,{className:"bolt-table-status-icon-large",iconProps:{iconName:"Back",onClick:this.props.onBackButtonClick,className:"image-details-back-button"},titleSize:1}),c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:1},this._displayImageName)),c.createElement(m.HeaderDescription,{className:"text-ellipsis"},n)),c.createElement(d.Button,{className:"image-details-export-button",text:R.ImageDetailsExportText,tooltipProps:{text:R.ImageDetailsExportTooltip},onClick:()=>{this._downloadImageProvenance(e.imageName)}}))}_downloadImageProvenance(e){const t=J.KubeFactory.getImageService();t&&t.getImageProvenances([e]).then((t=>{if(t&&t.length>0){const s=JSON.stringify(t[0]),a=e.concat(".json");this._saveToFile(s,a)}}))}_saveToFile(e,t){const s=new Blob([e],{type:"application/json"});if(window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(s,t);else{const e=document.createElement("a");document.body.appendChild(e),e.href=URL.createObjectURL(s),e.setAttribute("download",t),e.click()}}_getImageDetails(){this.props.imageDetails;return c.createElement(p.CustomCard,{className:"image-details-card k8s-card-padding flex-grow bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},R.ImageDetailsHeaderText)))),c.createElement(p.CardContent,{className:"image-full-details-table",contentPadding:!0},this._getCardContent()))}_getImageDetailsRowsData(e){let t=[];const s=le.Utils.getDigestFromImageResourceUrl(e.imageUri),a=e.imageType||"",i=e.mediaType||"",n=this._getRegistryName(),o=e.imageSize,r=this._labels,l=e.tags||[];return s&&t.push({key:R.DigestText,value:s}),a&&t.push({key:R.ImageTypeText,value:a}),l&&l.length>0&&t.push({key:R.TagsText,value:l}),i&&t.push({key:R.MediaTypeText,value:i}),n&&t.push({key:R.RegistryText,value:n}),o&&t.push({key:R.ImageSizeText,value:o}),r&&r.length>0&&t.push({key:R.LabelsText,value:r}),t}_getImageLayers(){const e=this.props.imageDetails,t=this._sortByCreatedDate(e.layerInfo),a={id:"image-layers-table",role:"table",showHeader:!0,showLines:!0,singleClickActivation:!1,itemProvider:new g.ArrayItemProvider(t),ariaLabel:R.LayersText,columns:s._getImageLayersColumns()};return c.createElement(p.CustomCard,{className:"image-layers-card k8s-card-padding bolt-table-card flex-grow bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"image-layers-card-header text-ellipsis",titleSize:0},R.LayersText)))),c.createElement(p.CardContent,{className:"image-layer-details",contentPadding:!1},c.createElement(h.Table,Object.assign({},a))))}getTime(e){return null!=e?e.getTime():0}_sortByCreatedDate(e){return e.sort(((e,t)=>this.getTime(t.createdOn)-this.getTime(e.createdOn))),e}static _getImageLayersColumns(){let e=[];const t="kube-col-header",a="list-col-content";return e.push({id:"image-layer-directive-col",name:R.CommandText,width:-82,minWidth:300,headerClassName:t,className:a,renderCell:s._renderLayersCommandCell}),e.push({id:"image-layer-size-col",name:R.SizeText,width:new i.ObservableValue(172),headerClassName:t,className:a,renderCell:s._renderLayersSizeCell}),e.push({id:"image-layer-created-col",name:R.AgeText,width:-18,minWidth:150,headerClassName:t,className:a,renderCell:s._renderLayersAgeCell}),e}static _renderLayersCommandCell(e,t,s,a){const i=a.directive||"",o=a.arguments||"";let r="-";i&&o&&(r=(0,n.localeFormat)("{0}: {1}",i,o));const l=(0,he.defaultColumnRenderer)(r,"body-m");return(0,he.renderTableCell)(e,t,s,l)}static _renderLayersSizeCell(e,t,s,a){let i=a.size;i&&"0B"!==i.toUpperCase()||(i="-");const n=(0,he.defaultColumnRenderer)(i,"body-m");return(0,he.renderTableCell)(e,t,s,n)}static _renderLayersAgeCell(e,t,s,a){const i=a.createdOn?new Date(a.createdOn):new Date,n=c.createElement(C.Ago,{className:"body-m",date:i,format:0});return(0,he.renderTableCell)(e,t,s,n)}_getRegistryName(){const e=this._displayImageName.split("/");return e&&e.length>0?e[0]:""}_getImageLabels(e){let t=[];for(const s of e){"label"===s.directive.toLowerCase()&&t.push(s.arguments)}return t}_constructPipelineRunUrl(e,t){let s="",a="",i="",o="";for(const t of e)o=this._getMatchingUrlString(t,"release.releaseweburl=");if(o)return o;for(const t of e)if(s=this._getMatchingUrlString(t,"system.teamfoundationcollectionuri="),s)break;if(!s)return"";for(const t of e)if(a=this._getMatchingUrlString(t,"system.teamproject="),a)break;if(!a)return"";for(const t of e)if(i=this._getMatchingUrlString(t,"build.buildnumber="),i)break;return i?(0,n.format)("{0}{1}/_build?buildId={2}",s,a,t.toString()):""}_getMatchingUrlString(e,t){const s=e.indexOf(t);return s>=0?e.substring(s+t.length,e.length):""}}t[e].ImageDetails=s,s._renderValueCell=e=>{const{key:t,value:s}=e;switch(t){case R.LabelsText:case R.TagsText:return c.createElement("div",{className:"text-ellipsis details-card-value-field-size"},c.createElement(fe.Tags,{items:s,className:"body-s",showOnlyValues:!0}));default:return(0,he.defaultColumnRenderer)(s,"details-card-value-field-size")}}}("WebUIImageDetailsImageDetails"),function(e){ye=t[e]={};class i extends c.Component{constructor(){super(...arguments),this._onSelectionChange=(e,t)=>{this._selectedRow=t.index;const i=(0,s.createBrowserHistory)(),n=a.parse(i.location.search).view;this.props.onSelectionChange&&this.props.onSelectionChange(e,this.props.pods[t.index],"string"==typeof n?n:"")},this._renderListRow=(e,t,s,a)=>{const{statusProps:i,tooltip:n}=le.Utils.generatePodStatusProps(t.status),d=0===e?(0,l.css)("pods-left-panel-row","first-row"):"pods-left-panel-row",p=(0,l.css)("primary-text text-ellipsis body-m",e===this._selectedRow?"font-weight-semibold":"");return c.createElement(x.ListItem,{className:d,key:a||"list-item"+e,index:e,details:s},c.createElement("div",{className:"pod-text-status-container flex-row flex-center h-scroll-hidden"},c.createElement("div",{className:"pod-noshrink flex-noshrink"}),c.createElement("div",{className:"pod-shrink flex-row flex-center flex-shrink"},i&&c.createElement(r.Tooltip,{text:n},c.createElement("div",{className:"flex-row"},c.createElement(o.Status,Object.assign({},i,{ariaLabel:n,className:"icon-large-margin",size:"16"})))),c.createElement(r.Tooltip,{overflowOnly:!0,text:t.metadata.name},c.createElement("div",{className:p},t.metadata.name)))))},this._selection=new x.ListSelection({selectOnFocus:!0}),this._hasSelected=!1,this._selectedRow=-1}render(){return this.props.pods&&this.props.pods.length>0?c.createElement(x.List,{itemProvider:new g.ArrayItemProvider(this.props.pods),onSelect:this._onSelectionChange,selection:this._selection,renderRow:this._renderListRow,width:"100%"}):null}componentDidMount(){this.props.pods&&this.props.pods.length&&this._selectPod()}componentDidUpdate(e){e.pods&&e.pods.length||!this.props.pods||!this.props.pods.length||this._selectPod()}_selectPod(){const e=this.props.selectedPodName;this._hasSelected||(e&&(this._selectedRow=(this.props.pods||[]).findIndex((t=>t.metadata.name===e))),(-1===this._selectedRow||this._selectedRow>=(this.props.pods||[]).length)&&(this._selectedRow=0),this._selection.select(this._selectedRow),this._hasSelected=!0)}}t[e].PodsLeftPanel=i}("WebUIPodsPodsLeftPanel"),function(e){be=t[e]={};class s extends c.Component{render(){const{title:e}=this.props;return c.createElement(m.CustomHeader,{className:this.props.className},this._getHeaderIcon(),c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{titleSize:1},e||""))))}_getHeaderIcon(){let{statusTooltip:e,statusProps:t}=this.props;return e=e||"",t=t?Object.assign(Object.assign({},t),{ariaLabel:e}):t,t&&c.createElement(m.HeaderIcon,{className:"bolt-table-status-icon-large",iconProps:{render:s=>{return c.createElement(r.Tooltip,{text:e,showOnFocus:!0,overflowOnly:!e},c.createElement("div",{className:"flex-row"},(a=t,i=s,c.createElement(o.Status,Object.assign({},a,{className:i,size:"24"})))));var a,i}}})}}t[e].PageTopHeader=s}("WebUICommonPageTopHeader"),function(e){_e=t[e]={};class s extends c.Component{render(){return(0,j.getContentReaderComponent)(Object.assign({},this.props))}componentDidMount(){this.props.markTTICallback&&this.props.markTTICallback({scenario:K.Scenarios.PodYaml})}}t[e].PodContentReader=s}("WebUIPodsPodContentReader"),function(e){Ce=t[e]={};class s extends c.Component{constructor(e){super(e,{}),this.state={logContent:R.LoadingText,uid:this.props.pod.metadata.uid}}render(){return c.createElement(_e.PodContentReader,{key:this.state.uid,className:"k8s-pod-log",contentClassName:"k8s-pod-log-content",options:{theme:"vs-dark",language:"text/plain",wordWrap:"on",wrappingIndent:"same"},text:this.state.logContent||""})}componentDidMount(){const e=J.KubeFactory.getKubeService(),t=this.props.pod.metadata.name,s=this.props.pod.spec||void 0,a=s&&s.containers&&s.containers.length>0&&s.containers[0].name||"",i={scenario:K.Scenarios.PodLogs};e&&e.getPodLog&&e.getPodLog(t,a).then((e=>{this.setState({uid:n.newGuid(),logContent:e||""}),this.props.markTTICallback&&this.props.markTTICallback(i)})).catch((e=>{let t=e||"";t="string"==typeof t?t:JSON.stringify(t),this.setState({uid:n.newGuid(),logContent:t}),this.props.markTTICallback&&this.props.markTTICallback(i)}))}}t[e].PodLog=s}("WebUIPodsPodLog"),function(e){Te=t[e]={};class s extends c.Component{constructor(){super(...arguments),this._getCardContent=()=>{const e=s._getPodDetails(this.props.pod,this.props.showImageDetails),t="flex-row details-card-row-size",a="text-ellipsis secondary-text details-card-info-field-size";return c.createElement("div",{className:"flex-column details-card-content body-m"},e.map(((e,i)=>e.key===R.ImageText?c.createElement("div",{className:0===i?(0,l.css)("pod-image-data",t,"first-row"):(0,l.css)("pod-image-data",t),key:i},c.createElement("div",{className:(0,l.css)("pod-image-key",a)},e.key),s._renderImageCell(e)):c.createElement("div",{className:0===i?(0,l.css)(t,"first-row"):t,key:i},c.createElement("div",{className:a},e.key),s._renderValueCell(e)))))}}render(){return c.createElement(p.CustomCard,{className:"pod-overview-card k8s-card-padding flex-grow bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},R.PodDetailsHeader)))),c.createElement(p.CardContent,{className:"pod-full-details-table",contentPadding:!0},this._getCardContent()))}componentDidMount(){this._markTTI()}_markTTI(){this.props.markTTICallback&&this.props.markTTICallback({scenario:K.Scenarios.PodOverview})}static _getPodConditionsText(e){let t=[];return e.status&&(t=(e.status.conditions||[]).map((e=>(0,n.localeFormat)("{0}={1}",e.type||"",e.status||"")))),t.join("; ")||""}}t[e].PodOverview=s,s._getPodDetails=(e,t)=>{const a=e.metadata.creationTimestamp?new Date(e.metadata.creationTimestamp):(new Date).getTime(),i=e.status.reason?(0,n.localeFormat)(" | {0}",e.status.reason):"",o=(0,n.localeFormat)("{0}{1}",e.status.phase,i),r=e.metadata.annotations&&Object.keys(e.metadata.annotations).length>0,l=e.metadata.labels&&Object.keys(e.metadata.labels).length>0,{imageText:c,imageTooltipText:d}=le.Utils.getImageText(e.spec),p=le.Utils.getImageIdsForPods([e])[0]||"",m=s._getPodConditionsText(e),u=(0,Se.getRunDetailsText)(e.metadata.annotations);let h=[];return a&&h.push({key:R.Created,value:a}),u&&h.push({key:R.JobText,value:u}),r&&h.push({key:R.AnnotationsText,value:e.metadata.annotations}),e.spec.restartPolicy&&h.push({key:R.RestartPolicyText,value:e.spec.restartPolicy}),e.status.qosClass&&h.push({key:R.QoSClassText,value:e.status.qosClass}),e.spec.nodeName&&h.push({key:R.NodeText,value:e.spec.nodeName}),c&&h.push({key:R.ImageText,value:c,valueTooltipText:d,imageId:p,showImageDetails:t}),l&&h.push({key:R.LabelsText,value:e.metadata.labels}),o&&h.push({key:R.StatusText,value:o}),m&&h.push({key:R.ConditionsText,value:m}),h},s._renderValueCell=e=>{const{key:t,value:s,valueTooltipText:a}=e;switch(t){case R.Created:return c.createElement("div",{className:"text-ellipsis details-card-value-field-size"},c.createElement(C.Ago,{date:new Date(s),format:1}));case R.LabelsText:case R.AnnotationsText:return c.createElement("div",{className:"text-ellipsis details-card-value-field-size",style:{position:"relative",left:"-100px"}},c.createElement(fe.Tags,{items:s,className:"body-s",pillGroupOverflow:1}));default:return(0,he.defaultColumnRenderer)(s,"details-card-value-field-size",a)}},s._renderImageCell=e=>{const{key:t,value:s,valueTooltipText:a,imageId:i,showImageDetails:o}=e;let l="";const d=q.StoreManager.GetStore($.ImageDetailsStore).hasImageDetails(i);return!1===d&&(l=(0,n.localeFormat)("{0} | {1}",a||s,R.ImageDetailsUnavailableText)),d?c.createElement(r.Tooltip,{overflowOnly:!0},c.createElement("div",{className:"pod-image-link details-card-value-field-size"},c.createElement(u.Link,{className:"fontSizeM font-size-m text-ellipsis bolt-table-link",rel:"noopener noreferrer",onClick:e=>{e.preventDefault(),o(i)}},s))):(0,he.defaultColumnRenderer)(s,"pod-image-nolink details-card-value-field-size",l)}}("WebUIPodsPodOverview"),function(e){Ie=t[e]={};class s extends c.Component{render(){return c.createElement(_e.PodContentReader,{className:"pod-yaml",contentClassName:"pod-yaml-content",text:k.safeDump(this.props.pod),markTTICallback:this.props.markTTICallback})}}t[e].PodYaml=s}("WebUIPodsPodYaml"),function(e){xe=t[e]={};class i extends c.Component{constructor(e){super(e,{}),this._onSelectedTabChanged=e=>{let t=Object.assign({},a.parse(this._historyService.location.search));t.view=e,this._historyService.replace({pathname:this._historyService.location.pathname,search:a.stringify(t)}),this.setState({selectedTab:e}),this.props.notifyTabChange&&this.props.notifyTabChange()},this._hideImageDetails=()=>{this.setState({selectedImageDetails:void 0})},this._historyService=(0,s.createBrowserHistory)();const t=a.parse(this._historyService.location.search);let i="pod-details";if(t&&t.view&&(i=t.view),!e.pod&&e.podUid){const t=V.ActionsCreatorManager.GetActionCreator(ee.PodsActionsCreator),s=q.StoreManager.GetStore(te.PodsStore),a=()=>{const t=s.getState().podsList;if(t&&t.items){const s=t.items.find((t=>t.metadata.uid===e.podUid));if(s){const{statusProps:e,tooltip:t}=le.Utils.generatePodStatusProps(s.status);this.setState({pod:s,podStatusProps:e,statusTooltip:t})}}s.removeListener(K.PodsEvents.PodsFetchedEvent,a)};s.addListener(K.PodsEvents.PodsFetchedEvent,a),t.getPods(J.KubeFactory.getKubeService())}this.state={pod:e.pod,podStatusProps:e.podStatusProps,statusTooltip:e.statusTooltip,selectedTab:i,selectedImageDetails:void 0,showImageDetails:e=>{V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator).getImageDetails(e,(e=>{this.setState({selectedImageDetails:e})}))}}}render(){return this.state.selectedImageDetails?c.createElement(ve.ImageDetails,{imageDetails:this.state.selectedImageDetails,onBackButtonClick:this._hideImageDetails}):this._showPodDetails()}_showPodDetails(){return this.state.pod?c.createElement(T.Page,{className:"pods-right-panel-container pod-overview-full-size flex flex-grow"},this._getHeader(),c.createElement(P.TabBar,{className:"pods-right-tab-bar",selectedTabId:this.state.selectedTab||"pod-details",onSelectedTabChanged:this._onSelectedTabChanged,tabSize:"tall"},c.createElement(P.Tab,{name:R.OverviewText,id:"pod-details"}),c.createElement(P.Tab,{name:R.LogsText,id:"pod-logs"}),c.createElement(P.Tab,{name:R.YamlText,id:"pod-yaml"})),c.createElement("div",{className:"pod-details-right-content pod-overview-full-size page-content page-content-top"},this._getPageContent())):c.createElement(E.Spinner,{className:"flex-grow flex-center",label:R.LoadingText})}_getHeader(){return c.createElement(be.PageTopHeader,{title:this.state.pod.metadata&&this.state.pod.metadata.name||"",statusProps:this.state.podStatusProps,statusTooltip:this.state.statusTooltip,className:"pod-right-panel-header"})}_getPageContent(){if(this.state.pod){const{statusProps:e,tooltip:t}=le.Utils.generatePodStatusProps(this.state.pod.status),s=e!==o.Statuses.Success?t:"",a=this._getMainContentClassName(!!s);return c.createElement(c.Fragment,null,s&&c.createElement(w.MessageCard,{severity:"Error"},s),c.createElement("div",{className:(0,l.css)(s?"page-content-top":"",a)},this._getSelectedTabContent()))}}_getSelectedTabContent(){if(this.state.pod){const e={key:this.state.pod.metadata.uid,pod:this.state.pod};switch(this.state.selectedTab){case"pod-logs":return c.createElement(Ce.PodLog,Object.assign({},e,{markTTICallback:this.props.markTTICallback}));case"pod-yaml":return c.createElement(Ie.PodYaml,Object.assign({},e,{markTTICallback:this.props.markTTICallback}));default:const t=this.props.showImageDetails||this.state.showImageDetails;return c.createElement(Te.PodOverview,Object.assign({},e,{showImageDetails:t,markTTICallback:this.props.markTTICallback}))}}}_getMainContentClassName(e){return"pod-details"===this.state.selectedTab?"":(0,l.css)("full-size",e?"pod-overview-error-height":"pod-overview-content-full-size")}}t[e].PodsRightPanel=i}("WebUIPodsPodsRightPanel"),function(e){ke=t[e]={};class o extends c.Component{constructor(e){super(e),this._onPodSelectionChange=(e,t,s)=>{let i=Object.assign({},a.parse(this._history.location.search));i.uid=t.metadata.uid,i.view=s||"pod-details",this._history.replace({pathname:this._history.location.pathname,search:a.stringify(i)});const n={name:this.state.parentName||"",kind:this.state.parentKind||""};this.setState({selectedPod:t,masterDetailsContext:new L.BaseMasterDetailsContext(this._getMasterDetailsContext(n,t,this.state.pods),this._onParentBackButtonClick)})},this._onParentBackButtonClick=()=>(V.ActionsCreatorManager.GetActionCreator(ae.SelectionActionsCreator).selectItem({itemUID:this.props.parentUid,selectedItemType:le.Utils.getItemTypeKeyFromKind(this.state.parentKind||""),showSelectedItem:!0,item:void 0,properties:{parentUid:"",serviceSelector:"",serviceName:""}}),!1),this._showImageDetails=e=>{V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator).getImageDetails(e,(e=>{this.setState({selectedImageDetails:e})}))},this._hideImageDetails=()=>{this.setState({selectedImageDetails:void 0})},this._setHasImageDetails=()=>{this.setState({})},this._markTTI=e=>{this._isTTIMarked||((0,J.getTelemetryService)().scenarioEnd(K.Scenarios.PodsDetails,e),this._isTTIMarked=!0,this._isScenarioOpen=!1)},this._onRightPaneTabChange=()=>{this._isScenarioOpen&&(0,J.getTelemetryService)().scenarioEnd(K.Scenarios.PodsDetails),(0,J.getTelemetryService)().scenarioStart(K.Scenarios.PodsDetails),this._isScenarioOpen=!0,this._isTTIMarked=!1},this._isScenarioOpen=!1,this._isTTIMarked=!1,(0,J.getTelemetryService)().scenarioStart(K.Scenarios.PodsDetails),this._isScenarioOpen=!0,this._history=(0,s.createBrowserHistory)();const t=(t,s)=>{if(t&&s&&e.notifyViewChanged){const i=Object.assign({},a.parse(this._history.location.search));delete i.parentUid,delete i.serviceSelector,delete i.serviceName;const n=le.Utils.getItemTypeKeyFromKind(s);i.type=n,i.uid=e.parentUid;const o=a.stringify(i),r=this._history.location.pathname+"?"+o;e.notifyViewChanged([{id:n+e.parentUid,displayName:t,url:r}])}};this._imageDetailsStore=q.StoreManager.GetStore($.ImageDetailsStore),this._imageDetailsStore.addListener(K.ImageDetailsEvents.HasImageDetailsEvent,this._setHasImageDetails),this._podsStore=q.StoreManager.GetStore(te.PodsStore);let i,n,o,r=[];const l=e.serviceSelector?this._podsStore.getState().podListByLabel[e.serviceSelector]:this._podsStore.getState().podsList,c=t=>{if(t){const s=e.serviceSelector?t:t.filter((t=>le.Utils.isOwnerMatched(t.metadata,e.parentUid.toLowerCase())));if(s.length){const t=e.selectedPodUid?s.find((t=>t.metadata.uid.toLowerCase()===e.selectedPodUid.toLowerCase())):s[0];let a,i;if(e.serviceName&&e.serviceSelector)i=e.serviceName,a="Service";else{const t=s[0].metadata.ownerReferences.find((t=>t.uid.toLowerCase()===e.parentUid.toLowerCase()));t&&(a=t.kind,i=t.name)}return{parentKind:a,parentName:i,pods:s,selectedPod:t}}}return{}};if(l&&l.items){const e=c(l.items);i=e.parentKind,n=e.parentName,r=e.pods,o=e.selectedPod}else{const s=V.ActionsCreatorManager.GetActionCreator(ee.PodsActionsCreator);this._podsFetchEventName=e.serviceSelector?K.PodsEvents.LabelledPodsFetchedEvent:K.PodsEvents.PodsFetchedEvent,this._podsFetchHandler=()=>{this._removePodsFetchListener();const s=this._podsStore.getState(),a=e.serviceSelector?s.podListByLabel[e.serviceSelector]:s.podsList;if(a&&a.items){const e=c(a.items),i=le.Utils.getImageIdsForPods(e.pods||[]);t(e.parentName,e.parentKind);const n={name:e.parentName||"",kind:e.parentKind||""},o=this._getMasterDetailsContext(n,e.selectedPod,e.pods);this.setState({parentKind:e.parentKind,parentName:e.parentName,pods:e.pods,selectedPod:e.selectedPod,isLoading:s.isLoading,imageList:i,masterDetailsContext:new L.BaseMasterDetailsContext(o,this._onParentBackButtonClick)})}},this._podsStore.addListener(this._podsFetchEventName,this._podsFetchHandler),this._podFetchEventActive=!0,e.serviceSelector?s.getPods(J.KubeFactory.getKubeService(),e.serviceSelector,!0):s.getPods(J.KubeFactory.getKubeService())}t(n,i);const d={name:n||"",kind:i||""},p=this._getMasterDetailsContext(d,o,r);this.state={parentKind:i,parentName:n,pods:r,selectedPod:o,selectedImageDetails:void 0,isLoading:!l||!l.items,masterDetailsContext:new L.BaseMasterDetailsContext(p,this._onParentBackButtonClick)}}_getMasterDetailsContext(e,t,s){const a=(0,n.localeFormat)(R.PodDetailsSubheader,e.kind);return{key:"pod-details",masterPanelContent:{renderContent:(e,t)=>c.createElement(ye.PodsLeftPanel,{pods:s||[],parentName:e.name,parentKind:e.kind,selectedPodName:t&&t.value?t.value.metadata.name:"",onSelectionChange:this._onPodSelectionChange}),renderHeader:()=>c.createElement(D.MasterPanelHeader,{title:e.name,subTitle:a}),onBackButtonClick:this._onParentBackButtonClick},detailsContent:{renderContent:e=>c.createElement(xe.PodsRightPanel,{key:e.metadata.uid,pod:e,showImageDetails:this._showImageDetails,markTTICallback:this._markTTI,notifyTabChange:this._onRightPaneTabChange})},selectedMasterItem:new i.ObservableValue(t||{}),parentItem:e}}render(){if(this.state.selectedImageDetails)return c.createElement(ve.ImageDetails,{imageDetails:this.state.selectedImageDetails,onBackButtonClick:this._hideImageDetails});if(this.state.isLoading)return c.createElement(E.Spinner,{className:"flex flex-grow loading-pods",size:"large",label:R.LoadingPodsSpinnerLabel});let e=this.state.selectedPod;return!e&&this.state.pods&&this.state.pods.length>0&&(e=this.state.pods[0]),e&&this.state.masterDetailsContext?c.createElement(L.MasterDetailsContext.Provider,{value:this.state.masterDetailsContext},c.createElement("div",{className:"pod-details flex-row flex-grow scroll-hidden"},c.createElement(D.MasterPanel,{showOnSmallScreens:!0}),c.createElement(D.DetailsPanel,null))):c.createElement("div",{className:"zero-pods-text-container"},R.NoPodsFoundText)}componentDidUpdate(e,t){const s=J.KubeFactory.getImageService();if(s&&this.state.imageList&&this.state.imageList.length>0){void 0===this._imageDetailsStore.hasImageDetails(this.state.imageList[0])&&V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator).setHasImageDetails(s,this.state.imageList)}}componentWillUnmount(){this._imageDetailsStore.removeListener(K.ImageDetailsEvents.HasImageDetailsEvent,this._setHasImageDetails),this._removePodsFetchListener()}_removePodsFetchListener(){this._podFetchEventActive&&this._podsFetchEventName&&this._podsFetchHandler&&(this._podFetchEventActive=!1,this._podsStore.removeListener(this._podsFetchEventName,this._podsFetchHandler))}}t[e].PodsDetails=o}("WebUIPodsPodsDetails"),function(e){we=t[e]={};class s extends c.Component{constructor(e){super(e)}render(){const e=c.createElement(A.ZeroData,{className:(0,l.css)("flex-grow",this.props.className),imageAltText:this.props.imageAltText||"",imagePath:this.props.imagePath||"",secondaryText:this._getTextArea()});return this.props.renderOnCard?c.createElement(p.Card,{titleProps:{text:this.props.title},className:(0,l.css)("flex-grow","item-top-padding","kube-list-content")},e):e}static getDefaultZeroData(){return c.createElement(A.ZeroData,{className:"k8s-zero-data",primaryText:R.StartUsingKubeResourceText,secondaryText:c.createElement(c.Fragment,null,c.createElement("div",null,R.DeployKubeResourceText),c.createElement(u.Link,{href:K.HyperLinks.WorkloadsLink,target:"_blank",rel:"nofollow noopener"},R.LearnMoreKubeResourceText)),imageAltText:R.StartUsingKubeResourceText,imagePath:J.KubeFactory.getImageLocation(M.KubeImage.zeroData)||""})}static getResourceDeletedErrorComponent(){return c.createElement(A.ZeroData,{className:"k8s-resource-deleted-error",primaryText:"",secondaryText:c.createElement("div",null,R.KubernetesResourceDeletedHelpText,c.createElement(u.Link,{href:K.HyperLinks.ResourceDeletedLink,target:"_blank",rel:"nofollow noopener"},R.LearnMoreText)),imageAltText:R.KubernetesResourceDeletedAltText,imagePath:J.KubeFactory.getImageLocation(M.KubeImage.resourceDeleted)||""})}static getResourceAccessDeniedErrorComponent(){return c.createElement(A.ZeroData,{className:"k8s-resource-access-denied-error",primaryText:"",secondaryText:c.createElement("div",null,R.KubernetesAuthValidationHelpText),imageAltText:R.KubernetesAuthValidationTitleText,imagePath:J.KubeFactory.getImageLocation(M.KubeImage.resourceAccessDenied)||""})}static getNoResultsZeroData(){return c.createElement(p.Card,{className:"k8s-zero-data-filter-card k8s-card-padding flex-grow flex-center bolt-card-no-vertical-padding",contentProps:{contentPadding:!1}},c.createElement(A.ZeroData,{className:"k8s-zero-filter-data",secondaryText:c.createElement("div",{className:"secondary-text body-xl"},R.NoResultsFoundText),imageAltText:R.NoResultsFoundText,imagePath:J.KubeFactory.getImageLocation(M.KubeImage.zeroResults)||""}))}static getServicesZeroData(){return c.createElement(p.Card,{className:"services-zero-data-card k8s-card-padding flex-grow flex-center bolt-card-no-vertical-padding",contentProps:{contentPadding:!1}},c.createElement(A.ZeroData,{className:"k8s-zero-services-data",primaryText:R.DeployServices,secondaryText:c.createElement(c.Fragment,null,c.createElement("div",null,R.StartingUsingServiceText),c.createElement(u.Link,{href:K.HyperLinks.ServicesLink,target:"_blank",rel:"nofollow noopener"},R.LearnMoreText)),imageAltText:R.DeployServices,imagePath:J.KubeFactory.getImageLocation(M.KubeImage.zeroWorkloads)||""}))}static getWorkloadsZeroData(){return c.createElement(p.Card,{className:"workloads-zero-data-card k8s-card-padding flex-grow flex-center bolt-card-no-vertical-padding",contentProps:{contentPadding:!1}},c.createElement(A.ZeroData,{className:"k8s-zero-workloads-data",primaryText:R.DeployWorkloads,secondaryText:c.createElement(c.Fragment,null,c.createElement("div",null,R.WorkloadsZeroDataText),c.createElement(u.Link,{href:K.HyperLinks.WorkloadsLink,target:"_blank",rel:"nofollow noopener"},R.LearnMoreText)),imageAltText:R.DeployWorkloads,imagePath:J.KubeFactory.getImageLocation(M.KubeImage.zeroResults)||""}))}static getServiceAssociatedPodsZeroData(){return c.createElement(p.CustomCard,{className:"service-associated-pods-zero-data-card k8s-card-padding flex-grow bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},R.AssociatedPodsText)))),c.createElement(p.CardContent,{contentPadding:!1},c.createElement(A.ZeroData,{className:"k8s-zero-service-pods-data k8s-zero-data-max-width",secondaryText:c.createElement(c.Fragment,null,c.createElement("div",{className:"body-xl fontWeightSemiBold font-weight-semibold"},R.NoPodsText),c.createElement("div",null,R.NoPodsForSvcText),c.createElement(u.Link,{href:K.HyperLinks.LinkToPodsUsingLabelsLink,target:"_blank",rel:"nofollow noopener"},R.NoPodsForSvcLinkText)),imageAltText:R.NoPodsText,imagePath:J.KubeFactory.getImageLocation(M.KubeImage.zeroWorkloads)||""})))}static getWorkloadAssociatedPodsZeroData(){return c.createElement(p.CustomCard,{className:"workload-associated-pods-zero-data-card k8s-card-padding flex-grow bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},R.AssociatedPodsText)))),c.createElement(p.CardContent,{contentPadding:!1},c.createElement(A.ZeroData,{className:"k8s-zero-workload-pods-data k8s-zero-data-max-width",secondaryText:c.createElement(c.Fragment,null,c.createElement("div",null,R.NoPodsFoundText),c.createElement(u.Link,{href:K.HyperLinks.LinkToPodsUsingLabelsLink,target:"_blank",rel:"nofollow noopener"},R.LearnMoreText)),imageAltText:R.NoPodsFoundText,imagePath:J.KubeFactory.getImageLocation(M.KubeImage.zeroWorkloads)||""})))}_getTextArea(){const e=this.props.primaryText,t=this.props.primaryTextClassName?this.props.primaryTextClassName:"zerod-primary-text";return c.createElement("div",null,e?c.createElement("span",{className:t},e):null,c.createElement("br",null),this._getDescription(),c.createElement("br",null),this._getHyperLink())}_getDescription(){return this.props.descriptionText?c.createElement("span",null,this.props.descriptionText):null}_getHyperLink(){return this.props.hyperLink?c.createElement("span",null,c.createElement(u.Link,{href:this.props.hyperLink,target:"_blank",rel:"nofollow noopener",ariaDescribedBy:this.props.hyperLinkLabel},this.props.hyperLinkLabel)):null}}t[e].KubeZeroData=s}("WebUICommonKubeZeroData"),function(e){Ee=t[e]={};const s="running";class a extends c.Component{constructor(e){super(e),this._showPodDetails=(e,t,s)=>{this.props.onItemActivated?this.props.onItemActivated(e,s):s&&G.ActionsHubManager.GetActionsHub(se.SelectionActions).selectItem.invoke({item:s,itemUID:s.metadata.uid,showSelectedItem:!0,selectedItemType:"orphan-pod"})},this._isTTIMarked=!1,this._statusCount={},this.props.markTTICallback||(0,J.getTelemetryService)().scenarioStart(K.Scenarios.PodsList)}render(){const e=this.props.showWorkloadColumn||!1,t=(this.props.podsToRender||[]).filter((e=>le.Utils.filterByName(e.metadata.name,this.props.nameFilter)));if(t.length>0){this._prepareSubTextData(t);const s={id:"pods-table",role:"table",showHeader:!0,showLines:!0,singleClickActivation:!0,itemProvider:new g.ArrayItemProvider(t),ariaLabel:this.props.headingText,columns:a._getColumns(e),onActivate:(e,s)=>{this._showPodDetails(e,s,t[s.index])}};return c.createElement(p.CustomCard,{className:"pods-associated k8s-card-padding flex-grow bolt-table-card bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},this.props.headingText)),c.createElement(m.HeaderDescription,{className:"text-ellipsis"},this._generateHeadingSubText(this._statusCount)))),c.createElement(p.CardContent,{className:(0,l.css)(this.props.contentClassName||"","pod-associated-table"),contentPadding:!1},c.createElement(h.Table,Object.assign({},s))))}return null}componentDidMount(){this.props.markTTICallback||(0,J.getTelemetryService)().scenarioEnd(K.Scenarios.PodsList)}_prepareSubTextData(e){this._statusCount={},e.forEach((e=>{const t=e.status.message?e.status.reason:e.status.phase;t in this._statusCount?this._statusCount[t]+=1:this._statusCount[t]=1}))}static _getColumns(e){let t=[];return t.push({id:"pl-name-key",name:R.PodsDetailsText,width:e?-58:new i.ObservableValue(362),renderCell:a._renderPodNameCell}),e&&t.push({id:"pl-wrkld-key",name:R.WorkloadText,width:-24,renderCell:a._renderPodWorkload}),t.push({id:"podStatus",name:R.StatusText,width:new i.ObservableValue(e?220:256),renderCell:(e,t,s,a)=>{const i=a.status.message?a.status.reason:a.status.phase;return(0,h.renderSimpleCell)(e,t,s,{podStatus:i})}}),t.push({id:"pl-age-key",name:R.AgeText,width:e?-18:-100,renderCell:a._renderPodAgeCell}),t}static _renderPodNameCell(e,t,s,a){const{statusProps:i,tooltip:n}=le.Utils.generatePodStatusProps(a.status);return(0,he.renderPodNameWithStatusTableCell)(e,t,s,a.metadata.name,i,n,"body-m font-weight-semibold")}static _renderPodWorkload(e,t,s,i){const n=i.metadata&&i.metadata.ownerReferences&&i.metadata.ownerReferences.length>0&&i.metadata.ownerReferences[0].name||"",o=i.metadata.ownerReferences&&i.metadata.ownerReferences.find((e=>!!e.controller)),l=n.length>0?c.createElement(r.Tooltip,{overflowOnly:!0},o?c.createElement(u.Link,{className:"fontSizeM font-size-m text-ellipsis bolt-table-link",rel:"noopener noreferrer",excludeTabStop:!0,onClick:e=>{e.preventDefault(),a._onWorkloadClicked(i,o)}},n):n):null;return(0,he.renderTableCell)(e,t,s,l,void 0,n&&o?"bolt-table-cell-content-with-link":"")}static _renderPodAgeCell(e,t,s,a){const i=a.status&&a.status.startTime?c.createElement(C.Ago,{className:"body-m",date:new Date(a.status.startTime),format:1}):null;return(0,he.renderTableCell)(e,t,s,i)}_generateHeadingSubText(e){let t=Object.keys(e),a="";const i=t.indexOf(s);return i>=0&&(a=(0,n.localeFormat)("{0} {1}",e[s],s),t.splice(i,1)),t.forEach((t=>{const s=a?(0,n.localeFormat)(" Â· {0}",a):"";a=(0,n.localeFormat)("{0} {1}{2}",e[t],t,s)})),a}}t[e].PodsTable=a,a._onWorkloadClicked=(e,t)=>{let s="replica-set";switch(t.kind){case"DaemonSet":s="daemon-set";break;case"StatefulSet":s="stateful-set"}const a={item:void 0,itemUID:t.uid,showSelectedItem:!0,selectedItemType:s};V.ActionsCreatorManager.GetActionCreator(ae.SelectionActionsCreator).selectItem(a)}}("WebUIPodsPodsTable"),function(e){Pe=t[e]={};class i extends c.Component{constructor(e){super(e,{}),this._markTTI=()=>{this._isTTIMarked||(0,J.getTelemetryService)().scenarioEnd(K.Scenarios.ServiceDetails),this._isTTIMarked=!0},this._onPodsFetched=()=>{const e=this._servicesStore.getState();this.setState({pods:e.podsList||[],arePodsLoading:e.arePodsLoading})},this._onSelectedPodInvoked=(e,t)=>{const s=V.ActionsCreatorManager.GetActionCreator(ae.SelectionActionsCreator),a=this.state.service.service;s.selectItem({item:t,itemUID:t.metadata.uid,selectedItemType:"pod-details",showSelectedItem:!0,properties:{parentUid:a.metadata.uid,serviceSelector:le.Utils.generateEqualsConditionLabelSelector(a.spec&&a.spec.selector||{}),serviceName:a.metadata.name}})},this._setCopiedRowIndex=e=>{this.setState({copyTooltipText:0===e?R.CopiedExternalIp:R.CopyExternalIp},(()=>{0===e&&F.announce(R.CopiedExternalIp)}))},this._isTTIMarked=!1,this.state={service:e.service,pods:[],arePodsLoading:!0,copyTooltipText:R.CopyExternalIp},(0,J.getTelemetryService)().scenarioStart(K.Scenarios.ServiceDetails);const t=t=>{if(t.metadata&&e.notifyViewChanged){const s=t.metadata;e.notifyViewChanged([{id:"service-item"+s.uid,displayName:s.name,url:window.location.href}])}};e.service&&e.service.service&&t(e.service.service),this._podsActionsCreator=V.ActionsCreatorManager.GetActionCreator(ee.PodsActionsCreator),this._servicesStore=q.StoreManager.GetStore(re.ServicesStore);const i=e=>{const t=le.Utils.generateEqualsConditionLabelSelector(e&&e.spec&&e.spec.selector||{});this._podsActionsCreator.getPods(J.KubeFactory.getKubeService(),t,!0)};if(e.service)e.service.service&&i(e.service.service);else{V.ActionsCreatorManager.GetActionCreator(oe.ServicesActionsCreator).getServices(J.KubeFactory.getKubeService());const e=()=>{this._servicesStore.removeListener(K.ServicesEvents.ServicesFetchedEvent,e);const n=(0,s.createBrowserHistory)(),o=a.parse(n.location.search),r=this._servicesStore.getState().serviceList,l=(r&&r.items||[]).find((e=>e.metadata.uid===o.uid));l&&(t(l),i(l),this.setState({service:(0,ce.getServiceItems)([l])[0]}))};this._servicesStore.addListener(K.ServicesEvents.ServicesFetchedEvent,e)}this._servicesStore.addListener(K.ServicesEvents.ServicePodsFetchedEvent,this._onPodsFetched)}render(){return c.createElement(T.Page,{className:"service-details-page flex flex-grow"},this._getMainHeading(),c.createElement("div",{className:"service-details-page-content page-content page-content-top"},this._getServiceDetails(),this._getAssociatedPods()))}componentWillUnmount(){this._servicesStore.removeListener(K.ServicesEvents.ServicePodsFetchedEvent,this._onPodsFetched)}_getMainHeading(){const e=this.state.service;if(e){const t="LoadBalancer"!==e.type||e.externalIP?o.Statuses.Success:o.Statuses.Running;return c.createElement(be.PageTopHeader,{className:"s-details-header",title:e.package,statusProps:t})}return null}_getServiceDetails(){const e=this.state.service;if(e&&e.service){const t=I.ago(new Date(e.creationTimestamp),0);return c.createElement(p.CustomCard,{className:"service-details-card k8s-card-padding flex-grow bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},R.ServiceDetails)),c.createElement(m.HeaderDescription,{className:"text-ellipsis"},(0,Se.getRunDetailsText)(e.service.metadata.annotations,void 0,t)))),c.createElement(p.CardContent,{className:"service-full-details-table"},this._getServiceDetailsCardContent(e)))}return null}_getServiceDetailsCardContent(e){let t=[];return t.push({key:R.TypeText,value:e.type}),t.push({key:R.ClusterIPText,value:e.clusterIP||"-"}),t.push({key:R.ExternalIPText,value:e.externalIP}),t.push({key:R.PortText,value:e.port}),t.push({key:R.SessionAffinityText,value:e.service&&e.service.spec&&e.service.spec.sessionAffinity||""}),t.push({key:R.SelectorText,value:e.service?e.service.spec.selector:{}}),t.push({key:R.LabelsText,value:e.service?e.service.metadata.labels:{}}),c.createElement("div",{className:"flex-row service-card-content"},t.map(((e,t)=>this._renderServiceCellContent(e,t))))}_renderServiceCellContent(e,t){const{key:s,value:a}=e;let i="flex-column body-m "+(t>0?"service-column-padding":"");const n=(e,t)=>{const s=`secondary-text service-column-key-padding ${t||""}`;return c.createElement("div",{className:s},e)};switch(s){case R.TypeText:case R.ClusterIPText:case R.PortText:case R.SessionAffinityText:return i=`${i} service-basic-column-size`,c.createElement("div",{className:i,key:t},n(s),(0,he.defaultColumnRenderer)(a));case R.ExternalIPText:return c.createElement("div",{className:"body-m service-column-padding",key:t},n(s,"service-extip-column-size"),(0,he.renderExternalIpWithCopy)(a,this.state.copyTooltipText,this._setCopiedRowIndex));case R.LabelsText:case R.SelectorText:return c.createElement("div",{className:"flex-grow flex-column service-column-padding",key:t},n(s,"body-m"),c.createElement(fe.Tags,{className:"overflow-fade service-tags-column-size",items:a}));default:return}}_getAssociatedPods(){return this.state.arePodsLoading?c.createElement(E.Spinner,{className:"flex flex-grow loading-pods",size:"large",label:R.LoadingPodsSpinnerLabel}):this.state.pods&&0!==this.state.pods.length?c.createElement(Ee.PodsTable,{contentClassName:"service-pods-table",podsToRender:this.state.pods,headingText:R.AssociatedPodsText,onItemActivated:this._onSelectedPodInvoked,showWorkloadColumn:!0,markTTICallback:this._markTTI}):(setTimeout(this._markTTI,0),we.KubeZeroData.getServiceAssociatedPodsZeroData())}}t[e].ServiceDetails=i}("WebUIServicesServiceDetails"),function(e){De=t[e]={};class s extends c.Component{constructor(e){super(e,{}),this._openServiceItem=(e,t,s)=>{if(s){const e={item:s,itemUID:s.service.metadata.uid,showSelectedItem:!0,selectedItemType:"service-item"};this._selectionActionCreator.selectItem(e)}},this._renderPackageKeyCell=(e,t,a,i)=>s._getServiceStatusWithName(i,t,a),this._renderAgeCell=(e,t,s,a)=>{const i=c.createElement(C.Ago,{className:"body-m",date:new Date(a.creationTimestamp)});return(0,he.renderTableCell)(e,t,s,i)},this._setCopiedRowIndex=e=>{this.setState({copiedRowIndex:e},(()=>{-1!==e&&F.announce(R.CopiedExternalIp)}))},this._columns=[{id:"package",name:R.NameText,width:new i.ObservableValue(-70),renderCell:this._renderPackageKeyCell},{id:"clusterIP",name:R.ClusterIPText,width:new i.ObservableValue(-15),renderCell:h.renderSimpleCell},{id:"externalIP",name:R.ExternalIPText,width:new i.ObservableValue(172),renderCell:(e,t,s,a)=>(0,he.renderExternalIpCell)(e,t,s,a,this._setCopiedRowIndex)},{id:"port",name:R.PortText,width:new i.ObservableValue(200),renderCell:h.renderSimpleCell},{id:"creationTimestamp",name:R.AgeText,width:new i.ObservableValue(-15),renderCell:this._renderAgeCell}],this.state={copiedRowIndex:-1},this._selectionActionCreator=V.ActionsCreatorManager.GetActionCreator(ae.SelectionActionsCreator)}render(){const e=(this.props.serviceList&&this.props.serviceList.items||[]).filter((e=>this._filterService(e)));if(e.length>0){const t=(0,ce.getServiceItems)(e).map(((e,t)=>(e.externalIPTooltip=t===this.state.copiedRowIndex?R.CopiedExternalIp:R.CopyExternalIp,e))),s={id:"services-list-table",role:"table",showHeader:!0,showLines:!0,singleClickActivation:!0,itemProvider:new g.ArrayItemProvider(t),ariaLabel:R.PivotServiceText,columns:this._columns,tableBreakpoints:[{breakpoint:1,columnWidths:[-100,0,0,0,0]},{breakpoint:600,columnWidths:[-100,0,175,200,0]},{breakpoint:1024,columnWidths:[-70,100,100,100,-40]}],onActivate:(e,s)=>{this._openServiceItem(e,s,t[s.index])}};return c.createElement(p.Card,{className:"services-list-card flex-grow bolt-table-card bolt-card-no-vertical-padding",contentProps:{contentPadding:!1}},c.createElement(h.Table,Object.assign({},s)))}return we.KubeZeroData.getNoResultsZeroData()}componentDidMount(){this.props.markTTICallback&&this.props.markTTICallback()}static _getServiceStatusWithName(e,t,s){let a=o.Statuses.Success,i="";return"LoadBalancer"===e.type&&(i=R.SucceededText,e.externalIP||(i=R.InProgressText,a=o.Statuses.Running)),c.createElement(h.TwoLineTableCell,{key:"col-"+t,columnIndex:t,tableColumn:s,line1:c.createElement(r.Tooltip,{overflowOnly:!0,text:e.package},c.createElement("div",{className:"body-m font-weight-semibold text-ellipsis"},e.package)),line2:c.createElement("div",{className:"body-s secondary-text text-ellipsis"},e.type),iconProps:{render:e=>c.createElement(r.Tooltip,{text:i},c.createElement("div",{className:"flex-row"},c.createElement(o.Status,Object.assign({},a,{ariaLabel:i,className:"icon-large-margin",size:"24"}))))}})}_filterService(e){const t=le.Utils.filterByName(e.metadata.name,this.props.nameFilter),s=!(this.props.typeSelections.length>0)||this.props.typeSelections.indexOf(e.spec.type)>=0;return t&&s}}t[e].ServicesTable=s}("WebUIServicesServicesTable"),function(e){Le=t[e]={};class s extends c.Component{constructor(){super(...arguments),this._selection=new x.ListSelection(!0)}render(){const e=this._generateSvcTypes();let t=[];for(const s of e){let e={id:s,text:s};t.push(e)}return c.createElement(ge.KubeFilterBar,{filter:this.props.filter,pickListPlaceHolder:R.TypeText,keywordPlaceHolder:R.ServiceText,filterToggled:this.props.filterToggled,selection:this._selection,listItems:t,className:this.props.className||"",addBottomPadding:!0})}_generateSvcTypes(){let e=[];return this.props.serviceList&&this.props.serviceList.items&&this.props.serviceList.items.forEach((t=>{-1===e.indexOf(t.spec.type)&&e.push(t.spec.type)})),e}}t[e].ServicesFilterBar=s}("WebUIServicesServicesFilterBar"),function(e){Ae=t[e]={};class s extends c.Component{constructor(e){super(e,{}),this._onServicesFetched=()=>{const e=this._store.getState();this.setState({serviceList:e.serviceList,isLoading:e.isLoading})},this._markTTI=()=>{this._isTTIMarked||(0,J.getTelemetryService)().scenarioEnd(K.Scenarios.Services),this._isTTIMarked=!0},this._isTTIMarked=!1,(0,J.getTelemetryService)().scenarioStart(K.Scenarios.Services),this._actionCreator=V.ActionsCreatorManager.GetActionCreator(oe.ServicesActionsCreator),this._store=q.StoreManager.GetStore(re.ServicesStore);const t=this._store.getState();this.state={serviceList:t.serviceList,isLoading:t.isLoading},this._actionCreator.getServices(J.KubeFactory.getKubeService()),this._store.addListener(K.ServicesEvents.ServicesFetchedEvent,this._onServicesFetched)}render(){return this.state.isLoading?c.createElement(E.Spinner,{className:"flex flex-grow loading-services",size:"large",label:R.LoadingServicesSpinnerLabel}):c.createElement(c.Fragment,null,this._getFilterBar(),c.createElement("div",{className:(0,l.css)("services-pivot-data","k8s-pivot-data")},this._getContent()))}componentWillUnmount(){this._store.removeListener(K.ServicesEvents.ServicesFetchedEvent,this._onServicesFetched)}_getContent(){return 0===(this.state.serviceList&&this.state.serviceList.items?this.state.serviceList.items.length:0)?this._getZeroData():c.createElement(De.ServicesTable,{serviceList:this.state.serviceList||{},nameFilter:this._getNameFilterValue(),typeSelections:this._getTypeFilterValue(),markTTICallback:this._markTTI})}_getFilterBar(){return c.createElement(Le.ServicesFilterBar,{className:(0,l.css)("services-pivot-filter","k8s-pivot-filter"),serviceList:this.state.serviceList||{},filter:this.props.filter,filterToggled:this.props.filterToggled})}_getNameFilterValue(){const e=this.props.filter.getState(),t=e?e[ge.NameKey]:null;return t?t.value:void 0}_getTypeFilterValue(){const e=this.props.filter.getState(),t=e?e[ge.TypeKey]:null;return t?t.value:[]}_getZeroData(){return setTimeout(this._markTTI,0),we.KubeZeroData.getServicesZeroData()}}t[e].ServicesPivot=s}("WebUIServicesServicesPivot"),function(e){Fe=t[e]={};class i extends c.Component{constructor(e){super(e,{}),this._showImageDetails=e=>{V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator).getImageDetails(e,(e=>{this.setState({showImageDetails:!0,selectedImageDetails:e})}))},this._hideImageDetails=()=>{this.setState({showImageDetails:!1,selectedImageDetails:void 0})},this._onPodsUpdated=()=>{const e=this._podsStore.getState(),t=e.podsList;if(t&&t.items){const s=le.Utils.getImageIdsForPods(t.items);this.setState({pods:t.items.filter((e=>this.state.item&&le.Utils.isOwnerMatched(e.metadata,this.state.item.metadata.uid))),arePodsLoading:e.isLoading,imageList:s})}},this._markTTI=()=>{this._isTTIMarked||(0,J.getTelemetryService)().scenarioEnd(K.Scenarios.WorkloadDetails),this._isTTIMarked=!0},this._onSelectedPodInvoked=(e,t)=>{V.ActionsCreatorManager.GetActionCreator(ae.SelectionActionsCreator).selectItem({item:void 0,itemUID:t.metadata.uid,selectedItemType:"pod-details",showSelectedItem:!0,properties:{parentUid:this.state.item&&this.state.item.metadata.uid||""}})},this._setHasImageDetails=()=>{this.setState({})},this._isTTIMarked=!1,(0,J.getTelemetryService)().scenarioStart(K.Scenarios.WorkloadDetails),this._podsStore=q.StoreManager.GetStore(te.PodsStore),this._imageDetailsStore=q.StoreManager.GetStore($.ImageDetailsStore),this._podsStore.addListener(K.PodsEvents.PodsFetchedEvent,this._onPodsUpdated),this._imageDetailsStore.addListener(K.ImageDetailsEvents.HasImageDetailsEvent,this._setHasImageDetails),this._workloadsStore=q.StoreManager.GetStore(me.WorkloadsStore);const t=t=>{if(t.metadata&&e.notifyViewChanged){const s=t.metadata;e.notifyViewChanged([{id:e.itemTypeKey+s.uid,displayName:s.name,url:window.location.href}])}};let i=e.item;if(!e.item){const e=J.KubeFactory.getKubeService();V.ActionsCreatorManager.GetActionCreator(ee.PodsActionsCreator).getPods(e);const n=V.ActionsCreatorManager.GetActionCreator(pe.WorkloadsActionsCreator),o=(0,s.createBrowserHistory)(),r=a.parse(o.location.search);if(r.type){const s=(s,a,i)=>{const n=()=>{const e=s();if(e&&e.items)return e.items.find((e=>e.metadata.uid===r.uid))};let o=n();if(!o){const s=()=>{const e=n();this._workloadsStore.removeListener(i,s),e&&t(e),this.setState({item:e})};a(e),this._workloadsStore.addListener(i,s)}return o};switch(r.type){case"replica-set":i=s((()=>this._workloadsStore.getState().replicaSetList),(e=>n.getReplicaSets(e)),K.WorkloadsEvents.ReplicaSetsFetchedEvent);break;case"daemon-set":i=s((()=>this._workloadsStore.getState().daemonSetList),(e=>n.getDaemonSets(e)),K.WorkloadsEvents.DaemonSetsFetchedEvent);break;case"stateful-set":i=s((()=>this._workloadsStore.getState().statefulSetList),(e=>n.getStatefulSets(e)),K.WorkloadsEvents.StatefulSetsFetchedEvent)}}}i&&t(i),this.state={item:i,pods:[],selectedPod:null,showSelectedPod:!1,showImageDetails:!1,selectedImageDetails:void 0}}render(){return this.state.showImageDetails&&this.state.selectedImageDetails?c.createElement(ve.ImageDetails,{imageDetails:this.state.selectedImageDetails,onBackButtonClick:this._hideImageDetails}):c.createElement(T.Page,{className:"workload-details-page flex flex-grow"},this._getMainHeading(),c.createElement("div",{className:"workload-details-page-content page-content page-content-top"},this._getWorkloadDetails(),this._getAssociatedPods()))}componentDidMount(){if(this.state.item){const e=this._podsStore.getState().podsList,t=(e&&e.items||[]).filter((e=>le.Utils.isOwnerMatched(e.metadata,this.state.item.metadata.uid)));this.setState({pods:t,selectedPod:t&&t.length>0?t[0]:null})}}componentDidUpdate(e,t){const s=J.KubeFactory.getImageService();if(s&&this.state.imageList&&this.state.imageList.length>0){void 0===this._imageDetailsStore.hasImageDetails(this.state.imageList[0])&&V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator).setHasImageDetails(s,this.state.imageList)}}componentWillUnmount(){this._podsStore.removeListener(K.PodsEvents.PodsFetchedEvent,this._onPodsUpdated),this._imageDetailsStore.removeListener(K.ImageDetailsEvents.HasImageDetailsEvent,this._setHasImageDetails)}_getMainHeading(){if(this.state.item){const e=this.state.item.metadata,{statusProps:t,podsTooltip:s}=this.props.getStatusProps(this.state.item);return e?c.createElement(be.PageTopHeader,{className:"wl-header",title:e.name,statusProps:t,statusTooltip:s}):null}return null}_getWorkloadDetails(){if(this.state.item){const e=this.state.item.metadata;if(e){const t=I.ago(new Date(e.creationTimestamp),0);return c.createElement(p.CustomCard,{className:"workload-details-card k8s-card-padding flex-grow bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},(0,n.localeFormat)(R.WorkloadDetails,this.props.parentKind))),c.createElement(m.HeaderDescription,{className:"text-ellipsis"},(0,Se.getRunDetailsText)(e.annotations,void 0,t)))),c.createElement(p.CardContent,{className:"workload-full-details-table"},this._getWorkloadDetailsCardContent()))}}return null}_getWorkloadDetailsCardContent(){let e=[];return this.state.item&&(e.push({key:R.ImageText,value:this.state.item.spec&&this.state.item.spec.template}),e.push({key:R.SelectorText,value:this.state.item.spec&&this.state.item.spec.selector&&this.state.item.spec.selector.matchLabels||{}}),e.push({key:R.LabelsText,value:this.state.item.metadata&&this.state.item.metadata.labels||{}})),c.createElement("div",{className:"flex-row workload-card-content"},e.map(((e,t)=>this._renderWorkloadCellContent(e,t))))}_renderWorkloadCellContent(e,t){const{key:s,value:a}=e,i=(e,t)=>{const s=`secondary-text workload-column-key-padding ${t||""}`;return c.createElement("div",{className:s},e)};switch(s){case R.ImageText:return c.createElement("div",{className:"flex-column body-m workload-image-column-size",key:t},i(s),this._renderImageCell(a));case R.LabelsText:case R.SelectorText:return c.createElement("div",{className:"flex-grow flex-column workload-tags-column-padding",key:t},i(s,"body-m"),c.createElement(fe.Tags,{className:"overflow-wrap workload-tags-column-size",items:a,pillGroupOverflow:1}));default:return}}_renderImageCell(e){const t=le.Utils.getImageIdForWorkload(le.Utils.getFirstContainerName(e.spec),this.state.pods),{imageText:s,imageTooltipText:a}=le.Utils.getImageText(e.spec);let i="";const o=this._imageDetailsStore.hasImageDetails(t);if(!1===o){const e=a||s;i=(0,n.localeFormat)("{0} | {1}",e,R.ImageDetailsUnavailableText)}return o?c.createElement(r.Tooltip,{overflowOnly:!0},c.createElement("div",{className:"flex-row flex-center"},c.createElement(u.Link,{className:"fontSizeM font-size-m text-ellipsis bolt-table-link workload-image-padding",rel:"noopener noreferrer",onClick:e=>{e.preventDefault(),this._showImageDetails(t)}},s))):(0,he.defaultColumnRenderer)(s,"",i,!0)}_getAssociatedPods(){return this._podsStore.getState().isLoading?c.createElement(E.Spinner,{className:"flex flex-grow loading-pods",size:"large",label:R.LoadingPodsSpinnerLabel}):0===this.state.pods.length?(setTimeout((()=>this._markTTI()),0),we.KubeZeroData.getWorkloadAssociatedPodsZeroData()):c.createElement(Ee.PodsTable,{contentClassName:"workload-pods-table",podsToRender:this.state.pods,headingText:R.PodsText,onItemActivated:this._onSelectedPodInvoked,markTTICallback:this._markTTI})}}t[e].WorkloadDetails=i}("WebUIWorkloadsWorkloadDetails"),function(e){Ne=t[e]={};class s extends c.Component{constructor(e){super(e,{}),this._onReplicaSetsFetched=()=>{const e=this._store.getState();this.setState({deploymentList:e.deploymentList,replicaSetList:e.replicaSetList},(()=>{this.props.markTTICallback&&this.props.markTTICallback({component:"DeploymentTable"})}))},this._setHasImageDetails=()=>{this.setState({})},this._getColumns=()=>{let e=[];return e.push({id:"replicasetName",name:R.ReplicaSetText,width:new i.ObservableValue(348),renderCell:s._renderReplicaSetNameCell}),e.push({id:"imageName",name:R.ImageText,width:-72,renderCell:this._renderImageCell}),e.push({id:"pods",name:R.PodsText,width:new i.ObservableValue(140),renderCell:this._renderPodsCountCell}),e.push({id:"age",name:R.AgeText,width:-28,renderCell:s._renderAgeCell}),e},this._renderPodsCountCell=(e,t,s,a)=>{const i=this._getSelectedReplicaSet(a),n=q.StoreManager.GetStore(te.PodsStore).getState().podsList,o=n&&n.items&&n.items.filter((e=>i&&le.Utils.isOwnerMatched(e.metadata,i.metadata.uid)||!1)),r=o&&i?()=>(0,he.onPodsColumnClicked)(o,i,"ReplicaSet",this._selectionActionCreator):void 0;return(0,he.renderPodsStatusTableCell)(e,t,s,a.pods,a.statusProps,a.podsTooltip,r,this._podsLinkClassName)},this._renderImageCell=(e,t,s,a)=>{const i=a.imageDisplayText||"",o=a.imageId;let d="";const p=this._imageDetailsStore.hasImageDetails(o);!1===p&&(d=(0,n.localeFormat)("{0} | {1}",a.imageTooltip||i,R.ImageDetailsUnavailableText));const m=p?c.createElement(r.Tooltip,{overflowOnly:!0},c.createElement(u.Link,{className:(0,l.css)("body-m text-ellipsis bolt-table-link",this._imageLinkClassName),rel:"noopener noreferrer",excludeTabStop:!0,onClick:e=>{e.preventDefault(),this._onImageClick(o)}},i)):(0,he.defaultColumnRenderer)(i,"body-m",d);return(0,he.renderTableCell)(e,t,s,m,void 0,p?"bolt-table-cell-content-with-link":"")},this._openDeploymentItem=(e,t,s)=>{const a=this._getSelectedReplicaSet(s);if(a){const e={item:a,itemUID:a.metadata.uid,showSelectedItem:!0,selectedItemType:"replica-set"};this._selectionActionCreator.selectItem(e)}},this._onImageClick=e=>{V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator).getImageDetails(e,(e=>{const t={item:e,itemUID:"",showSelectedItem:!0,selectedItemType:"image-details"};this._selectionActionCreator.selectItem(t)}))},this._podsLinkClassName="d-pods-link",this._imageLinkClassName="d-image-link",this._workloadsActionCreator=V.ActionsCreatorManager.GetActionCreator(pe.WorkloadsActionsCreator),this._selectionActionCreator=V.ActionsCreatorManager.GetActionCreator(ae.SelectionActionsCreator),this._imageDetailsStore=q.StoreManager.GetStore($.ImageDetailsStore),this._store=q.StoreManager.GetStore(me.WorkloadsStore),this._workloadsActionCreator.getReplicaSets(J.KubeFactory.getKubeService()),this.state={deploymentList:void 0,replicaSetList:void 0},this._store.addListener(K.WorkloadsEvents.ReplicaSetsFetchedEvent,this._onReplicaSetsFetched),this._imageDetailsStore.addListener(K.ImageDetailsEvents.HasImageDetailsEvent,this._setHasImageDetails)}render(){const e=this.state.deploymentList,t=(e&&e.items||[]).filter((e=>le.Utils.filterByName(e.metadata.name,this.props.nameFilter)));return t.length>0?this._getDeploymentListView(t):null}componentWillUnmount(){this._store.removeListener(K.WorkloadsEvents.ReplicaSetsFetchedEvent,this._onReplicaSetsFetched),this._imageDetailsStore.removeListener(K.ImageDetailsEvents.HasImageDetailsEvent,this._setHasImageDetails)}_getDeploymentListView(e){let t=[];return s._generateDeploymentReplicaSetMap(e,this.state.replicaSetList).forEach(((e,a)=>{const i=s._getDeploymentReplicaSetItems(e.deployment,e.replicaSets),o=(0,n.format)("workloads-d-t-{0}",a),l={id:o,role:"table",showHeader:!0,showLines:!0,singleClickActivation:!0,itemProvider:new g.ArrayItemProvider(i),ariaLabel:e.deployment.metadata.name,columns:this._getColumns(),onActivate:(e,t)=>{const s=e&&e.target;!s||s.classList.contains(this._podsLinkClassName)||s.classList.contains(this._imageLinkClassName)||this._openDeploymentItem(e,t,i[t.index])}},d=c.createElement(p.CustomCard,{className:"deployment-replica-with-pod-list k8s-card-padding bolt-table-card flex-grow bolt-card-no-vertical-padding",key:o},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,{className:"workloads-card-title"},c.createElement(m.HeaderTitle,{className:"workloads-card-header",titleSize:0},c.createElement(r.Tooltip,{text:e.deployment.metadata.name,overflowOnly:!0},s._getHeadingContent(e.deployment))),c.createElement(fe.Tags,{className:"deployment-tbl-heading-labels body-s",tagContentClassName:"workloads-card-tags",items:e.deployment.metadata.labels,pillGroupOverflow:1})),c.createElement(m.HeaderDescription,{className:"text-ellipsis"},R.DeploymentText))),c.createElement(p.CardContent,{className:"deployment-replicaset-table",contentPadding:!1},c.createElement(h.Table,Object.assign({},l))));t.push(d)})),t}static _generateDeploymentReplicaSetMap(e,t){let a=[];return e.forEach((e=>{const i=(t&&t.items||[]).filter((t=>s._isReplicaSetForDeployment(e,t)))||[];i.sort(((e,t)=>s._getCreationTime(t.metadata)-s._getCreationTime(e.metadata))),a.push({deployment:e,replicaSets:i})})),a}static _getDeploymentReplicaSetItems(e,t){let a=[];return t.forEach(((i,n)=>{i&&i.spec&&i.spec.replicas>0&&a.push(s._getDeploymentReplicaSetItem(e,i,n,t.length))})),a}static _getDeploymentReplicaSetItem(e,t,a,i){const o=0===a?e.metadata.annotations:t.metadata.annotations,r=q.StoreManager.GetStore(te.PodsStore).getState().podsList,l=r&&r.items||[],c=le.Utils.getImageIdForWorkload(le.Utils.getFirstContainerName(t.spec.template.spec),l,t.metadata.uid);c&&(s._imageList.length<=0||s._imageList.findIndex((e=>(0,n.equals)(e,c)))<0)&&s._imageList.push(c);const{imageText:d,imageTooltipText:p}=le.Utils.getImageText(t.spec.template.spec);return Object.assign({name:a>0?"":e.metadata.name,deploymentId:e.metadata.uid,replicaSetId:t.metadata.uid,replicaSetName:t.metadata.name,pipeline:le.Utils.getPipelineText(o),showRowBorder:i===a+1,deployment:e,imageDisplayText:d,imageId:c,creationTimeStamp:t.metadata.creationTimestamp,kind:t.kind||"ReplicaSet",imageTooltip:p},le.Utils.getPodsStatusProps(t.status.readyReplicas,t.status.replicas))}static _getCreationTime(e){return(e.creationTimestamp?new Date(e.creationTimestamp):new Date).getTime()}static _isReplicaSetForDeployment(e,t){return!!e&&!!t&&t.metadata.namespace.toLowerCase()===e.metadata.namespace.toLowerCase()&&t.metadata.ownerReferences&&t.metadata.ownerReferences.length>0&&t.metadata.ownerReferences[0].uid.toLowerCase()===e.metadata.uid.toLowerCase()}static _renderReplicaSetNameCell(e,t,s,a){const i=(0,he.defaultColumnRenderer)(a.replicaSetName||"","body-m font-weight-semibold");return(0,he.renderTableCell)(e,t,s,i)}static _renderAgeCell(e,t,s,a){const i=a.creationTimeStamp?a.creationTimeStamp:new Date,n=c.createElement(C.Ago,{className:"body-m",date:new Date(i)});return(0,he.renderTableCell)(e,t,s,n)}static _getHeadingContent(e){return c.createElement("div",null,e.metadata.name)}_getSelectedReplicaSet(e){if(e&&e.replicaSetId){const t=e.replicaSetId.toLowerCase(),s=this.state.replicaSetList;return(s&&s.items||[]).filter((e=>e.metadata.uid.toLowerCase()===t))[0]}return null}}t[e].DeploymentsTable=s,s._imageList=[]}("WebUIWorkloadsDeploymentsTable"),function(e){Oe=t[e]={};class s extends c.Component{constructor(e){super(e,{}),this._onStatefulSetsFetched=()=>{const e=this._store.getState();this.setState({statefulSets:e.statefulSetList&&e.statefulSetList.items||[]},(()=>this._onMetadataFetch("statefulsets")))},this._onDaemonSetsFetched=()=>{const e=this._store.getState();this.setState({daemonSets:e.daemonSetList&&e.daemonSetList.items||[]},(()=>this._onMetadataFetch("daemon")))},this._onReplicaSetsFetched=()=>{const e=this._store.getState(),t=(e.replicaSetList&&e.replicaSetList.items||[]).filter((e=>0===e.metadata.ownerReferences.length));this.setState({replicaSets:t},(()=>this._onMetadataFetch("replicasets")))},this._onOrphanPodsFetched=()=>{const e=this._store.getState().orphanPodsList||[];this.setState({orphanPods:e},(()=>this._onMetadataFetch("orphanpods")))},this._setHasImageDetails=()=>{this.setState({})},this._onMetadataFetch=e=>{this._metadataInitialized[e]=!0;let t=!0;Object.keys(this._metadataInitialized).forEach((e=>t=t&&this._metadataInitialized[e])),t&&this.props.markTTICallback&&this.props.markTTICallback({component:"OtherWorkloads"})},this._showWorkloadDetails=(e,t,s)=>{if(s){const e={item:s.payload,itemUID:s.uid,showSelectedItem:!0,selectedItemType:s.kind};this._selectionActionCreator.selectItem(e)}},this._getColumns=()=>{let e=[];return e.push({id:"otherwrkld-name-key",name:R.NameText,width:new i.ObservableValue(348),renderCell:s._renderSetNameCell}),e.push({id:"otherwrkld-image-key",name:R.ImageText,width:-72,renderCell:this._renderImageCell}),e.push({id:"otherwrkld-pods-key",name:R.PodsText,width:new i.ObservableValue(140),renderCell:this._renderPodsCountCell}),e.push({id:"otherwrkld-age-key",name:R.AgeText,width:-28,renderCell:s._renderAgeCell}),e},this._renderImageCell=(e,t,s,a)=>{const i=a.imageId,o=a.imageDisplayText||"";let d="";const p=this._imageDetailsStore.hasImageDetails(i);!1===p&&(d=(0,n.localeFormat)("{0} | {1}",a.imageTooltip||o,R.ImageDetailsUnavailableText));const m=p?c.createElement(r.Tooltip,{overflowOnly:!0},c.createElement(u.Link,{className:(0,l.css)("body-m text-ellipsis bolt-table-link",this._imageLinkClassName),excludeTabStop:!0,onClick:e=>{e.preventDefault(),this._onImageClick(i)}},o)):(0,he.defaultColumnRenderer)(o,"body-m",d);return(0,he.renderTableCell)(e,t,s,m,void 0,p?"bolt-table-cell-content-with-link":"")},this._renderPodsCountCell=(e,t,s,a)=>{let{statusProps:i,pods:n,podsTooltip:o}=le.Utils.getPodsStatusProps(a.currentPodCount,a.desiredPodCount);const r=a.payload,l=q.StoreManager.GetStore(te.PodsStore).getState().podsList,c=l&&l.items&&l.items.filter((e=>r&&le.Utils.isOwnerMatched(e.metadata,r.metadata.uid)||!1));let d=le.Utils.getKindFromItemTypeKey(a.kind);const p=c&&r?()=>(0,he.onPodsColumnClicked)(c,r,d,this._selectionActionCreator):void 0;return(0,he.renderPodsStatusTableCell)(e,t,s,n,i,o,p,this._podsLinkClassName)},this._onImageClick=(e,t="")=>{V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator).getImageDetails(e,(e=>{const s={item:e,itemUID:t,showSelectedItem:!0,selectedItemType:"image-details"};this._selectionActionCreator.selectItem(s)}))},this._podsLinkClassName="owl-pods-link",this._imageLinkClassName="owl-image-link",this._imageList=[],this._metadataInitialized={daemon:!1,statefulsets:!1,replicasets:!1,orphanpods:!1},this._store=q.StoreManager.GetStore(me.WorkloadsStore),this._imageDetailsStore=q.StoreManager.GetStore($.ImageDetailsStore),this._actionCreator=V.ActionsCreatorManager.GetActionCreator(pe.WorkloadsActionsCreator),this._selectionActionCreator=V.ActionsCreatorManager.GetActionCreator(ae.SelectionActionsCreator),this._imageActionsCreator=V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator),this.state={statefulSets:[],daemonSets:[],replicaSets:[],orphanPods:[]},this._store.addListener(K.WorkloadsEvents.ReplicaSetsFetchedEvent,this._onReplicaSetsFetched),this._store.addListener(K.WorkloadsEvents.StatefulSetsFetchedEvent,this._onStatefulSetsFetched),this._store.addListener(K.WorkloadsEvents.DaemonSetsFetchedEvent,this._onDaemonSetsFetched),this._store.addListener(K.WorkloadsEvents.WorkloadPodsFetchedEvent,this._onOrphanPodsFetched),this._imageDetailsStore.addListener(K.ImageDetailsEvents.HasImageDetailsEvent,this._setHasImageDetails);const t=J.KubeFactory.getKubeService();this._actionCreator.getReplicaSets(t),this._actionCreator.getStatefulSets(t),this._actionCreator.getDaemonSets(t)}render(){const e=this._generateRenderData().filter((e=>le.Utils.filterByName(e.name,this.props.nameFilter))),t={id:"other-workloads-table",role:"table",showHeader:!0,showLines:!0,singleClickActivation:!0,itemProvider:new g.ArrayItemProvider(e),ariaLabel:R.OtherWorkloadsText,columns:this._getColumns(),onActivate:(t,s)=>{const a=t&&t.target;!a||a.classList.contains(this._podsLinkClassName)||a.classList.contains(this._imageLinkClassName)||this._showWorkloadDetails(t,s,e[s.index])}};return e.length>0?c.createElement(p.CustomCard,{className:"workloads-other-content k8s-card-padding flex-grow bolt-table-card bolt-card-no-vertical-padding"},c.createElement(m.CustomHeader,null,c.createElement(m.HeaderTitleArea,null,c.createElement(m.HeaderTitleRow,null,c.createElement(m.HeaderTitle,{className:"text-ellipsis",titleSize:0},R.OtherWorkloadsText)))),c.createElement(p.CardContent,{className:"workload-other-sets-table",contentPadding:!1},c.createElement(h.Table,Object.assign({},t)))):null}componentWillUnmount(){this._imageDetailsStore.removeListener(K.ImageDetailsEvents.HasImageDetailsEvent,this._setHasImageDetails),this._store.removeListener(K.WorkloadsEvents.DaemonSetsFetchedEvent,this._onDaemonSetsFetched),this._store.removeListener(K.WorkloadsEvents.StatefulSetsFetchedEvent,this._onStatefulSetsFetched),this._store.removeListener(K.WorkloadsEvents.ReplicaSetsFetchedEvent,this._onReplicaSetsFetched),this._store.removeListener(K.WorkloadsEvents.WorkloadPodsFetchedEvent,this._onOrphanPodsFetched)}static _renderSetNameCell(e,t,a,i){return c.createElement(h.TwoLineTableCell,{key:"col-"+t,columnIndex:t,tableColumn:a,line1:c.createElement(r.Tooltip,{overflowOnly:!0,text:i.name},c.createElement("span",{className:"body-m font-weight-semibold text-ellipsis"},i.name)),line2:c.createElement("span",{className:"body-s secondary-text text-ellipsis"},s._getSetType(i.kind))})}static _renderAgeCell(e,t,s,a){const i=a.creationTimeStamp?a.creationTimeStamp:new Date,n=c.createElement(C.Ago,{className:"body-m",date:new Date(i)});return(0,he.renderTableCell)(e,t,s,n)}_generateRenderData(){let e=[],t="";return this._showType(H.KubeResourceType.StatefulSets)&&this.state.statefulSets.forEach((a=>{t=this._getImageId(a.spec.template.spec,a.metadata.uid),t&&(this._imageList.length<=0||this._imageList.findIndex((e=>(0,n.equals)(e,t,!0)))<0)&&this._imageList.push(t),e.push(Object.assign({name:a.metadata.name,uid:a.metadata.uid,kind:"stateful-set",creationTimeStamp:a.metadata.creationTimestamp,imageId:t,desiredPodCount:a.status.replicas,currentPodCount:a.status.readyReplicas,payload:a},s._getImageText(a.spec.template.spec)))})),this._showType(H.KubeResourceType.DaemonSets)&&this.state.daemonSets.forEach((a=>{t=this._getImageId(a.spec.template.spec,a.metadata.uid),t&&(this._imageList.length<=0||this._imageList.findIndex((e=>(0,n.equals)(e,t,!0)))<0)&&this._imageList.push(t),e.push(Object.assign({name:a.metadata.name,uid:a.metadata.uid,kind:"daemon-set",creationTimeStamp:a.metadata.creationTimestamp,imageId:t,desiredPodCount:a.status.desiredNumberScheduled,currentPodCount:a.status.numberAvailable,payload:a},s._getImageText(a.spec.template.spec)))})),this._showType(H.KubeResourceType.ReplicaSets)&&this.state.replicaSets.forEach((a=>{t=this._getImageId(a.spec.template.spec,a.metadata.uid),t&&(this._imageList.length<=0||this._imageList.findIndex((e=>(0,n.equals)(e,t,!0)))<0)&&this._imageList.push(t),e.push(Object.assign({name:a.metadata.name,uid:a.metadata.uid,kind:"replica-set",creationTimeStamp:a.metadata.creationTimestamp,imageId:t,desiredPodCount:a.status.replicas,currentPodCount:a.status.readyReplicas,payload:a},s._getImageText(a.spec.template.spec)))})),this._showType(H.KubeResourceType.Pods)&&this.state.orphanPods.forEach((a=>{t=le.Utils.getImageIdsForPods([a])[0]||"",t&&(this._imageList.length<=0||this._imageList.findIndex((e=>(0,n.equals)(e,t,!0)))<0)&&this._imageList.push(t);const{statusProps:i,tooltip:r}=le.Utils.generatePodStatusProps(a.status);e.push(Object.assign({name:a.metadata.name,uid:a.metadata.uid,kind:"orphan-pod",creationTimeStamp:a.metadata.creationTimestamp,imageId:t,desiredPodCount:1,currentPodCount:i===o.Statuses.Success?1:0,statusProps:i,statusTooltip:r,payload:a},s._getImageText(a.spec)))})),e}_getImageId(e,t){const s=q.StoreManager.GetStore(te.PodsStore).getState().podsList,a=s&&s.items||[];return le.Utils.getImageIdForWorkload(le.Utils.getFirstContainerName(e),a,t)}_showType(e){return 0==this.props.typeFilter.length||null!=e&&this.props.typeFilter.indexOf(e.toString())>=0}static _getImageText(e){const{imageText:t,imageTooltipText:s}=le.Utils.getImageText(e);return{imageDisplayText:t,imageTooltip:s}}static _getSetType(e){switch(e){case"daemon-set":return R.DaemonSetText;case"replica-set":return R.ReplicaSetText;case"stateful-set":return R.StatefulSetText;case"orphan-pod":return R.PodText}return""}}t[e].OtherWorkloads=s}("WebUIWorkloadsOtherWorkloadsTable"),function(e){Ue=t[e]={};class s extends c.Component{constructor(){super(...arguments),this._selection=new x.ListSelection(!0)}render(){const e=[{id:H.KubeResourceType.Deployments.toString(),text:R.DeploymentsDetailsText},{id:H.KubeResourceType.ReplicaSets.toString(),text:R.ReplicaSetText},{id:H.KubeResourceType.DaemonSets.toString(),text:R.DaemonSetText},{id:H.KubeResourceType.StatefulSets.toString(),text:R.StatefulSetText}];return c.createElement(ge.KubeFilterBar,{filter:this.props.filter,keywordPlaceHolder:R.WorkloadText.toLocaleLowerCase(),pickListPlaceHolder:R.KindText,listItems:e,filterToggled:this.props.filterToggled,className:this.props.className||"",addBottomPadding:!0,selection:this._selection})}}t[e].WorkloadsFilterBar=s}("WebUIWorkloadsWorkloadsFilterBar"),function(e){We=t[e]={};class s extends c.Component{constructor(e){super(e,{}),this._onPodsFetched=()=>{const e=this._podsStore.getState().podsList;if(e&&e.items&&e.items.length>0){const t=le.Utils.getImageIdsForPods(e.items);this.setState({imageList:t})}},this._onDataFound=()=>{const e=this._workloadsStore.getWorkloadSize();this.state.workloadResourceSize<=0&&e>0&&this.setState({workloadResourceSize:e},(()=>{this._componentsInitialized={DeploymentTable:!1,OtherWorkloads:!1}}))},this._notifyRender=e=>{if(!this._isTTIMarked&&e&&this._componentsInitialized){e.component&&(this._componentsInitialized[e.component]=!0);let t=!0;Object.keys(this._componentsInitialized).forEach((e=>t=t&&this._componentsInitialized[e])),t&&!this._isTTIMarked&&((0,J.getTelemetryService)().scenarioEnd(K.Scenarios.Workloads),this._isTTIMarked=!0)}},this._isTTIMarked=!1,(0,J.getTelemetryService)().scenarioStart(K.Scenarios.Workloads),this._workloadsStore=q.StoreManager.GetStore(me.WorkloadsStore),this._podsStore=q.StoreManager.GetStore(te.PodsStore),this._podsActionCreator=V.ActionsCreatorManager.GetActionCreator(ee.PodsActionsCreator),this._imageActionsCreator=V.ActionsCreatorManager.GetActionCreator(Q.ImageDetailsActionsCreator),this._workloadsActionCreator=V.ActionsCreatorManager.GetActionCreator(pe.WorkloadsActionsCreator),this.state={workloadResourceSize:0,imageList:[]},this._podsStore.addListener(K.PodsEvents.PodsFetchedEvent,this._onPodsFetched),this._workloadsStore.addListener(K.WorkloadsEvents.WorkloadsFoundEvent,this._onDataFound);const t=J.KubeFactory.getKubeService();this._workloadsActionCreator.getDeployments(t),this._podsActionCreator.getPods(t)}render(){return c.createElement(c.Fragment,null,this._getFilterBar(),c.createElement("div",{className:(0,l.css)("workloads-pivot-data","k8s-pivot-data")},this._getContent()))}componentWillUnmount(){this._workloadsStore.removeListener(K.WorkloadsEvents.WorkloadsFoundEvent,this._onDataFound),this._podsStore.removeListener(K.PodsEvents.PodsFetchedEvent,this._onPodsFetched)}componentDidUpdate(e,t){const s=J.KubeFactory.getImageService();s&&this.state.imageList.length>0&&this._imageActionsCreator.setHasImageDetails(s,this.state.imageList)}_getContent(){return 0===this.state.workloadResourceSize?this._getZeroData():c.createElement(c.Fragment,null,this._showComponent(H.KubeResourceType.Deployments)&&this._getDeployments(),this._getOtherWorkloadsComponent())}_getFilterBar(){return c.createElement(Ue.WorkloadsFilterBar,{filter:this.props.filter,filterToggled:this.props.filterToggled,className:(0,l.css)("workloads-pivot-filter","k8s-pivot-filter")})}_getOtherWorkloadsComponent(){return c.createElement(Oe.OtherWorkloads,{key:(0,n.format)("sts-list-{0}",this.props.namespace||""),nameFilter:this._getNameFilterValue(),typeFilter:this._getTypeFilterValue(),markTTICallback:this._notifyRender})}_getDeployments(){return c.createElement(Ne.DeploymentsTable,{key:(0,n.format)("dc-{0}",this.props.namespace||""),nameFilter:this._getNameFilterValue(),markTTICallback:this._notifyRender})}_getNameFilterValue(){const e=this.props.filter.getState(),t=e?e[ge.NameKey]:null;return t?t.value:void 0}_getTypeFilterValue(){const e=this.props.filter.getState(),t=e?e[ge.TypeKey]:null;return t?t.value:[]}_showComponent(e){const t=this._getTypeFilterValue();if(t.length>0&&null!=e){const s=e.toString();return-1!=t.indexOf(s)}return!0}_getZeroData(){return we.KubeZeroData.getWorkloadsZeroData()}}t[e].WorkloadsPivot=s}("WebUIWorkloadsWorkloadsPivot"),function(e){t[e]={};const o="workloads",d="services",p=new i.ObservableValue(!1),h=new i.ObservableValue(!1);class g extends c.Component{constructor(e){super(e,{}),this._updateStateFromHistory=e=>{if(e.type&&e.uid){const t=e.type,s=e.uid,a=this._objectFinder[t](s);this.setState({selectedItemType:t,selectedItem:a,showSelectedItem:!0,selectedItemUid:s,selectedItemProperties:e})}else this.props.onViewChanged&&this.props.onViewChanged([]),this.setState({selectedItemType:"",selectedItem:void 0,showSelectedItem:!1,selectedItemUid:void 0})},this._onHistoryChanged=(e,t)=>{this._updateStateFromHistory(a.parse(e.search))},this._setNamespaceOnDeploymentsFetched=()=>{if(!this.state.namespace){const e=this._workloadsStore.getState();this.setState({namespace:e.deploymentNamespace})}},this._onZeroDeploymentsFound=()=>{this.setState({zeroDeploymentsFound:!0})},this._onWorkloadsFilterApplied=e=>{this.setState({})},this._onSvcFilterApplied=e=>{this.setState({})},this._onDataFound=()=>{const e=this._workloadsStore.getWorkloadSize()+this._servicesStore.getServicesSize();this.state.resourceSize<=0&&e>0&&this.setState({resourceSize:e})},this._onSelectionStoreChanged=()=>{const e=this._selectionStore.getState();!e.showSelectedItem&&this.props.onViewChanged&&this.props.onViewChanged([]);const t=t=>{this.setState({showSelectedItem:e.showSelectedItem,selectedItem:t,selectedItemType:e.selectedItemType,selectedItemUid:e.itemUID,selectedItemProperties:e.properties})};if(e.itemUID&&!e.selectedItem){let s,a;const i=t=>{if(t&&t.length)return t.find((t=>t.metadata.uid===e.itemUID))},n=J.KubeFactory.getKubeService();switch(e.selectedItemType){case"replica-set":const e=this._workloadsStore.getState().replicaSetList;e&&(a=i(e.items)),a||(s=()=>n.getReplicaSets());break;case"stateful-set":const t=this._workloadsStore.getState().statefulSetList;t&&(a=i(t.items)),a||(s=()=>n.getStatefulSets());break;case"daemon-set":const o=this._workloadsStore.getState().daemonSetList;o&&(a=i(o.items)),a||(s=()=>n.getDaemonSets())}s?s().then((s=>{e.itemUID===this._selectionStore.getState().itemUID&&(s&&s.items&&s.items.length&&(a=s.items.find((t=>t.metadata.uid===e.itemUID))),a&&t(a))})):t(a)}else t(e.selectedItem)},this._setSelectedKeyPodsViewMap=()=>{this._selectedItemViewMap["replica-set"]=e=>this._getWorkloadPodsViewComponent(e,"ReplicaSet","replica-set",(e=>{const t=e.status;return le.Utils.getPodsStatusProps(t.readyReplicas,t.replicas)})),this._selectedItemViewMap["stateful-set"]=e=>this._getWorkloadPodsViewComponent(e,"StatefulSet","stateful-set",(e=>{const t=e.status;return le.Utils.getPodsStatusProps(t.readyReplicas,t.replicas)})),this._selectedItemViewMap["daemon-set"]=e=>this._getWorkloadPodsViewComponent(e,"DaemonSet","daemon-set",(e=>{const t=e.status;return le.Utils.getPodsStatusProps(t.numberAvailable,t.desiredNumberScheduled)})),this._selectedItemViewMap["orphan-pod"]=(e,t)=>{const{statusProps:s,tooltip:a}=e?le.Utils.generatePodStatusProps(e.status):{statusProps:void 0,tooltip:void 0};return c.createElement(xe.PodsRightPanel,{pod:e,podStatusProps:s,statusTooltip:a,podUid:t})},this._selectedItemViewMap["service-item"]=e=>c.createElement(Pe.ServiceDetails,{service:e,parentKind:e&&e.kind||"Service",notifyViewChanged:this.props.onViewChanged}),this._selectedItemViewMap["image-details"]=e=>c.createElement(ve.ImageDetails,{imageDetails:e,onBackButtonClick:this._setSelectionStateFalse}),this._selectedItemViewMap["pod-details"]=(e,t,s)=>this._getPodDetailsComponent(t,s)},this._setSelectionStateFalse=()=>{const e={item:void 0,itemUID:"",showSelectedItem:!1,selectedItemType:""};this._selectionActionCreator.selectItem(e)},this._namespaceSelection=new U.DropdownSelection,this._selectedItemViewMap={},this._objectFinder={},this._initializeFactorySettings();const t=new W.Filter,i=new W.Filter;t.subscribe(this._onWorkloadsFilterApplied,W.FILTER_CHANGE_EVENT),i.subscribe(this._onSvcFilterApplied,W.FILTER_CHANGE_EVENT),this._setSelectedKeyPodsViewMap(),this._populateObjectFinder(),this._historyService=(0,s.createBrowserHistory)();const n=a.parse(this._historyService.location.search);let r=o;!n.type&&n.view&&(r=n.view),this.state={namespace:this.props.namespace||"",selectedPivotKey:r,showSelectedItem:!!n.uid,selectedItemUid:n.uid,selectedItemProperties:n,selectedItem:void 0,selectedItemType:n.type||"",resourceSize:0,svcFilter:i,workloadsFilter:t,resourceErrorType:this._getResourceErrorType(),zeroDeploymentsFound:!1},this._servicesStore=q.StoreManager.GetStore(re.ServicesStore),this._selectionStore=q.StoreManager.GetStore(ie.SelectionStore),this._workloadsStore=q.StoreManager.GetStore(me.WorkloadsStore),this._podsStore=q.StoreManager.GetStore(te.PodsStore),this._workloadsActionCreator=V.ActionsCreatorManager.GetActionCreator(pe.WorkloadsActionsCreator),this._selectionActionCreator=V.ActionsCreatorManager.GetActionCreator(ae.SelectionActionsCreator),this._workloadsStore.addListener(K.WorkloadsEvents.DeploymentsFetchedEvent,this._setNamespaceOnDeploymentsFetched),this._workloadsStore.addListener(K.WorkloadsEvents.WorkloadsFoundEvent,this._onDataFound),this._workloadsStore.addListener(K.WorkloadsEvents.ZeroDeploymentsFoundEvent,this._onZeroDeploymentsFound),this._servicesStore.addListener(K.ServicesEvents.ServicesFoundEvent,this._onDataFound),this._selectionStore.addChangedListener(this._onSelectionStoreChanged);const l=J.KubeFactory.getKubeService();this._workloadsActionCreator.getDeployments(l),r===d&&V.ActionsCreatorManager.GetActionCreator(oe.ServicesActionsCreator).getServices(l)}render(){return c.createElement(O.Surface,{background:1},c.createElement(T.Page,{className:"kubernetes-container flex flex-grow"},this.state.showSelectedItem?this._getSelectedItemPodsView():this._getMainContent()))}componentDidMount(){setTimeout((()=>{this._updateStateFromHistory(a.parse(this._historyService.location.search)),this._historyUnlisten=this._historyService.listen(this._onHistoryChanged)}),100)}componentDidUpdate(e,t){if(this.state.resourceSize<=0&&this.state.zeroDeploymentsFound&&this.state.selectedPivotKey===o){const e=J.KubeFactory.getKubeService();V.ActionsCreatorManager.GetActionCreator(oe.ServicesActionsCreator).getServices(e)}}componentWillUnmount(){this._historyUnlisten(),this._workloadsStore.removeListener(K.WorkloadsEvents.DeploymentsFetchedEvent,this._setNamespaceOnDeploymentsFetched),this._workloadsStore.removeListener(K.WorkloadsEvents.WorkloadsFoundEvent,this._onDataFound),this._servicesStore.removeListener(K.ServicesEvents.ServicesFoundEvent,this._onDataFound),this._selectionStore.removeChangedListener(this._onSelectionStoreChanged),this._workloadsStore.removeListener(K.WorkloadsEvents.ZeroDeploymentsFoundEvent,this._onZeroDeploymentsFound)}_getResourceErrorType(){if(!this.props.getResourceErrorType)return M.ResourceErrorType.None;const e=this.props.getResourceErrorType(),t=e;return t&&t.then?(setTimeout((()=>{t.then((e=>{this.setState({resourceErrorType:e})}))}),0),M.ResourceErrorType.NotInitialized):e}_getMainContent(){const e=this._getPageContent(),t=this.props.summaryPageHeaderCommandItems,s={title:this.props.title,titleSize:1,className:"content-main-heading",titleClassName:"container-header-title",description:this._getHeaderDescriptionComponent(),commandBarItems:t&&t({resourceErrorType:this.state.resourceErrorType})};return this.props.onTitleBackClick&&(s.backButtonProps={subtle:!0,iconProps:{iconName:"Back"},onClick:this.props.onTitleBackClick,className:"cursor-pointer"}),c.createElement(c.Fragment,null,c.createElement(m.Header,Object.assign({},s)),e)}_getHeaderDescriptionComponent(){const e=this.state.namespace||a.parse(this._historyService.location.search).namespace||"",t=this.props.namespaces||[];let s=t.findIndex((t=>t===e));return s=s<0?0:s,this._namespaceSelection.select(s),c.createElement("div",{className:(0,l.css)("flex-column rhythm-vertical-8",this._doesHeaderNeedMargin()?"k8s-user-action-margin":"")},this._getHeaderClusterNameComponent(),t.length>0&&c.createElement("div",{className:"flex-row flex-center rhythm-horizontal-8"},c.createElement("div",null,R.NamespaceLabelText),c.createElement(S.Dropdown,{className:"k8s-namespaces-dropdown",selection:this._namespaceSelection,items:t.map((e=>({id:e,text:e}))),onSelect:(e,t)=>{const s=t&&t.text||this.state.namespace||"",i=Object.assign(Object.assign({},a.parse(this._historyService.location.search)),{namespace:s});this._historyService.replace({pathname:this._historyService.location.pathname,search:a.stringify(i)}),this._historyService.go(0)}})),!this.props.clusterName&&t.length<=0&&c.createElement("div",{className:"rhythm-horizontal-8"},c.createElement("span",null,(0,n.localeFormat)(R.NamespaceWithValueText,e))))}_doesHeaderNeedMargin(){const e=this.props.namespaces||[];return!!this.props.clusterUrl||e.length>0}_getHeaderClusterNameComponent(){return this.props.clusterName?this.props.clusterUrl?c.createElement("span",null,c.createElement(u.Link,{href:this.props.clusterUrl,target:"_blank",rel:"nofollow noopener"},(0,n.localeFormat)(R.SummaryHeaderSubTextFormat,this.props.clusterName))):c.createElement(r.Tooltip,{text:R.ClusterLinkHelpText},c.createElement("div",null,(0,n.localeFormat)(R.SummaryHeaderSubTextFormat,this.props.clusterName))):null}_getPageContent(){switch(this.state.resourceErrorType){case M.ResourceErrorType.NotInitialized:return c.createElement(E.Spinner,{className:"flex flex-grow",size:"large",label:R.LoadingText});case M.ResourceErrorType.AccessDenied:case M.ResourceErrorType.Deleted:return this._getResourceErrorComponent();default:return this.state.resourceSize>0?this._getMainPivot():this._getZeroData()}}_getResourceErrorComponent(){const e=this.state.resourceErrorType;if(this.props.getResourceErrorActionComponent)return this.props.getResourceErrorActionComponent({resourceErrorType:e});switch(e){case M.ResourceErrorType.Deleted:return we.KubeZeroData.getResourceDeletedErrorComponent();case M.ResourceErrorType.AccessDenied:return we.KubeZeroData.getResourceAccessDeniedErrorComponent()}}_getMainPivot(){const e={kubeService:this.props.kubeService,namespace:this.state.namespace},t=this.state.selectedPivotKey===d?c.createElement(Ae.ServicesPivot,Object.assign({},e,{filter:this.state.svcFilter,filterToggled:h})):c.createElement(We.WorkloadsPivot,Object.assign({},e,{filter:this.state.workloadsFilter,filterToggled:p}));return c.createElement(c.Fragment,null,c.createElement(P.TabBar,{selectedTabId:this.state.selectedPivotKey||o,onSelectedTabChanged:e=>{this._selectTab(e)},renderAdditionalContent:()=>this._getFilterHeaderBar(),disableSticky:!1},c.createElement(P.Tab,{name:R.PivotWorkloadsText,id:o}),c.createElement(P.Tab,{name:R.PivotServiceText,id:d})),c.createElement("div",{className:"page-content page-content-top k8s-pivot-content"},t))}_getSelectedItemPodsView(){const e=this.state.selectedItem,t=this.state.selectedItemType;return t&&this._selectedItemViewMap.hasOwnProperty(t)?this._selectedItemViewMap[t](e,this.state.selectedItemUid,this.state.selectedItemProperties):null}_getWorkloadPodsViewComponent(e,t,s,a){return c.createElement(Fe.WorkloadDetails,{item:e,parentKind:e&&e.kind||t,itemTypeKey:s,getStatusProps:a,notifyViewChanged:this.props.onViewChanged})}_getPodDetailsComponent(e,t){const s=t;return s?c.createElement(ke.PodsDetails,{parentUid:s.parentUid,serviceName:s.serviceName,serviceSelector:s.serviceSelector,selectedPodUid:e,notifyViewChanged:this.props.onViewChanged}):null}_selectTab(e){let t=Object.assign({},a.parse(this._historyService.location.search));t.view=e,this._historyService.replace({pathname:this._historyService.location.pathname,search:a.stringify(t)}),this.setState({selectedPivotKey:e})}_populateObjectFinder(){this._objectFinder["replica-set"]=e=>g._getFilteredFirstObject(this._workloadsStore.getState().replicaSetList,e),this._objectFinder["stateful-set"]=e=>g._getFilteredFirstObject(this._workloadsStore.getState().statefulSetList,e),this._objectFinder["daemon-set"]=e=>g._getFilteredFirstObject(this._workloadsStore.getState().daemonSetList,e),this._objectFinder["orphan-pod"]=e=>g._getFilteredFirstObject(this._podsStore.getState().podsList,e),this._objectFinder["pod-details"]=e=>g._getFilteredFirstObject(this._podsStore.getState().podsList,e),this._objectFinder["service-item"]=e=>{const t=g._getFilteredFirstObject(this._servicesStore.getState().serviceList,e);return t?(0,ce.getServiceItems)([t])[0]:void 0}}static _getFilteredFirstObject(e,t){const s=((e||{}).items||[]).filter((e=>e.metadata.uid===t));return s&&s.length>0?s[0]:void 0}_getFilterHeaderBar(){return c.createElement(c.Fragment,null,c.createElement(f.ConditionalChildren,{renderChildren:!this.state.selectedPivotKey||this.state.selectedPivotKey===o},c.createElement(N.HeaderCommandBarWithFilter,{filter:this.state.workloadsFilter,filterToggled:p,items:[]})),c.createElement(f.ConditionalChildren,{renderChildren:this.state.selectedPivotKey===d},c.createElement(N.HeaderCommandBarWithFilter,{filter:this.state.svcFilter,filterToggled:h,items:[]})))}_getZeroData(){return we.KubeZeroData.getDefaultZeroData()}_initializeFactorySettings(){J.KubeFactory.setImageService(this.props.imageService),J.KubeFactory.setKubeService(this.props.kubeService),(0,j.setContentReaderComponent)(this.props.getContentReaderComponent),J.KubeFactory.setTelemetryService(this.props.telemetryService),J.KubeFactory.setImageLocation(this.props.getImageLocation)}}t[e].KubeSummary=g}("WebUICommonKubeSummary")}),["Resources","Contracts/Contracts","Contracts/KubeServiceBase","WebUI/Common/KubeConsumer","WebUI/Constants","WebUI/FluxCommon/Factory","WebUI/FluxCommon/Actions","WebUI/FluxCommon/ActionsCreatorManager","WebUI/FluxCommon/ActionsHubManager","WebUI/FluxCommon/Store","WebUI/FluxCommon/StoreManager","WebUI/ImageDetails/ImageDetailsActions","WebUI/ImageDetails/ImageDetailsStore","WebUI/KubeFactory","WebUI/ImageDetails/ImageDetailsActionsCreator","WebUI/Pods/PodsActions","WebUI/Pods/PodsActionsCreator","WebUI/Pods/PodsStore","WebUI/Selection/SelectionActions","WebUI/Selection/SelectionActionCreator","WebUI/Selection/SelectionStore","WebUI/Services/ServicesActions","WebUI/Services/ServicesActionsCreator","WebUI/Services/ServicesStore","WebUI/Utils","WebUI/Services/ServiceUtils","WebUI/Workloads/WorkloadsActions","WebUI/Workloads/WorkloadsActionsCreator","WebUI/Workloads/WorkloadsStore","WebUI/Common/ResourceStatus","WebUI/Common/KubeCardWithTable","WebUI/Common/KubeFilterBar","WebUI/Common/Tags","WebUI/RunDetails","WebUI/ImageDetails/ImageDetails","WebUI/Pods/PodsLeftPanel","WebUI/Common/PageTopHeader","WebUI/Pods/PodContentReader","WebUI/Pods/PodLog","WebUI/Pods/PodOverview","WebUI/Pods/PodYaml","WebUI/Pods/PodsRightPanel","WebUI/Pods/PodsDetails","WebUI/Common/KubeZeroData","WebUI/Pods/PodsTable","WebUI/Services/ServiceDetails","WebUI/Services/ServicesTable","WebUI/Services/ServicesFilterBar","WebUI/Services/ServicesPivot","WebUI/Workloads/WorkloadDetails","WebUI/Workloads/DeploymentsTable","WebUI/Workloads/OtherWorkloadsTable","WebUI/Workloads/WorkloadsFilterBar","WebUI/Workloads/WorkloadsPivot","WebUI/Common/KubeSummary"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-environments-web.providers.kubernetes-external"}}));