"use strict";define("Environments/Flux",["require","exports","VSS/Reflux/Action","VSS/Reflux/Store"],(function(e,t,n,s){var a;!function(e){a=t[e]={};class n{constructor(){if(!n._allowPrivateInstantiation)throw new Error("Error: Instantiating an object of Singleton class is not allowed. Please use the instance method")}static getInstance(e){return this._instance||(n._allowPrivateInstantiation=!0,this._instance=new e,n._allowPrivateInstantiation=!1),this._instance}static dispose(){this._instance=null}}t[e].Singleton=n,n._allowPrivateInstantiation=!1,n._instance=null;class s{static create(e,t){return this.createObject(e,t)}static createObject(e,t){if(t)return new e(t);{let n=Object.create(e.prototype);try{const e=n.constructor(t);return e||n}catch(e){return new n.constructor(t)}}}}t[e].Factory=s;class r{static getKey(){throw new Error("This method needs to be implemented in derived classes")}}t[e].KeyMonikerProvider=r;t[e].Initializable=class extends r{};class i extends n{constructor(){super(),this._instanceMap={}}dispose(){Object.keys(this._instanceMap).forEach((e=>{this._deleteInstance(e)})),this._instanceMap={}}getAllObjects(e){let t=e.getKey().toLowerCase(),n=[];for(let e in this._instanceMap)this._instanceMap.hasOwnProperty(e)&&0===e.indexOf(t)&&n.push(this._instanceMap[e]);return n}getObject(e,t){if(e.prototype.constructor.length>0){let n=this._getInstanceKey(e,t),s=this._instanceMap[n];if(s)return s;throw new Error("Object requested is not created yet. Ensure that the object is created before it is queried. "+e)}return this.createObject(e,t,null)}removeObject(e,t){let n=this._getInstanceKey(e,t);this._deleteInstance(n)}createObject(e,t,n){let a=this._getInstanceKey(e,t),r=this._instanceMap[a];return r||(r=s.createObject(e,n),this.onObjectCreated(r,t),this._instanceMap[a]=r),r}_getInstanceKey(e,t){let n=e.getKey();return t&&(n=n+"."+t),n.toLowerCase()}_deleteInstance(e){let t=this._instanceMap[e];if(t){let n=t.__dispose;n&&"function"==typeof n&&t.__dispose(),delete this._instanceMap[e]}}}t[e].BaseManager=i;t[e].Manager=class extends i{onObjectCreated(e,t){e.initialize(t)}}}("Factory"),function(e){t[e]={};class s extends a.Initializable{initialize(e){this._instanceId=e||""}getInstanceId(){return this._instanceId}__dispose(){this.disposeInternal(),this._instanceId=null}}t[e].ActionCreatorBase=s;class r extends a.Initializable{}t[e].ActionsHubBase=r;class i extends n.Action{}t[e].Action=i}("ActionCreatorBase"),function(e){t[e]={};class n extends a.Manager{static GetActionCreator(e,t){return super.getInstance(n).getObject(e,t)}static CreateActionCreatorWithArgs(e,t,s){return super.getInstance(n).createObject(e,t,s)}static CreateActionCreator(e,t){return super.getInstance(n).createObject(e,t,null)}static DeleteActionCreator(e,t){super.getInstance(n).removeObject(e,t)}static dispose(){return super.getInstance(n).dispose()}}t[e].ActionCreatorManager=n}("ActionCreatorManager"),function(e){t[e]={};class n extends a.Manager{static GetActionsHub(e,t){return super.getInstance(n).getObject(e,t)}static GetAllActionsHub(e){return super.getInstance(n).getAllObjects(e)}static CreateActionsHubWithArgs(e,t,s){return super.getInstance(n).createObject(e,t,s)}static CreateActionsHub(e,t){return super.getInstance(n).createObject(e,t,null)}static DeleteActionsHub(e,t){super.getInstance(n).removeObject(e,t)}static dispose(){return super.getInstance(n).dispose()}}t[e].ActionsHubManager=n}("ActionsHubManager"),function(e){t[e]={};class n extends s.Store{static getKey(){throw new Error("This method needs to be implemented in derived classes")}initialize(e){this._instanceId=e||""}getInstanceId(){return this._instanceId}getState(){return{}}__dispose(){this.disposeInternal(),this._instanceId=null}}t[e].StoreBase=n;class a extends n{}t[e].ChangeTrackerStoreBase=a;t[e].DataStoreBase=class extends a{}}("Store"),function(e){t[e]={};class n extends a.Manager{static GetStore(e,t){return super.getInstance(n).getObject(e,t)}static CreateStoreWithArgs(e,t,s){return super.getInstance(n).createObject(e,t,s)}static CreateStore(e,t){return super.getInstance(n).createObject(e,t,null)}static DeleteStore(e,t){super.getInstance(n).removeObject(e,t)}static dispose(){return super.getInstance(n).dispose()}}t[e].StoreManager=n}("StoreManager")}),["Factory","ActionCreatorBase","ActionCreatorManager","ActionsHubManager","Store","StoreManager"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-environments-web.flux-common"}}));