"use strict";define("Checks/ChecksOverview",["require","exports","VSS/Reflux/Action","Checks/Client/RestClient/PipelinesChecks","VSS/Core/TimerManagement","VSS/Reflux/Store","react","VSS/Core/Observable","VSS/Core/Util/Accessibility","VSS/Core/Util/String","VSS/Platform/Layout","VSSUI/Observer","VSSUI/Panel","VSS/Platform/Feature","VSSUI/Button","VSSUI/Card","VSSUI/Dialog","VSSUI/Header","VSSUI/Link","VSSUI/Pill","VSSUI/Table","VSSUI/TooltipEx","VSSUI/Util","VSSUI/Utilities/Provider","VSSUI/MessageCard","VSS/Platform/Location","VSSUI/Icon","VSSUI/Image","VSSUI/List","VSSUI/RadioButton","VSSUI/TextField"],(function(e,t,s,i,n,a,c,o,r,h,l,d,k,C,p,u,m,g,f,b,_,D,v,E,y,P,I,T,A,S,x){var O,w,N,L,R,M,F,B,V,U;O=t[U="Resources"]={},t[U].ApprovalCheck="Approvals",t[U].Approval="Approval",t[U].ApprovalCheckHeader="Check for manual approvals",t[U].ApprovalCheckDescription="Approvers should grant approval for deployment",t[U].ArtifactPolicyName="Evaluate artifact policies",t[U].BusinessHoursCheckHeader="Check for business hours",t[U].BusinessHoursCheckDescription="Deployment must start during the defined business hours",t[U].ChangeOrder="Change execution order",t[U].ChecksHeader="Add your first check",t[U].CheckAddedAnnounceMessage="Check {0} has been added",t[U].CheckDeletedAnnounceMessage="Check {0} has been deleted",t[U].CheckDetails="Check details",t[U].CheckNotAddedAnnounceMessage="Check {0} has not been added. {1}",t[U].CheckNotDeletedAnnounceMessage="Check {0} has not been deleted. {1}",t[U].ChecksPanelHeader="Add check",t[U].ChecksPanelDescription="Checks will be automatically ordered upon creation based on the type of checks, this can be fine tuned and adjusted once created.",t[U].CheckPanelDescriptionLearnMore="Learn more",t[U].ChecksPanelCancel="Cancel",t[U].ChecksPanelCreate="Create",t[U].ChecksPanelSave="Save",t[U].ChecksTable="Checks table",t[U].CheckTimeoutColumn="Timeout",t[U].CheckUpdatedAnnounceMessage="Check {0} has been updated",t[U].CheckNotUpdatedAnnounceMessage="Check {0} has not been updated. {1}",t[U].CreateCheckButtonText="Create",t[U].Day="1 day",t[U].Days="{0} days",t[U].Delete="Delete",t[U].Disable="Disable",t[U].DisabledPostfix="Disabled",t[U].Enable="Enable",t[U].Edit="Edit",t[U].DeleteIconColumn="Delete Check",t[U].DetailedDescription="Changes made to checks are effective immediately, applicable to all existing and new pipelines.",t[U].Hour="1 hour",t[U].Hours="{0} hours",t[U].Minute="1 minute",t[U].Minutes="{0} minutes",t[U].AddFirstCheck="Add your first check",t[U].ChecksDescription="Checks allow you to manage how this resource is used.",t[U].ChooseCheck="Choose which type of check to add",t[U].AddCheck="Add check",t[U].Next="Next",t[U].PageContext_Error_ProjectDataUnavailable="Project data is not available in the page context.",t[U].NoPermissionMessage="You do not have permissions to manage checks on the resource. Contact your administrator.",t[U].CheckTypeColumnName="Type",t[U].CheckDisplayNameColumn="Display name",t[U].CheckDetailsColumn="Details",t[U].CheckOrderColumn="Order",t[U].DeleteCheckConfirmationText="Are you sure you want to delete this check? You won't be able to recover its settings.",t[U].DeleteDialogHeader="Confirm deletion",t[U].DeleteIconName="Delete",t[U].Cancel="Cancel",t[U].EvaluateArtifactPolicy="Evaluate artifact (preview)",t[U].EvaluateArtifactPolicyDescription="Ensure artifacts adhere to custom policies (container images only)",t[U].SearchChecksLabel="Search check types",t[U].SeeAllChecksLabel="View all checks",t[U].TimeoutInMinutesFormat="{0}m",t[U].TimeoutInHoursFormat="{0}h",t[U].TimeoutInDaysFormat="{0}d",t[U].ToApproval="To approval",t[U].ToPostcheckApproval="To Post-check approval",t[U].ToPrecheckApproval="To Pre-check approval",t[U].NoChecksFilteredMessage="No check types are available for the query {0}",t[U].FilteredChecksAvailableMessage="{0} check types are available for the query {1}",t[U].SingleFilteredCheckAvailableMessage="1 check type is available for the query {0}",t[U].ChecksIssuesMessage="Please review and update the approvals and checks to meet compliance requirements before {0}.",t[U].ChecksComplianceBlogPostLink="https://aka.ms/AzPipelines/NoncompliantChecks",t[U].ChecksIssueButton="Learn more",t[U].CheckDetailsTableTitle="Check execution order",t[U].CheckDetailsTableSecondaryText="Checks will run by order, which is pre-determined by check types. Checks within the same order will run in parallel.",t[U].CheckEvaluationOrderLearnMoreLink="https://aka.ms/Pipelines/ChecksOrder",t[U].CheckDetailsTableLearnMoreText="Learn more",function(e){w=t[e]={};class i{constructor(){this.addCheck=new s.Action,this.deleteCheck=new s.Action,this.updateCheck=new s.Action,this.filterChecks=new s.Action}static getInstance(){return this._instance||(this._instance=new i),this._instance}}t[e].ChecksActions=i}("ChecksActions"),function(e){N=t[e]={};class s{static getInstance(e){return this._instance||(s._pageContext=e,s._instance=new s,s._policyAssignmentRestClient=s._pageContext.getRestClient(i.PipelinesChecksClientName)),s._instance}getData(e,t){return this._service.getData(e,t)}addCheck(e){return s._policyAssignmentRestClient.addCheckConfiguration(e,this._project)}updateCheck(e){return s._policyAssignmentRestClient.updateCheckConfiguration(e,this._project,e.id)}deleteCheck(e){return s._policyAssignmentRestClient.deleteCheckConfiguration(this._project,e)}get _project(){const e=s._pageContext.getService("ITfsPageService").getData();if(!e||!e.project)throw new Error(O.PageContext_Error_ProjectDataUnavailable);return e.project.id}get _service(){return s._pageContext.getService("IVssContributionService")}}t[e].ChecksSource=s}("ChecksSource"),function(e){L=t[e]={};t[e].ChecksActionsCreator=class{constructor(e){this._actions=w.ChecksActions.getInstance(),this._source=N.ChecksSource.getInstance(e)}updateCheck(e,t){return this._source.updateCheck(e).then((e=>{let s={definitionRefId:t,checkConfiguration:e};return this._actions.updateCheck.invoke(s),Promise.resolve()}),(e=>Promise.reject(e)))}addCheck(e,t){return this._source.addCheck(e).then((e=>{let s={definitionRefId:t,checkConfiguration:e};return this._actions.addCheck.invoke(s),Promise.resolve()}),(e=>Promise.reject(e)))}deleteCheck(e){return this._source.deleteCheck(e).then((()=>(this._actions.deleteCheck.invoke(e),Promise.resolve())),(e=>Promise.reject(e)))}filterChecks(e){this._actions.filterChecks.invoke(e)}}}("ChecksActionsCreator"),function(e){R=t[e]={};class s extends a.Store{constructor(e,t){super("checks-store"),this._handleAddCheck=e=>{this._checkConfigurationDataList.push(e),this.emitChanged()},this._handleUpdateCheck=e=>{if(this._checkConfigurationDataList&&this._checkConfigurationDataList.length>0){let t=this._checkConfigurationDataList.findIndex((t=>t.checkConfiguration.id===e.checkConfiguration.id));-1!==t&&(this._checkConfigurationDataList[t]=e,this.emitChanged())}},this._handleDeleteCheck=e=>{this._checkConfigurationDataList&&this._checkConfigurationDataList.length>0&&(this._checkConfigurationDataList=this._checkConfigurationDataList.filter((t=>t.checkConfiguration.id!==e)),this.emitChanged())},this._filterChecks=e=>{this._throttledSearch(e)},this._searchChecks=e=>{if(""===(e=e.toLowerCase()))this._filteredCheckDefinitions=this._checkDefinitions;else{const t=e.split(" ");this._filteredCheckDefinitions=this._checkDefinitions.filter((e=>t.every((t=>e.name.toLocaleLowerCase().indexOf(t)>=0||e.description.toLocaleLowerCase().indexOf(t)>=0))))}this.emitChanged()},this._actionsHub=w.ChecksActions.getInstance(),this._timerManagement=new n.TimerManagement,this._filteredCheckDefinitions=[],this._checkConfigurationDataList=e||[],this._checkDefinitions=t,this._throttledSearch=this._timerManagement.debounce((e=>this._searchChecks(e)),250),this._addListeners()}dispose(){this._removeListeners()}getState(){return this._checkConfigurationDataList}_getFilteredCheckDefinitions(){return this._filteredCheckDefinitions}_getCheckDefinitions(){return this._checkDefinitions}_addListeners(){this._actionsHub.addCheck.addListener(this._handleAddCheck),this._actionsHub.deleteCheck.addListener(this._handleDeleteCheck),this._actionsHub.updateCheck.addListener(this._handleUpdateCheck),this._actionsHub.filterChecks.addListener(this._filterChecks)}_removeListeners(){this._actionsHub.addCheck.removeListener(this._handleAddCheck),this._actionsHub.deleteCheck.removeListener(this._handleDeleteCheck),this._actionsHub.updateCheck.removeListener(this._handleUpdateCheck),this._actionsHub.filterChecks.removeListener(this._filterChecks)}}t[e].ChecksStore=s}("ChecksStore"),function(e){M=t[e]={},function(e){e.ApprovalCheckTypeId="8c6f20a7-a545-4486-9777-f762fafe0d4d",e.PreApprovalDefTypeId="0f52a19b-c67e-468f-b8eb-0ae83b532c99",e.MainApprovalDefTypeId="26014962-64a0-49f4-885b-4b874119a5cc",e.PostApprovalDefTypeId="06441319-13fb-4756-b198-c2da116894a4"}(t[e].ApprovalCheckConstants||(t[e].ApprovalCheckConstants={})),function(e){e.Approvals="37794717-f36f-4d78-b2bf-4dc30d0cfbcd",e.AreaId="5B55A9B6-2E0F-40D7-829D-3741D2B8C4E4",e.AreaName="approval",e.ApprovalsLocationIdString="37794717-F36F-4D78-B2BF-4DC30D0CFBCD",e.ApprovalsResource="approvals"}(t[e].Constants||(t[e].Constants={})),function(e){e.EnableChecksScalabilityPhase1Warnings="Pipelines.Checks.EnableChecksScalabilityPhase1Warnings",e.EnableChecksScalabilityPhase2Errors="Pipelines.Checks.EnableChecksScalabilityPhase2Errors",e.EnableChecksScalabilityPhase3FailCheckRuns="Pipelines.Checks.EnableChecksScalabilityPhase3FailCheckRuns",e.EnableChecksScalabilityResourceIssues="Pipelines.Checks.EnableChecksScalabilityResourceIssues",e.ResourceListOptimizations="Pipelines.Policy.ResourceListOptimizations",e.EnableBypassTaskChecks="Pipelines.Checks.EnableBypassTaskChecks",e.EnableBypassApprovals="Pipelines.Checks.EnableBypassApprovals",e.EnableRerunChecks="Pipelines.Checks.EnableRerunChecks",e.FixTimeoutJobWhenOrderingIsEnabled="Pipelines.Checks.FixTimeoutJobWhenOrderingIsEnabled",e.AllowChangingApprovalOrder="Pipelines.Checks.AllowChangingApprovalOrder",e.EnableOrderingChecks="Pipelines.Checks.EnableOrderingChecks",e.EnableCheckUpdatedHook="Pipelines.Checks.EnableCheckUpdatedHook",e.DoNotAllowChangingPoPCheckType="Pipelines.Checks.DoNotAllowChangingPoPCheckType",e.FixBranchCheckWhenPipelineIsNotCheckedOut="Pipelines.Checks.FixBranchCheckWhenPipelineIsNotCheckedOut",e.EnableProductionReadinessCheck="ProductionReadiness.EnableProductionReadinessCheck",e.EnableProductionReadinessCheckInShadowMode="ProductionReadiness.EnableProductionReadinessCheckInShadowMode",e.HandleMultipleExclusiveLocksInPeristedStages="Pipelines.Checks.HandleMultipleExclusiveLocksInPeristedStages",e.TimeoutAuthorizationCheckIn7Days="Pipelines.Checks.TimeoutAuthorizationCheckIn7Days",e.BetterTelemetryForPipelineLog="Pipelines.Checks.BetterTelemetryForPipelineLog",e.FixNotificationSentToExOrgMember="Pipelines.Checks.FixNotificationSentToExOrgMember",e.EnableViolationCreatorCannotApprove="ProductionReadinessEngine.EnableViolationCreatorCannotApprove"}(t[e].FeatureFlagConstants||(t[e].FeatureFlagConstants={})),function(e){e.ServiceEndpoint="endpoint",e.Queue="queue",e.SecureFile="securefile",e.VariableGroup="variablegroup",e.Environment="environment",e.AgentPool="agentpool",e.Repository="repository",e.PersistedStage="persistedstage"}(t[e].ResourceTypeNames||(t[e].ResourceTypeNames={})),function(e){e.TaskCheckTypeId="fe1de3ee-a436-41b4-bb20-f6eb4cb879a7",e.InvokeRestApiTaskId="9c3e8943-130d-4c78-ac63-8af81df62dfb",e.AzureFunctionTaskId="537fdb7a-a601-4537-aa70-92645a2b5ce4",e.TaskCheckTypeName="Task Check",e.TaskCheckMaxSyncRetries="TaskCheck.MaxSyncRetries",e.TaskCheckScalabilityComplianceDeadline="TaskCheck.ScalabilityComplianceDeadline",e.TaskCheckDefaultRetryIntervalInMinutes="TaskCheck.DefaultRetryIntervalInMinutes",e.TaskCheckDefaultTimeoutInMinutes="TaskCheck.DefaultTimeoutInMinutes"}(t[e].TaskCheckConstants||(t[e].TaskCheckConstants={}))}("GeneratedConstants"),function(e){F=t[e]={},t[e].publishTelemetry=function(e,t,i={}){e.getService("IVssTelemetryService").publishEvent(s,t,i)},t[e].markTimeToInteractive=function(e){e.getService("IVssPerformanceService").markTimeToInteractive(s,i.ChecksPageLoad)};const s="PipelineChecks";var i;!function(e){e.ChecksPage="Checks_Page",e.AddCheck="Add_Check",e.EditCheck="Edit_Check",e.DeleteCheck="DeleteCheck"}(t[e].FeatureNames||(t[e].FeatureNames={})),function(e){e.ChecksPageLoad="Pipelines.PipelineChecks"}(i=t[e].ScenarioNames||(t[e].ScenarioNames={}))}("Telemetry"),function(e){B=t[e]={};class s extends l.VssComponent{constructor(e,t){super(e,t),this._getWrappedProps=()=>({resource:this.props.resource,checkDefinition:this.props.checkDefinition||{},checkAction:this.props.checkAction,disableCreateButton:this._disableCreateButton,updateCheckDataAndEnableSave:this._updateCheckDataAndEnableSave,updateCheckDataAndDisableSave:this._updateCheckDataAndDisableSave,updateTelemetryData:this._updateTelemetryData,checkName:this.props.checkName,checkDefinitionRefId:this.props.checkDefinitionRefId,checkConfigObject:this.props.checkConfigObject,defaultCheckSettings:this.props.defaultCheckSettings}),this._disableCreateButton=e=>{this._disableButtonObservable.value!==e&&(this._disableButtonObservable.value=e)},this._updateTelemetryData=e=>{this._telemetryData=e},this._publishTelemetryData=()=>{let e=Object.assign({ProjectAndResourceIdentifier:(0,h.format)("{0}:{1}:{2}",this._source._project,this.props.resource.type,this.props.resource.id)},this._telemetryData);(0,F.publishTelemetry)(this._pageContext,0===this.props.checkAction?F.FeatureNames.AddCheck:F.FeatureNames.EditCheck,e)},this._updateCheckData=e=>{this._checkConfigurationData=Object.assign(this._checkConfigurationData,e)},this._updateCheckDataAndDisableSave=e=>{this._disableButtonObservable.value||(this._disableButtonObservable.value=!0),this._updateCheckData(e)},this._updateCheckDataAndEnableSave=e=>{this._disableButtonObservable.value&&(this._disableButtonObservable.value=!1),this._updateCheckData(e)},this._updateCheck=()=>{this.props.onUpdateCheck&&this.props.onUpdateCheck(this._checkConfigurationData,this.props.checkDefinitionRefId,this.props.checkName).then((()=>{this.props.onClosePanel&&(this._publishTelemetryData(),this.props.onClosePanel())}),(e=>{this._errorMessageObservable.value=e&&e.message,e&&(0,r.announce)(e.message)}))},this._getButtonText=()=>0===this.props.checkAction?O.ChecksPanelCreate:O.ChecksPanelSave,this._disableButtonObservable=new o.ObservableValue(!0),this._errorMessageObservable=new o.ObservableValue(""),this._pageContext=t.pageContext,this._source=N.ChecksSource.getInstance(this._pageContext),this._checkConfigurationData=Object.assign({},this.props.checkConfigObject)}render(){return c.createElement(d.Observer,{isButtonDisabled:this._disableButtonObservable,errorMessage:this._errorMessageObservable},(e=>c.createElement(k.Panel,{className:"checks-panel",onDismiss:this.props.onClosePanel?this.props.onClosePanel:()=>{},titleProps:{text:this.props.checkName,size:1},footerButtonProps:[{text:O.ChecksPanelCancel,onClick:this.props.onClosePanel},{text:this._getButtonText(),onClick:this._updateCheck,primary:!0,disabled:e.isButtonDisabled}]},c.createElement("div",{className:"checks-panel-content flex-column flex-grow"},c.createElement(l.WrappedComponent,{wrappedType:this.props.contributionType,wrappedProps:Object.assign({},this._getWrappedProps()),dependencies:this.props.componentDependencies}),!!e.errorMessage&&c.createElement("div",{className:"panel-error-message-section",tabIndex:0},e.errorMessage)))))}}t[e].ChecksPanel=s}("ChecksPanel"),function(e){V=t[e]={};class s extends l.VssComponent{constructor(e,t){super(e,t),this._getCardHeader=()=>c.createElement("div",{className:"flex-row justify-space-between"},c.createElement("div",null,c.createElement(g.Header,{className:"bolt-card-header",title:"Check execution order"}),c.createElement("div",{className:"bolt-default-horizontal-spacing flex-row flex-noshrink flex-start"},c.createElement("span",{className:"secondary-text flex-grow flex-self-stretch"},O.CheckDetailsTableSecondaryText," ",c.createElement(f.Link,{href:O.CheckEvaluationOrderLearnMoreLink,target:"_blank"},O.CheckDetailsTableLearnMoreText)))),this.props.showAddCheckButton&&c.createElement("div",{className:"margin-horizontal-20 margin-top-16"},this._getAddChecksButton())),this._renderRow=(e,t,s,i)=>{const n={selectableText:s.selectableText,ariaRowOffset:s.ariaRowOffset,data:s.data,excludeTabStop:s.excludeTabStop,itemProvider:i,listProps:s.listProps,onFocusItem:s.onFocusItem,renderSpacer:void 0,selection:void 0,singleClickActivation:!1,role:void 0,eventDispatch:s.eventDispatch},a=t.checkOrder&&1!==t.checkOrder;return c.createElement(c.Fragment,null,a?c.createElement("tr",{className:"check-details-table-first-evaluation-spacer-row",role:"presentation","aria-hidden":!0},c.createElement("td",{colSpan:100})):c.createElement("tr",{className:"bolt-list-row-spacer invisible",role:"presentation","aria-hidden":!0}),c.createElement(_.TableRow,{details:n,index:e,linkProps:t.linkProps},(0,_.renderColumns)(e,this._tableColumns,t,n)))},this._getAddChecksButton=()=>c.createElement("div",{className:"checks-create-button-container"},c.createElement(p.Button,{className:"checks-create-button-with-text",disabled:!this.props.hasManagePermission,text:"Add new",ariaLabel:O.AddCheck,iconProps:{iconName:"Add",tooltipProps:{text:O.AddCheck}},onClick:()=>this.props.onAddCheckButtonClicked()})),this._getEvaluationOrderedCheckDetails=e=>{let t=new Map,s=new Set;e.map((e=>{let i=this._getCheckDefinitionDetails(e.definitionRefId);if(null!=i){const n={checkComponentContributionId:i.uiContributionType,checkComponentContributionDependencies:i.uiContributionDependencies,checkConfigId:e.checkConfiguration.id,checkDefinitionRefId:e.definitionRefId,checkTypeDisplayName:i.name,checkTimeout:e.checkConfiguration.timeout,checkConfig:e.checkConfiguration,checkDefinition:i.checkDefinition},a=i.checkEvaluationOrder;let c;s.add(a),t.has(a)?(c=t.get(a),c.push(n)):c=[n],t.set(a,c)}}));let i=[];const n=Array.from(s).sort();let a=1;return n.map((e=>{let s=t.get(e);s[0].checkOrder=a,i.push(...s),a++})),new E.ArrayItemProvider(i)},this._getCheckDetails=e=>{let t=[];return e.map((e=>{let s=this._getCheckDefinitionDetails(e.definitionRefId);null!=s&&t.push({checkComponentContributionId:s.uiContributionType,checkComponentContributionDependencies:s.uiContributionDependencies,checkConfigId:e.checkConfiguration.id,checkDefinitionRefId:e.definitionRefId,checkTypeDisplayName:s.name,checkTimeout:e.checkConfiguration.timeout,checkConfig:e.checkConfiguration,checkDefinition:s.checkDefinition})})),new E.ArrayItemProvider(t)},this._onRowClicked=(e,t)=>{this._onEditClicked(t.data)},this._onEditClicked=e=>{this.props.hasManagePermission&&(this._showCheckConfigPanel.value=!0,this._selectedCheckRowDetails=Object.assign({},e))},this._getCheckDefinitionDetails=e=>{let t=null;for(let s of this.props.checkDefinitions)if((0,h.equals)(s.definitionRefId,e,!0)){t=s;break}return t},this._getTimeoutDetails=e=>{let t="",s="";if(!e)return{timeoutString:t,timeoutTooltip:s};let i;return e%1440==0?(i=e/1440,t=(0,h.format)(O.TimeoutInDaysFormat,i.toString()),s=1===i.valueOf()?O.Day:(0,h.format)(O.Days,i.toString())):e%60==0?(i=e/60,t=(0,h.format)(O.TimeoutInHoursFormat,i.toString()),s=1===i.valueOf()?O.Hour:(0,h.format)(O.Hours,i.toString())):(i=e,t=(0,h.format)(O.TimeoutInMinutesFormat,i.toString()),s=1===i.valueOf()?O.Minute:(0,h.format)(O.Minutes,i.toString())),{timeoutString:t,timeoutTooltip:s}},this._renderOrderCell=(e,t,s,i,n)=>{let a=void 0!==i.checkOrder;return c.createElement(_.SimpleTableCell,{key:"check-details-col"+t,ariaRowIndex:n,columnIndex:t,tableColumn:s},a?i.checkOrder:null)},this._renderCheckTypeDisplayNameCell=(e,t,s,i,n)=>c.createElement(_.SimpleTableCell,{key:"check-details-col"+t,className:(0,v.css)(i.checkConfig.isDisabled&&"check-disabled"),ariaRowIndex:n,columnIndex:t,tableColumn:s},c.createElement(D.Tooltip,{text:i.checkTypeDisplayName},c.createElement("div",{className:"body-m primary-text checks-table-cell"},i.checkTypeDisplayName))),this._renderDisplayNameCell=(e,t,s,i,n)=>{let a=i.checkConfig.isDisabled;return c.createElement(_.SimpleTableCell,{key:"check-details-col"+t,className:(0,v.css)(a&&"check-disabled"),ariaRowIndex:n,columnIndex:t,tableColumn:s},this._getWrappedComponentElement(0,i),a&&c.createElement("div",{className:"checks-definition-pill"},c.createElement(b.Pill,{className:(0,v.css)("disabled-postfix"),size:0,variant:1},O.DisabledPostfix)),this._showCheckIssues&&i.checkConfig.issue&&c.createElement("div",{className:"checks-definition-pill"},c.createElement(b.Pill,{className:(0,v.css)("flex-noshrink margin-left-4",!a&&2===i.checkConfig.issue.type&&"outlined-warning",!a&&1===i.checkConfig.issue.type&&"outlined-error",a&&"disabled-postfix"),size:0,variant:1},i.checkConfig.issue.message)))},this._renderTimeoutCell=(e,t,s,i,n)=>{const{timeoutString:a,timeoutTooltip:o}=this._getTimeoutDetails(i.checkTimeout);return c.createElement(_.SimpleTableCell,{key:"check-details-col"+t,className:(0,v.css)(i.checkConfig.isDisabled&&"check-disabled"),ariaRowIndex:n,columnIndex:t,tableColumn:s},c.createElement(D.Tooltip,{text:o},c.createElement("div",{className:"body-m primary-text"},a)))},this._renderDetailsCell=(e,t,s,i,n)=>c.createElement(_.SimpleTableCell,{key:"check-details-col"+t,className:(0,v.css)(i.checkConfig.isDisabled&&"check-disabled"),ariaRowIndex:n,columnIndex:t,tableColumn:s},this._getWrappedComponentElement(1,i)),this._renderDeleteCell=(e,t,s,i,n)=>c.createElement(_.TableCell,{className:"bolt-table-cell-side-action",ariaRowIndex:n,columnIndex:t,tableColumn:s,key:"col-"+t},c.createElement("div",{className:"flex-column"},c.createElement(p.Button,{className:this._deleteButtonTableCellClass,subtle:!0,ariaLabel:O.Delete,excludeTabStop:!0,iconProps:{iconName:"Delete",className:"fontSizeML"},disabled:!this.props.hasManagePermission,onClick:e=>{this._onDeleteCheckClicked(i),e.preventDefault()}}))),this._onUpdateCheck=(e,t,s)=>(e.id=this._selectedCheckRowDetails.checkConfigId,this.props.onUpdateCheck(e,t,s,!1)),this._onToogleCheckClicked=e=>(e.checkConfig.isDisabled=!e.checkConfig.isDisabled,this._publishDisableCheckTelemetryEvent(e),this.props.onUpdateCheck(e.checkConfig,e.checkDefinitionRefId,e.checkTypeDisplayName,!0)),this._onChangeApprovalOrder=(e,t)=>{const s=e.checkConfig,i=Object.assign(Object.assign({},s),{settings:Object.assign(Object.assign({},s.settings),{definitionRef:{id:t}})});this.props.onUpdateCheck(i,t,e.checkTypeDisplayName,!0)},this._publishDisableCheckTelemetryEvent=e=>{this.context.pageContext.getService("IVssTelemetryService").publishEvent("Checks","DisableCheck",{IsCheckDisabled:e.checkConfig.isDisabled,CheckName:e.checkTypeDisplayName})},this.onClosePanel=()=>{this._showCheckConfigPanel.value=!1},this._onDeleteCheckClicked=e=>{this._showDeleteCheckDialog.value=!0,this._selectedCheckRowDetails=Object.assign({},e),this._currentElement=document.activeElement,this._currentElement&&this._currentElement.classList.remove(this._deleteButtonTableCellClass)},this._onCancelDelete=()=>{this._showDeleteCheckDialog.value=!1,this._currentElement&&(this._currentElement.focus(),this._currentElement.classList.add(this._deleteButtonTableCellClass))},this._onDeleteConfirm=()=>{this._showDeleteCheckDialog.value=!1,this.props.onDeleteCheck(this._selectedCheckRowDetails.checkConfigId,this._selectedCheckRowDetails.checkTypeDisplayName)},this._initTableColumns=()=>{if(this._tableColumns=[{id:"checkDisplayName",name:O.CheckDisplayNameColumn,ariaLabel:O.CheckDisplayNameColumn,width:-45,readonly:!0,className:"body-s primary-text checks-table-cell",renderCell:this._renderDisplayNameCell},{id:"checkType",name:O.CheckTypeColumnName,ariaLabel:O.CheckTypeColumnName,width:-25,readonly:!0,className:"body-s primary-text",renderCell:this._renderCheckTypeDisplayNameCell},{id:"checkTimeout",name:O.CheckTimeoutColumn,ariaLabel:O.CheckTimeoutColumn,width:-15,readonly:!0,className:"body-s primary-text",renderCell:this._renderTimeoutCell},{id:"checkDetails",name:O.CheckDetailsColumn,ariaLabel:O.CheckDetails,width:-15,readonly:!0,className:"body-s primary-text",renderCell:this._renderDetailsCell}],this._isEnableOrderingChecksEnabled){const e={id:"checkOrder",name:O.CheckOrderColumn,ariaLabel:O.CheckOrderColumn,width:-15,readonly:!0,className:"body-s primary-text checks-table-cell",renderCell:this._renderOrderCell};this._tableColumns=[e,...this._tableColumns]}const e=new _.ColumnMore(this._getMenuForItem,this._showMenuForItem,void 0,40);e.widthStyle=0,this._tableColumns.push(e)},this._getMenuForItem=e=>{const t=[];if(this._isAllowChangeOrderEnabled&&e.checkConfig.type.id===M.ApprovalCheckConstants.ApprovalCheckTypeId){const s=this.props.checkConfigurationData,i=s.filter((e=>e.definitionRefId===M.ApprovalCheckConstants.PreApprovalDefTypeId)).length,n=s.filter((e=>e.definitionRefId===M.ApprovalCheckConstants.MainApprovalDefTypeId||e.definitionRefId===M.ApprovalCheckConstants.ApprovalCheckTypeId)).length,a=s.filter((e=>e.definitionRefId===M.ApprovalCheckConstants.PostApprovalDefTypeId)).length,c=[];e.checkDefinitionRefId!==M.ApprovalCheckConstants.PreApprovalDefTypeId&&0===i&&c.push({id:"to-precheck-approval",onActivate:(t,s)=>{this._onChangeApprovalOrder(e,M.ApprovalCheckConstants.PreApprovalDefTypeId),s.preventDefault()},text:O.ToPrecheckApproval}),e.checkDefinitionRefId!==M.ApprovalCheckConstants.MainApprovalDefTypeId&&e.checkDefinitionRefId!==M.ApprovalCheckConstants.ApprovalCheckTypeId&&0===n&&c.push({id:"to-approval",onActivate:(t,s)=>{this._onChangeApprovalOrder(e,M.ApprovalCheckConstants.MainApprovalDefTypeId),s.preventDefault()},text:O.ToApproval}),e.checkDefinitionRefId!==M.ApprovalCheckConstants.PostApprovalDefTypeId&&0===a&&c.push({id:"to-postcheck-approval",onActivate:(t,s)=>{this._onChangeApprovalOrder(e,M.ApprovalCheckConstants.PostApprovalDefTypeId),s.preventDefault()},text:O.ToPostcheckApproval}),c.length>0&&t.push({text:O.ChangeOrder,id:"change-order",subMenuProps:{id:"change-order-submenu",items:c}})}t.push({text:O.Edit,id:"edit-check",onActivate:(t,s)=>{this._onEditClicked(e),s.preventDefault()}});let s=e.checkConfig.isDisabled,i=this._showCheckErrors&&!!e.checkConfig.issue;return t.push({text:e.checkConfig.isDisabled?O.Enable:O.Disable,id:"disable-check",onActivate:(t,s)=>{this._onToogleCheckClicked(e),s.preventDefault()},disabled:s&&i}),t.push({text:O.Delete,id:"delete-check",onActivate:(t,s)=>{this._onDeleteCheckClicked(e),s.preventDefault()}}),{id:"stage-actions-menu",items:t}},this._showMenuForItem=e=>this.props.hasManagePermission,this._tableBreakpoints=[{breakpoint:1,columnWidths:[-40,-60,0,0,40]},{breakpoint:600,columnWidths:[-40,-60,0,0,40]},{breakpoint:800,columnWidths:[-35,-40,-25,0,40]},{breakpoint:1024,columnWidths:[-20,-30,-25,-25,40]}],this._deleteButtonTableCellClass="bolt-table-cell-content-reveal",this._showDeleteCheckDialog=new o.ObservableValue(!1),this._showCheckConfigPanel=new o.ObservableValue(!1),this._isEnableOrderingChecksEnabled=(0,C.isFeatureFlagEnabled)(t.pageContext,"Pipelines.Checks.EnableOrderingChecks",!1),this._initTableColumns(),this._checkResource=this.props.checkConfigurationData[0].checkConfiguration.resource;let s=(0,C.isFeatureFlagEnabled)(t.pageContext,M.FeatureFlagConstants.EnableChecksScalabilityPhase1Warnings,!1),i=(0,C.isFeatureFlagEnabled)(t.pageContext,M.FeatureFlagConstants.EnableChecksScalabilityPhase2Errors,!1),n=(0,C.isFeatureFlagEnabled)(t.pageContext,M.FeatureFlagConstants.EnableChecksScalabilityPhase3FailCheckRuns,!1);this._isAllowChangeOrderEnabled=this._isEnableOrderingChecksEnabled&&(0,C.isFeatureFlagEnabled)(t.pageContext,M.FeatureFlagConstants.AllowChangingApprovalOrder,!1),this._showCheckErrors=i||n,this._showCheckIssues=s||this._showCheckErrors}render(){const e=this.props.checkConfigurationData;if(!e)return c.createElement("div",null);let t,s,i;return this._isEnableOrderingChecksEnabled?(t=this._getEvaluationOrderedCheckDetails(e),s=this._getCardHeader,i=(e,s,i)=>this._renderRow(e,s,i,t)):t=this._getCheckDetails(e),c.createElement(u.Card,{className:"flex-grow bolt-table-card",contentProps:{contentPadding:!1},renderHeader:s},c.createElement(_.Table,{key:"checks-details-table",ariaLabel:O.ChecksTable,columns:this._tableColumns,itemProvider:t,onActivate:this._onRowClicked,tableBreakpoints:this._tableBreakpoints,role:"table",renderRow:i}),c.createElement(d.Observer,{showCheckConfigPanel:this._showCheckConfigPanel},(e=>e.showCheckConfigPanel&&c.createElement(B.ChecksPanel,{contributionType:this._selectedCheckRowDetails.checkComponentContributionId,onUpdateCheck:this._onUpdateCheck,onClosePanel:this.onClosePanel,resource:this._checkResource,checkConfigObject:this._selectedCheckRowDetails.checkConfig,checkDefinition:this._selectedCheckRowDetails.checkDefinition,timeout:this._selectedCheckRowDetails.checkConfig.timeout,checkAction:1,checkName:this._selectedCheckRowDetails.checkTypeDisplayName,checkDefinitionRefId:this._selectedCheckRowDetails.checkDefinitionRefId,componentDependencies:this._selectedCheckRowDetails.checkComponentContributionDependencies,defaultCheckSettings:this.props.defaultCheckSettings}))),c.createElement(d.Observer,{showDeleteCheckDialog:this._showDeleteCheckDialog},(e=>e.showDeleteCheckDialog&&c.createElement(m.Dialog,{calloutContentClassName:"delete-checks-dialog",titleProps:{text:O.DeleteDialogHeader},footerButtonProps:[{text:O.Cancel,onClick:this._onCancelDelete,autoFocus:!0},{text:O.DeleteIconName,primary:!0,onClick:this._onDeleteConfirm}],onDismiss:this._onCancelDelete},O.DeleteCheckConfirmationText))))}_getWrappedComponentElement(e,t){return c.createElement(l.WrappedComponent,{wrappedType:t.checkComponentContributionId,dependencies:t.checkComponentContributionDependencies,wrappedProps:{onUpdateCheck:this._onUpdateCheck,onClosePanel:this.onClosePanel,resource:this._checkResource,componentData:this.props.checkDefinitions,checkConfigObject:t.checkConfig,checkTableCellToRender:e}})}}t[e].ChecksDetailsTable=s}("ChecksDetailsTable"),function(e){t[e]={};class s extends l.VssComponent{constructor(e,t){super(e,t),this.state={checkIssue:void 0,complianceDeadline:void 0},this.onLearnMoreClicked=()=>{window.location.href=O.ChecksComplianceBlogPostLink}}componentDidMount(){if(!this.props.checkIssue)if(this.props.resourceTypeName===M.ResourceTypeNames.Environment){const e=N.ChecksSource.getInstance(this.context.pageContext).getData("ms.vss-pipelinechecks.checks-data-provider",{});if(e&&Array.isArray(e.checkConfigurationDataList)){let t;if(t=e.checkConfigurationDataList.filter((({checkConfiguration:e})=>!e.isDisabled)),t&&t.length>0){let s=t.find((({checkConfiguration:e})=>!!e.issue));s&&this.setState({checkIssue:s.checkConfiguration.issue,complianceDeadline:e.defaultCheckSettings[M.TaskCheckConstants.TaskCheckScalabilityComplianceDeadline]})}}}else this.context.pageContext.getService("IVssContributionService").getDataAsync("ms.vss-pipelinechecks.checks-issues-provider",{resourceIds:this.props.resourceIds,resourceTypeName:this.props.resourceTypeName}).then((e=>{e&&e.resourcesWithCheckIssuesList&&e.resourcesWithCheckIssuesList.length>0&&this.setState({checkIssue:e.resourcesWithCheckIssuesList[0].checkIssue,complianceDeadline:e.defaultCheckIssueSettings[M.TaskCheckConstants.TaskCheckScalabilityComplianceDeadline]})})).catch((e=>{console.error(e)}))}getMessageCardSeverity(e){if(e){let t=e.type;if(1===t)return"Error";if(2===t)return"Warning"}return"Info"}render(){let e,t;this.props.checkIssue?(e=this.props.checkIssue,t=this.props.complianceDeadline):(e=this.state.checkIssue,t=this.state.complianceDeadline);const s=[{onClick:this.onLearnMoreClicked,primary:!1,text:O.ChecksIssueButton}];return e?c.createElement("div",{className:"page-content page-content-top"},c.createElement(y.MessageCard,{buttonProps:s,severity:this.getMessageCardSeverity(e)},(0,h.format)(O.ChecksIssuesMessage,t))):null}}t[e].ChecksIssuesMessageComponent=s,l.VssComponent.register("checks-issues-message",s)}("ChecksIssuesMessageComponent"),function(e){t[e]={};class s extends l.VssComponent{constructor(e,t){super(e,t),this._getAddChecksButton=()=>c.createElement("div",{className:"checks-create-button-container"},c.createElement(p.Button,{className:"checks-create-button",disabled:!this.props.hasManagePermission,ariaLabel:O.AddCheck,iconProps:{iconName:"Add",tooltipProps:{text:O.AddCheck}},onClick:this._onAddCheckButtonClicked})),this._getChecksListPanel=()=>(this._checksListData=this._isEnableOrderingChecksEnabled?this._availableCheckDefinitionsList.sort(((e,t)=>e.checkEvaluationOrder<t.checkEvaluationOrder?-1:1)):this._availableCheckDefinitionsList,this._checksListData.length>0&&(this._selectedCheckOption.value=this._checksListData[0].checkDefinitionRefId),c.createElement(d.Observer,{selectedCheckOption:this._selectedCheckOption},(e=>c.createElement(k.Panel,{className:"checks-list-panel",onDismiss:this._onClosePanel,titleProps:{text:O.ChecksPanelHeader,size:1,className:(0,l.css)(this._isEnableOrderingChecksEnabled&&"margin-bottom-16")},descriptionItem:this._isEnableOrderingChecksEnabled&&c.createElement("div",{className:"bolt-header-description body-m secondary-text"},O.ChecksPanelDescription," ",c.createElement(f.Link,{href:O.CheckEvaluationOrderLearnMoreLink},O.CheckPanelDescriptionLearnMore)),footerButtonProps:[{text:O.Next,primary:!0,disabled:0===e.selectedCheckOption.length,onClick:this._onCheckTypeSelected}]},c.createElement("div",{className:"checks-list-panel-content"},c.createElement("div",{className:"checks-search-container"},c.createElement(x.TextField,{value:this._searchTextObservable,width:"auto",placeholder:O.SearchChecksLabel,ariaLabel:O.SearchChecksLabel,prefixIconProps:{iconName:"Search"},onChange:(e,t)=>this._onSearchTextChanged(t),style:1})),c.createElement("div",{className:"checks-list"},c.createElement(S.RadioButtonGroup,{onSelect:e=>this._selectedCheckOption.value=e,selectedButtonId:this._selectedCheckOption},this._checksListData.map(((e,t)=>{let s,n;return this._isEnableOrderingChecksEnabled&&(s=t-1>=0&&this._checksListData[t].checkEvaluationOrder!==this._checksListData[t-1].checkEvaluationOrder,n=t+1<this._checksListData.length&&this._checksListData[t].checkEvaluationOrder!==this._checksListData[t+1].checkEvaluationOrder),c.createElement("div",{className:(0,l.css)("flex-row","flex-center",s&&"separator-line-top padding-top-8",n&&"padding-bottom-8"),key:"check-"+e.checkHeader},c.createElement(S.RadioButton,{id:e.checkDefinitionRefId},c.createElement(i,{checkDefinitionRefId:e.checkDefinitionRefId,checkContributionId:e.checkContributionId,checkIcon:e.checkIcon,checkHeader:e.checkHeader,checkDescription:e.checkDescription})))}))))))))),this._getObservedComponents=(e,t,s)=>{let i=this._checkDefinitionRefIdToDefinitionMap[this._selectedCheckOption.value],n=i?i.checkDefinition:{},a=i?i.uiContributionDependencies:[];return c.createElement("div",null,e&&this._getChecksListPanel(),t&&c.createElement(B.ChecksPanel,{contributionType:i.uiContributionType||"",onUpdateCheck:this._onAddCheck,onClosePanel:this._onClosePanel,resource:s,checkDefinition:n,checkAction:0,checkName:i?i.name:"",checkDefinitionRefId:i?i.definitionRefId:"",componentDependencies:a,defaultCheckSettings:this.state.defaultCheckSettings}))},this._renderChecksRow=(e,t,s)=>{let n="checks-row"+(this.props.hasManagePermission?" checks-row-enabled":"");return c.createElement(A.ListItem,{key:"list-item-"+e,index:e,details:s},c.createElement("div",{className:n},c.createElement(i,{checkDefinitionRefId:t.checkDefinitionRefId,checkIcon:t.checkIcon,checkContributionId:t.checkContributionId,checkHeader:t.checkHeader,checkDescription:t.checkDescription})))},this._getAvailableCheckDefinitions=e=>{let t=[];return e.map((e=>{this._shouldAddCheck(e)&&(t.push({checkEvaluationOrder:this._isEnableOrderingChecksEnabled?e.checkEvaluationOrder:void 0,checkDefinitionRefId:e.definitionRefId,checkIcon:{name:e.icon.name,url:e.icon.url,assetLocation:e.icon.assetLocation},checkContributionId:e.uiContributionType,checkHeader:e.name,checkDescription:e.description,onCheckClicked:this._onCheckRowClicked}),this._checkDefinitionRefIdToDefinitionMap[e.definitionRefId]||(this._checkDefinitionRefIdToDefinitionMap[e.definitionRefId]=e))})),t},this._onSeeAllChecksPressed=e=>{13===e.which&&(this._checksListPanelOpen.value=!0,e.preventDefault())},this._listItemClick=(e,t)=>{t.data.onCheckClicked&&t.data.onCheckClicked(t.data.checkDefinitionRefId)},this._onCheckRowClicked=e=>{this._selectedCheckOption.value=e,this._isCheckConfigPanelOpen.value=!0},this._onAddCheckButtonClicked=()=>{this._checksListPanelOpen.value=!0},this._onCheckTypeSelected=()=>{this._checksListPanelOpen.value=!1,this._searchTextObservable.value="",this._isCheckConfigPanelOpen.value=!0},this._onErrorMessageDismiss=()=>{this.setState({errorMessage:""})},this._onClosePanel=()=>{this._checksListPanelOpen.value=!1,this._searchTextObservable.value="",this._isCheckConfigPanelOpen.value=!1},this._onAddCheck=(e,t,s)=>this._actionsCreator.addCheck(e,t).then((()=>((0,r.announce)((0,h.format)(O.CheckAddedAnnounceMessage,s)),Promise.resolve())),(e=>((0,r.announce)((0,h.format)(O.CheckNotAddedAnnounceMessage,s,e.message)),Promise.reject(e)))),this._onDeleteCheck=(e,t)=>{this._actionsCreator.deleteCheck(e).then((()=>{const e={ProjectAndResourceIdentifier:this._getProjectAndResourceIdentifier(),CheckType:t};(0,F.publishTelemetry)(this._pageContext,F.FeatureNames.DeleteCheck,e),this.setState({errorMessage:""}),(0,r.announce)((0,h.format)(O.CheckDeletedAnnounceMessage,t))}),(e=>{this.setState({errorMessage:e&&e.message}),(0,r.announce)((0,h.format)(O.CheckNotDeletedAnnounceMessage,t,e.message))}))},this._onUpdateCheck=(e,t,s,i)=>this._actionsCreator.updateCheck(e,t).then((()=>((0,r.announce)((0,h.format)(O.CheckUpdatedAnnounceMessage,s)),i&&this.setState({errorMessage:""}),Promise.resolve())),(e=>((0,r.announce)((0,h.format)(O.CheckNotUpdatedAnnounceMessage,s,e.message)),i&&this.setState({errorMessage:e&&e.message}),Promise.reject(e)))),this._handleStoreChange=()=>{if(this._checksListPanelOpen.value)this._checksListData=this._getAvailableCheckDefinitions(this._store._getFilteredCheckDefinitions()),this._selectedCheckOption.value=this._checksListData.length>0?this._checksListData[0].checkDefinitionRefId:"",(0,r.announce)(this._getFilteredChecksNarratorMessage());else{let e=this._store.getState();this.setState({showNoChecksExperience:!this._areChecksConfigured(e),checkConfigurationDataList:e})}},this._checkDefinitionRefIdToDefinitionMap={},this._pageContext=t.pageContext,this._source=N.ChecksSource.getInstance(this._pageContext);let s=this.props.dataProviderRequestParameters||{};const n=this._source.getData("ms.vss-pipelinechecks.checks-data-provider",s),a=n?n.checkConfigurationDataList:[];this._isEnableOrderingChecksEnabled=(0,C.isFeatureFlagEnabled)(t.pageContext,"Pipelines.Checks.EnableOrderingChecks",!1),this._actionsCreator=new L.ChecksActionsCreator(t.pageContext),this._store=new R.ChecksStore(a,n.checkDefinitions),this._store.addChangedListener(this._handleStoreChange);let u=this._store.getState();this._checkDefinitions=this._store._getCheckDefinitions(),this._isCheckConfigPanelOpen=new o.ObservableValue(!1),this._checksListPanelOpen=new o.ObservableValue(!1),this._selectedCheckOption=new o.ObservableValue(""),this._searchTextObservable=new o.ObservableValue(""),this.state={showNoChecksExperience:!this._areChecksConfigured(u),checkConfigurationDataList:u,defaultCheckSettings:n.defaultCheckSettings}}componentDidMount(){super.componentDidMount();let e={ProjectAndResourceIdentifier:this._getProjectAndResourceIdentifier(),IsDay0CardDisplayed:this.state.showNoChecksExperience?"true":"false"};(0,F.markTimeToInteractive)(this._pageContext),(0,F.publishTelemetry)(this._pageContext,F.FeatureNames.ChecksPage,e)}componentWillUnmount(){super.componentWillUnmount(),this._store.removeChangedListener(this._handleStoreChange),this._store.dispose()}render(){const e={type:this.props.resourceType,id:this.props.resourceId,name:this.props.resourceName};this._availableCheckDefinitionsList=this._getAvailableCheckDefinitions(this._checkDefinitions);let t=this._availableCheckDefinitionsList.length>0;if(this.state.showNoChecksExperience){const s=(0,P.getAssetLocation)(this.context.pageContext,"ms.vss-pipelinechecks/web/Content/no-checks.png");return c.createElement("div",null,t&&this._getAddChecksButton(),!this.props.hasManagePermission&&this._getNoPermissionMessageSection(),c.createElement("div",{className:(0,l.css)("no-checks-container",this.props.className)},c.createElement("div",null,s&&c.createElement("img",{className:"icon checks-overview-image",src:s,alt:"no-checks-image"})),c.createElement("div",{className:"checks-headers"},c.createElement("span",{className:"checks-header title-l"},O.ChecksHeader),c.createElement("span",{className:"checks-description body-m"},O.ChecksDescription),c.createElement("span",{className:"checks-description body-m"},O.DetailedDescription),c.createElement(A.List,Object.assign({className:"checks-list",itemProvider:new E.ArrayItemProvider(this._availableCheckDefinitionsList.slice(0,3)),renderRow:this._renderChecksRow},this.props.hasManagePermission?{onActivate:this._listItemClick,singleClickActivation:!0}:{})),this._availableCheckDefinitionsList.length>3&&c.createElement(p.Button,{onClick:()=>{this._checksListPanelOpen.value=!0}},O.SeeAllChecksLabel)),c.createElement(d.Observer,{checksListPanelOpen:this._checksListPanelOpen,configChecksPanelOpen:this._isCheckConfigPanelOpen},(t=>this._getObservedComponents(t.checksListPanelOpen,t.configChecksPanelOpen,e)))))}{let s=this._getErrorMessageSection();return c.createElement("div",null,this.state.errorMessage&&s,!this._isEnableOrderingChecksEnabled&&t&&this._getAddChecksButton(),c.createElement("div",{className:"checks-overview-container"},!this.props.hasManagePermission&&this._getNoPermissionMessageSection(),this.state.checkConfigurationDataList&&c.createElement(V.ChecksDetailsTable,{checkConfigurationData:this.state.checkConfigurationDataList,checkDefinitions:this._getFilteredCheckDefinitions(),hasManagePermission:this.props.hasManagePermission,onUpdateCheck:this._onUpdateCheck,onDeleteCheck:this._onDeleteCheck,defaultCheckSettings:this.state.defaultCheckSettings,showAddCheckButton:this._isEnableOrderingChecksEnabled&&t,onAddCheckButtonClicked:this._onAddCheckButtonClicked}),c.createElement(d.Observer,{checksListPanelOpen:this._checksListPanelOpen,configChecksPanelOpen:this._isCheckConfigPanelOpen},(t=>this._getObservedComponents(t.checksListPanelOpen,t.configChecksPanelOpen,e)))))}}_onSearchTextChanged(e){this._searchTextObservable.value=e,this._actionsCreator.filterChecks(e)}_getFilteredCheckDefinitions(){let e=this.state.checkConfigurationDataList.map((e=>e.definitionRefId));return this._checkDefinitions.filter((t=>-1!==e.indexOf(t.definitionRefId)))}_shouldAddCheck(e){if(e.allowMultipleConfigurations)return!0;let t=!1,s=this.state.checkConfigurationDataList;for(let i of s)if((0,h.equals)(i.definitionRefId,e.definitionRefId,!0)){t=!0;break}return!t}_getNoPermissionMessageSection(){return c.createElement("div",{className:"margin-bottom"},c.createElement(y.MessageCard,{className:"checks-no-permission-message-section",severity:"Warning"},O.NoPermissionMessage))}_getErrorMessageSection(){return c.createElement("div",{className:"margin-bottom"},c.createElement(y.MessageCard,{className:"checks-error-message-section",onDismiss:this._onErrorMessageDismiss,severity:"Error"},this.state.errorMessage))}_areChecksConfigured(e){return!(!e||0===e.length)}_getFilteredChecksNarratorMessage(){const e=this._checksListData.length,t=this._searchTextObservable.value;return e>0?1===e?(0,h.format)(O.SingleFilteredCheckAvailableMessage,t):(0,h.format)(O.FilteredChecksAvailableMessage,e,t):(0,h.format)(O.NoChecksFilteredMessage,t)}_getProjectAndResourceIdentifier(){return(0,h.format)("{0}:{1}:{2}",this._source._project,this.props.resourceType,this.props.resourceId)}}t[e].ChecksOverview=s;class i extends l.VssComponent{constructor(e,t){super(e,t)}render(){return this.props.checkIcon.assetLocation&&(this.props.checkIcon.url=(0,P.getAssetLocation)(this.context.pageContext,this.props.checkIcon.assetLocation)),c.createElement("div",{className:"flex-row flex-center"},this.props.checkIcon.url?c.createElement(T.Image,{src:this.props.checkIcon.url,alt:this.props.checkHeader+"-icon",className:"checks-icon-image"}):c.createElement(I.Icon,{iconName:this.props.checkIcon.name,className:"checks-icon"}),c.createElement("div",{className:"checks-list-item"},c.createElement("div",{className:"checks-list-header primary-text body-m"},this.props.checkHeader),c.createElement("div",{className:"checks-list-description secondary-text body-s"},this.props.checkDescription)))}}l.VssComponent.register("checks-overview-component",s)}("ChecksOverview")}),["Resources","ChecksActions","ChecksSource","ChecksActionsCreator","ChecksStore","Generated/Constants","Telemetry","ChecksPanel","ChecksDetailsTable","ChecksIssuesMessageComponent","ChecksOverview"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-pipelinechecks.web"}}));